var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,a,i,u){return new(i||(i=Promise))(function(t,r){function n(e){try{s(u.next(e))}catch(e){r(e)}}function o(e){try{s(u.throw(e))}catch(e){r(e)}}function s(e){e.done?t(e.value):function(t){return t instanceof i?t:new i(function(e){e(t)})}(e.value).then(n,o)}s((u=u.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(r,n){var o,s,a,e,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,s=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(!(a=0<(a=i.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){i.label=t[1];break}if(6===t[0]&&i.label<a[1]){i.label=a[1],a=t;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(t);break}a[2]&&i.ops.pop(),i.trys.pop();continue}t=n.call(r,i)}catch(e){t=[6,e],s=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd?define(["require","exports"],e):"undefined"!=typeof window&&e(window.require||function(){},window["@servicestack/client"]={})}(function(require,exports){"use strict";function nodeRequire(){try{var isNode="object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node;return isNode?eval("require"):null}catch(e){return null}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Inspect=exports.EventBus=exports.alignAuto=exports.alignRight=exports.alignCenter=exports.alignLeft=exports.uniqueKeys=exports.JSV=exports.StringBuffer=exports.toBase64String=exports.toByteArray=exports.fromByteArray=exports.toGuid=exports.fromGuid=exports.toTimeSpan=exports.fromTimeSpan=exports.toDateTime=exports.fromDateTime=exports.isNullOrEmpty=exports.indexOfAny=exports.htmlAttrs=exports.enc=exports.uniq=exports.flatMap=exports.toTimeSpanFmt=exports.toXsdDuration=exports.fromXsdDuration=exports.classNames=exports.NavOptions=exports.UserAttributes=exports.LinkButtonDefaults=exports.NavButtonGroupDefaults=exports.NavbarDefaults=exports.NavLinkDefaults=exports.NavDefaults=exports.btnClasses=exports.btnSizeClass=exports.BootstrapSizes=exports.btnColorClass=exports.BootstrapColors=exports.activeClass=exports.activeClassNav=exports.apiValueFmt=exports.apiValue=exports.mapGet=exports.resolve=exports.each=exports.apply=exports.omit=exports.pick=exports.safeVarName=exports.trimEnd=exports.populateForm=exports.triggerEvent=exports.serializeToFormData=exports.serializeToUrlEncoded=exports.serializeToObject=exports.serializeForm=exports.ajaxSubmit=exports.formSubmit=exports.toVarNames=exports.bootstrapForm=exports.bindHandlers=exports.bootstrap=exports.delaySet=exports.on=exports.$$=exports.$1=exports.createElement=exports.toLocalISOString=exports.timeFmt12=exports.dateFmtHM=exports.dateFmt=exports.padInt=exports.toDateFmt=exports.toDate=exports.isDate=exports.errorResponse=exports.errorResponseExcept=exports.errorResponseSummary=exports.toObject=exports.toFormData=exports.parseResponseStatus=exports.getField=exports.normalize=exports.normalizeKey=exports.parseCookie=exports.tryDecode=exports.stripQuotes=exports.bytesToBase64=exports.appendQueryString=exports.createUrl=exports.createPath=exports.combinePaths=exports.queryString=exports.humanify=exports.humanize=exports.onlyProps=exports.chop=exports.lastRightPart=exports.lastLeftPart=exports.rightPart=exports.leftPart=exports.splitOnLast=exports.splitOnFirst=exports.css=exports.nameOf=exports.sanitize=exports.toPascalCase=exports.toCamelCase=exports.createError=exports.isFormData=exports.createFieldError=exports.createErrorStatus=exports.ApiResult=exports.getResponseStatus=exports.getMethod=exports.JsonServiceClient=exports.GetAccessTokenResponse=exports.HttpMethods=exports.ServerEventUser=exports.GetEventSubscribers=exports.UpdateEventSubscriberResponse=exports.UpdateEventSubscriber=exports.ServerEventReceiver=exports.ServerEventsClient=exports.ReadyState=exports.SingletonInstanceResolver=exports.NewInstanceResolver=exports.MetadataType=exports.MetadataPropertyType=exports.MetadataAttribute=exports.MetadataDataMember=exports.MetadataDataContract=exports.MetadataTypeName=exports.MetadataTypes=exports.MetadataOperationType=exports.MetadataRoute=exports.MetadataTypesConfig=exports.GetNavItemsResponse=exports.GetNavItems=exports.NavItem=exports.EmptyResponse=exports.ErrorResponse=exports.ResponseError=exports.ResponseStatus=void 0;var R=nodeRequire();R&&R("cross-fetch/polyfill");var ResponseStatus=function(e){Object.assign(this,e)};exports.ResponseStatus=ResponseStatus;var ResponseError=function(e){Object.assign(this,e)};exports.ResponseError=ResponseError;var ErrorResponse=function(e){Object.assign(this,e)};exports.ErrorResponse=ErrorResponse;var EmptyResponse=function(e){Object.assign(this,e)};exports.EmptyResponse=EmptyResponse;var NavItem=function(e){Object.assign(this,e)};exports.NavItem=NavItem;var GetNavItems=(X.prototype.createResponse=function(){return new GetNavItemsResponse},X.prototype.getTypeName=function(){return"GetNavItems"},X.prototype.getMethod=function(){return"GET"},X);function X(e){Object.assign(this,e)}exports.GetNavItems=GetNavItems;var GetNavItemsResponse=function(e){Object.assign(this,e)};exports.GetNavItemsResponse=GetNavItemsResponse;var MetadataTypesConfig=function(e){Object.assign(this,e)};exports.MetadataTypesConfig=MetadataTypesConfig;var MetadataRoute=function(e){Object.assign(this,e)};exports.MetadataRoute=MetadataRoute;var MetadataOperationType=function(e){Object.assign(this,e)};exports.MetadataOperationType=MetadataOperationType;var MetadataTypes=function(e){Object.assign(this,e)};exports.MetadataTypes=MetadataTypes;var MetadataTypeName=function(e){Object.assign(this,e)};exports.MetadataTypeName=MetadataTypeName;var MetadataDataContract=function(e){Object.assign(this,e)};exports.MetadataDataContract=MetadataDataContract;var MetadataDataMember=function(e){Object.assign(this,e)};exports.MetadataDataMember=MetadataDataMember;var MetadataAttribute=function(e){Object.assign(this,e)};exports.MetadataAttribute=MetadataAttribute;var MetadataPropertyType=function(e){Object.assign(this,e)};exports.MetadataPropertyType=MetadataPropertyType;var MetadataType=function(e){Object.assign(this,e)};exports.MetadataType=MetadataType;var NewInstanceResolver=(ta.prototype.tryResolve=function(e){return new e},ta);function ta(){}exports.NewInstanceResolver=NewInstanceResolver;var SingletonInstanceResolver=(va.prototype.tryResolve=function(e){return e.instance||(e.instance=new e)},va),ReadyState,ya;function va(){}function eventMessageType(e){switch(e){case"onConnect":return"ServerEventConnect";case"onHeartbeat":return"ServerEventHeartbeat";case"onJoin":return"ServerEventJoin";case"onLeave":return"ServerEventLeave";case"onUpdate":return"ServerEventUpdate"}return null}exports.SingletonInstanceResolver=SingletonInstanceResolver,ya=ReadyState=exports.ReadyState||(exports.ReadyState={}),ya[ya.CONNECTING=0]="CONNECTING",ya[ya.OPEN=1]="OPEN",ya[ya.CLOSED=2]="CLOSED";var ServerEventsClient=(za.prototype.getEventSourceOptions=function(){return{withCredentials:this.withCredentials}},za.prototype.reconnectServerEvents=function(t){var r=this;if(void 0===t&&(t={}),!this.stopped){t.error&&this.onError(t.error);var n=this.eventSource,e=t.url||this.eventStreamUri||n.url;null!=this.options.resolveStreamUrl&&(e=this.options.resolveStreamUrl(e));var o=this.EventSource?new this.EventSource(e,this.getEventSourceOptions()):new EventSource(e,this.getEventSourceOptions());o.addEventListener("error",function(e){return(t.onerror||n.onerror||r.onError)(e)}),o.addEventListener("message",t.onmessage||n.onmessage||this.onMessage);var s=this.options.onReconnect;return null!=s&&s.call(o,t.error),n.removeEventListener&&(n.removeEventListener("error",this.onError),n.removeEventListener("message",this.onMessage)),n.close(),this.eventSource=o}},za.prototype.start=function(){var t=this;if(this.stopped=!1,null==this.eventSource||this.eventSource.readyState===EventSource.CLOSED){var e=this.eventStreamUri;null!=this.options.resolveStreamUrl&&(e=this.options.resolveStreamUrl(e)),this.eventSource=this.EventSource?new this.EventSource(e,this.getEventSourceOptions()):new EventSource(e,this.getEventSourceOptions()),this.eventSource.addEventListener("error",this.onError),this.eventSource.addEventListener("message",function(e){return t.onMessage(e)})}return this},za.prototype.stop=function(){this.stopped=!0,this.eventSource&&this.eventSource.close();var e=this.options;e&&e.heartbeat&&clearInterval(e.heartbeat);var t=this.connectionInfo;return null==t||null==t.unRegisterUrl?new Promise(function(e,t){return e()}):(this.connectionInfo=null,fetch(new Request(t.unRegisterUrl,{method:"POST",mode:"cors",credentials:this.serviceClient.credentials})).then(function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText))}).catch(this.onError))},za.prototype.invokeReceiver=function(e,t,r,n,o){if(e)if("function"==typeof e&&(e=this.resolver.tryResolve(e)),t=t.replace("-",""),e.client=this,e.request=n,"function"==typeof e[t])e[t].call(r||e,n.body,n);else if(t in e)e[t]=n.body;else{var s=Object.getOwnPropertyDescriptor(e,t);if(null!=s)return void(s.set?s.set(n.body):s.writable&&(e[t]=n.body));var a=t.toLowerCase();for(var i in e)if(i.toLowerCase()==a)return void("function"==typeof e[i]?e[i].call(r||e,n.body,n):e[i]=n.body);var u=e.noSuchMethod;"function"==typeof u&&u.call(r||e,n.target,n)}},za.prototype.hasConnected=function(){return null!=this.connectionInfo},za.prototype.registerHandler=function(e,t){return this.options.handlers||(this.options.handlers={}),this.options.handlers[e]=t,this},za.prototype.setResolver=function(e){return this.options.resolver=e,this},za.prototype.registerReceiver=function(e){return this.registerNamedReceiver("cmd",e)},za.prototype.registerNamedReceiver=function(e,t){return this.options.receivers||(this.options.receivers={}),this.options.receivers[e]=t,this},za.prototype.unregisterReceiver=function(e){return void 0===e&&(e="cmd"),this.options.receivers&&delete this.options.receivers[e],this},za.prototype.updateChannels=function(e){this.channels=e;var t=null!=this.eventSource?this.eventSource.url:this.eventStreamUri;this.eventStreamUri=t.substring(0,Math.min(t.indexOf("?"),t.length))+"?channels="+e.join(",")+"&t="+(new Date).getTime()},za.prototype.update=function(e,t){var r="string"==typeof e?e.split(","):e,n="string"==typeof t?t.split(","):t,o=[];for(var s in this.channels){var a=this.channels[s];null!=n&&-1!==n.indexOf(a)||o.push(a)}if(r)for(var s in r)a=r[s],-1===o.indexOf(a)&&o.push(a);this.updateChannels(o)},za.prototype.addListener=function(e,t){return(this.listeners[e]||(this.listeners[e]=[])).push(t),this},za.prototype.removeListener=function(e,t){var r=this.listeners[e];if(r){var n=r.indexOf(t);0<=n&&r.splice(n,1)}return this},za.prototype.raiseEvent=function(e,t){var r=this,n=this.listeners[e];n&&n.forEach(function(e){try{e(t)}catch(e){r.onError(e)}})},za.prototype.getConnectionInfo=function(){if(null==this.connectionInfo)throw"Not Connected";return this.connectionInfo},za.prototype.getSubscriptionId=function(){return this.getConnectionInfo().id},za.prototype.updateSubscriber=function(t){var r=this;return null==t.id&&(t.id=this.getSubscriptionId()),this.serviceClient.post(t).then(function(e){r.update(t.subscribeChannels,t.unsubscribeChannels)}).catch(this.onError)},za.prototype.subscribeToChannels=function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=new UpdateEventSubscriber;return n.id=this.getSubscriptionId(),n.subscribeChannels=r,this.serviceClient.post(n).then(function(e){t.update(r,null)}).catch(this.onError)},za.prototype.unsubscribeFromChannels=function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=new UpdateEventSubscriber;return n.id=this.getSubscriptionId(),n.unsubscribeChannels=r,this.serviceClient.post(n).then(function(e){t.update(null,r)}).catch(this.onError)},za.prototype.getChannelSubscribers=function(){var t=this,e=new GetEventSubscribers;return e.channels=this.channels,this.serviceClient.get(e).then(function(e){return e.map(function(e){return t.toServerEventUser(e)})}).catch(function(e){return t.onError(e),[]})},za.prototype.toServerEventUser=function(e){var t=e.channels,r=new ServerEventUser;for(var n in r.userId=e.userId,r.displayName=e.displayName,r.profileUrl=e.profileUrl,r.channels=t?t.split(","):null,e)"userId"!=n&&"displayName"!=n&&"profileUrl"!=n&&"channels"!=n&&(null==r.meta&&(r.meta={}),r.meta[n]=e[n]);return r},za.UnknownChannel="*",za);function za(e,t,r,n){var w=this;if(void 0===r&&(r={}),void 0===n&&(n=null),this.channels=t,this.options=r,this.eventSource=n,this.onMessage=function(e){if("undefined"==typeof document){var t=e.data?e.data.indexOf("\n"):-1;if(0<=t){var r=e.data,n=e.lastEventId,o=Object.assign({},{lastEventId:n,data:r.substring(0,t)}),s=Object.assign({},{lastEventId:n,data:r.substring(t+1)});return w._onMessage(o),void w._onMessage(s)}}w._onMessage(e)},this._onMessage=function(e){if(!w.stopped){var t=w.options;if(void 0===r)var r={querySelectorAll:function(e){return[]}};var n=r.querySelectorAll.bind(r),o=splitOnFirst(e.data," "),s=null,a=o[0],i=splitOnFirst(a,"@");1<i.length&&(s=i[0],a=i[1]);var u=o[1],l=null;try{l=u?JSON.parse(u):null}catch(e){}if((o=splitOnFirst(a,".")).length<=1)throw"invalid selector format: "+a;var c=o[0],p=o[1].replace(new RegExp("%20","g")," "),f=splitOnFirst(p,"$"),h=f[0],d=f[1],v=d&&n(d),m=v&&v[0],y={eventId:parseInt(e.lastEventId),data:e.data,type:eventMessageType(h)||"ServerEventMessage",channel:s,selector:a,json:u,body:l,op:c,target:f[0],cssSelector:d,meta:{}},g="object"==typeof l?Object.assign({},y,l):y;if(!t.validate||!1!==t.validate(y)){var b=new Headers;if(b.set("Content-Type","text/plain"),"cmd"===c)if("onConnect"===h){if(w.connectionInfo=g,"string"==typeof l.heartbeatIntervalMs&&(w.connectionInfo.heartbeatIntervalMs=parseInt(l.heartbeatIntervalMs)),"string"==typeof l.idleTimeoutMs&&(w.connectionInfo.idleTimeoutMs=parseInt(l.idleTimeoutMs)),Object.assign(t,l),(S=t.handlers.onConnect)&&(S.call(m||r.body,w.connectionInfo,y),w.stopped))return;t.heartbeatUrl&&(t.heartbeat&&clearInterval(t.heartbeat),t.heartbeat=setInterval(function(){if(w.eventSource.readyState===EventSource.CLOSED){clearInterval(t.heartbeat);var e=t.handlers.onStop;return null!=e&&e.apply(w.eventSource),void w.reconnectServerEvents({error:new Error("EventSource is CLOSED")})}fetch(new Request(t.heartbeatUrl,{method:"POST",mode:"cors",headers:b,credentials:w.serviceClient.credentials})).then(function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText))}).catch(function(e){return w.reconnectServerEvents({error:e})})},w.connectionInfo&&w.connectionInfo.heartbeatIntervalMs||t.heartbeatIntervalMs||1e4)),t.unRegisterUrl&&"undefined"!=typeof window&&(window.onunload=function(){navigator.sendBeacon?(w.stopped=!0,w.eventSource&&w.eventSource.close(),navigator.sendBeacon(t.unRegisterUrl)):w.stop()}),w.updateSubscriberUrl=t.updateSubscriberUrl,w.updateChannels((t.channels||"").split(","))}else{var x="onJoin"==h||"onLeave"==h||"onUpdate"==h;if(S=t.handlers[h])x?S.call(m||r.body,g):S.call(m||r.body,l,y);else if(!x){var C=t.receivers&&t.receivers.cmd;w.invokeReceiver(C,h,m,y,"cmd")}x&&(S=t.handlers.onCommand)&&S.call(m||r.body,g)}else"trigger"===c?w.raiseEvent(p,y):"css"===c&&css(v||n("body"),h,l);var S,E=t.receivers&&t.receivers[c];if(w.invokeReceiver(E,h,m,y,c),!eventMessageType(h))(S=t.handlers.onMessage)&&S.call(m||r.body,g);t.onTick&&t.onTick()}}},this.onError=function(e){if(!w.stopped){e||(e=event);var t=w.options.onException;null!=t&&t.call(w.eventSource,e),w.options.onTick&&w.options.onTick()}},0===this.channels.length)throw"at least 1 channel is required";this.resolver=this.options.resolver||new NewInstanceResolver,this.eventStreamUri=combinePaths(e,"event-stream")+"?",this.updateChannels(t),this.serviceClient=new JsonServiceClient(e),this.listeners={},this.withCredentials=!0,this.options.handlers||(this.options.handlers={})}exports.ServerEventsClient=ServerEventsClient;var ServerEventReceiver=(Mc.prototype.noSuchMethod=function(e,t){},Mc);function Mc(){}exports.ServerEventReceiver=ServerEventReceiver;var UpdateEventSubscriber=(Pc.prototype.createResponse=function(){return new UpdateEventSubscriberResponse},Pc.prototype.getTypeName=function(){return"UpdateEventSubscriber"},Pc);function Pc(){}exports.UpdateEventSubscriber=UpdateEventSubscriber;var UpdateEventSubscriberResponse=function(){};exports.UpdateEventSubscriberResponse=UpdateEventSubscriberResponse;var GetEventSubscribers=(Rc.prototype.createResponse=function(){return[]},Rc.prototype.getTypeName=function(){return"GetEventSubscribers"},Rc);function Rc(){}exports.GetEventSubscribers=GetEventSubscribers;var ServerEventUser=function(){};exports.ServerEventUser=ServerEventUser;var HttpMethods=(Tc.Get="GET",Tc.Post="POST",Tc.Put="PUT",Tc.Delete="DELETE",Tc.Patch="PATCH",Tc.Head="HEAD",Tc.Options="OPTIONS",Tc.hasRequestBody=function(e){return!("GET"===e||"DELETE"===e||"HEAD"===e||"OPTIONS"===e)},Tc);function Tc(){}exports.HttpMethods=HttpMethods;var GetAccessToken=(Vc.prototype.createResponse=function(){return new GetAccessTokenResponse},Vc.prototype.getTypeName=function(){return"GetAccessToken"},Vc.prototype.getMethod=function(){return"POST"},Vc);function Vc(e){Object.assign(this,e)}var GetAccessTokenResponse=function(){};exports.GetAccessTokenResponse=GetAccessTokenResponse;var JsonServiceClient=(Yc.prototype.setCredentials=function(e,t){this.userName=e,this.password=t},Yc.prototype.useBasePath=function(e){return this.basePath=e,this},Object.defineProperty(Yc.prototype,"basePath",{set:function(e){e?("/"!=e[0]&&(e="/"+e),this.replyBaseUrl=combinePaths(this.baseUrl,e)+"/",this.oneWayBaseUrl=combinePaths(this.baseUrl,e)+"/"):(this.replyBaseUrl=combinePaths(this.baseUrl,"json","reply")+"/",this.oneWayBaseUrl=combinePaths(this.baseUrl,"json","oneway")+"/")},enumerable:!1,configurable:!0}),Yc.prototype.apply=function(e){return e(this),this},Yc.prototype.get=function(e,t){return"string"!=typeof e?this.fetch(HttpMethods.Get,e,t):this.fetch(HttpMethods.Get,null,t,this.toAbsoluteUrl(e))},Yc.prototype.delete=function(e,t){return"string"!=typeof e?this.fetch(HttpMethods.Delete,e,t):this.fetch(HttpMethods.Delete,null,t,this.toAbsoluteUrl(e))},Yc.prototype.post=function(e,t){return this.fetch(HttpMethods.Post,e,t)},Yc.prototype.postToUrl=function(e,t,r){return this.fetch(HttpMethods.Post,t,r,this.toAbsoluteUrl(e))},Yc.prototype.postBody=function(e,t,r){return this.fetchBody(HttpMethods.Post,e,t,r)},Yc.prototype.put=function(e,t){return this.fetch(HttpMethods.Put,e,t)},Yc.prototype.putToUrl=function(e,t,r){return this.fetch(HttpMethods.Put,t,r,this.toAbsoluteUrl(e))},Yc.prototype.putBody=function(e,t,r){return this.fetchBody(HttpMethods.Put,e,t,r)},Yc.prototype.patch=function(e,t){return this.fetch(HttpMethods.Patch,e,t)},Yc.prototype.patchToUrl=function(e,t,r){return this.fetch(HttpMethods.Patch,t,r,this.toAbsoluteUrl(e))},Yc.prototype.patchBody=function(e,t,r){return this.fetchBody(HttpMethods.Patch,e,t,r)},Yc.prototype.publish=function(e,t){return this.sendOneWay(e,t)},Yc.prototype.sendOneWay=function(e,t){var r=combinePaths(this.oneWayBaseUrl,nameOf(e));return this.fetch(HttpMethods.Post,e,null,r)},Yc.prototype.sendAll=function(e){if(0==e.length)return Promise.resolve([]);var t=combinePaths(this.replyBaseUrl,nameOf(e[0])+"[]");return this.fetch(HttpMethods.Post,e,null,t)},Yc.prototype.sendAllOneWay=function(e){if(0==e.length)return Promise.resolve(void 0);var t=combinePaths(this.oneWayBaseUrl,nameOf(e[0])+"[]");return this.fetch(HttpMethods.Post,e,null,t).then(function(e){})},Yc.prototype.createUrlFromDto=function(e,t){var r=combinePaths(this.replyBaseUrl,nameOf(t));return HttpMethods.hasRequestBody(e)||(r=appendQueryString(r,t)),r},Yc.prototype.toAbsoluteUrl=function(e){return e.startsWith("http://")||e.startsWith("https://")?e:combinePaths(this.baseUrl,e)},Yc.prototype.deleteCookie=function(e){this.manageCookies?delete this.cookies[e]:document&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")},Yc.prototype.createRequest=function(e){var r=this,t=e.method,n=e.request,o=e.url,s=e.args,a=e.body;if(o||(o=this.createUrlFromDto(t,n)),s&&(o=appendQueryString(o,s)),null!=this.bearerToken?this.headers.set("Authorization","Bearer "+this.bearerToken):null!=this.userName&&this.headers.set("Authorization","Basic "+Yc.toBase64("".concat(this.userName,":").concat(this.password))),this.manageCookies){var i=Object.keys(this.cookies).map(function(e){var t=r.cookies[e];return t.expires&&t.expires<new Date?null:"".concat(t.name,"=").concat(encodeURIComponent(t.value))}).filter(function(e){return!!e});0<i.length?this.headers.set("Cookie",i.join("; ")):this.headers.delete("Cookie")}var u=new Headers(this.headers),l=HttpMethods.hasRequestBody(t),c={url:o,method:t,mode:this.mode,credentials:this.credentials,headers:u,compress:!1};return l&&(c.body=a||JSON.stringify(n),isFormData(a)&&u.delete("Content-Type")),null!=this.requestFilter&&this.requestFilter(c),null!=Yc.globalRequestFilter&&Yc.globalRequestFilter(c),c},Yc.prototype.json=function(e){return this.parseJson?this.parseJson(e):e.json()},Yc.prototype.applyResponseFilters=function(e){null!=this.responseFilter&&this.responseFilter(e),null!=Yc.globalResponseFilter&&Yc.globalResponseFilter(e)},Yc.prototype.createResponse=function(e,t){var r=this;if(!e.ok)throw this.applyResponseFilters(e),e;if(this.manageCookies){var n=[];e.headers.forEach(function(e,t){switch(t.toLowerCase()){case"set-cookie":e.split(",").forEach(function(e){return n.push(e)})}}),n.forEach(function(e){var t=parseCookie(e);t&&(r.cookies[t.name]=t)})}e.headers.forEach(function(e,t){switch(t.toLowerCase()){case"x-cookies":0<=e.split(",").indexOf("ss-reftok")&&(r.useTokenCookie=!0)}}),this.applyResponseFilters(e);var o=t&&"string"!=typeof t&&"function"==typeof t.createResponse?t.createResponse():null;if("string"==typeof o)return e.text().then(function(e){return e});var s=e.headers.get("content-type"),a=s&&-1!==s.indexOf("application/json");if(a)return this.json(e).then(function(e){return e});if("undefined"!=typeof Uint8Array&&o instanceof Uint8Array){if("function"!=typeof e.arrayBuffer)throw new Error("This fetch polyfill does not implement 'arrayBuffer'");return e.arrayBuffer().then(function(e){return new Uint8Array(e)})}if("function"==typeof Blob&&o instanceof Blob){if("function"!=typeof e.blob)throw new Error("This fetch polyfill does not implement 'blob'");return e.blob().then(function(e){return e})}var i=e.headers.get("content-length");return"0"===i||null==i&&!a?o:this.json(e).then(function(e){return e})},Yc.prototype.handleError=function(e,r,n){var o=this;if(void 0===n&&(n=null),r instanceof Error)throw this.raiseError(e,r);if(r.bodyUsed)throw this.raiseError(r,createErrorResponse(r.status,r.statusText,n));return void 0===r.json&&r.responseStatus?new Promise(function(e,t){return t(o.raiseError(null,r))}):this.json(r).then(function(e){var t=sanitize(e);if(!t.responseStatus)throw createErrorResponse(r.status,r.statusText,n);throw null!=n&&(t.type=n),t}).catch(function(e){if(e instanceof Error||"undefined"!=typeof window&&e instanceof window.DOMException)throw o.raiseError(r,createErrorResponse(r.status,r.statusText,n));throw o.raiseError(r,e)})},Yc.prototype.fetch=function(e,t,r,n){return this.sendRequest({method:e,request:t,args:r,url:n})},Yc.prototype.fetchBody=function(e,t,r,n){var o=combinePaths(this.replyBaseUrl,nameOf(t));return this.sendRequest({method:e,request:r,body:"string"==typeof r?r:isFormData(r)?r:JSON.stringify(r),url:appendQueryString(o,t),args:n,returns:t})},Yc.prototype.sendRequest=function(t){function o(){var e=s.createRequest(t);return s.urlFilter&&s.urlFilter(e.url),fetch(e.url,e).then(function(e){return s.createResponse(e,r)}).catch(function(e){return s.handleError(a,e)})}var s=this,e=this.createRequest(t),r=t.returns||t.request,a=null;return this.urlFilter&&this.urlFilter(e.url),fetch(e.url,e).then(function(e){return a=e,s.createResponse(e,r)}).catch(function(e){if(401===e.status){if(s.enableAutoRefreshToken&&(s.refreshToken||s.useTokenCookie||null!=s.cookies["ss-reftok"])){var t=new GetAccessToken({refreshToken:s.refreshToken,useTokenCookie:!!s.useTokenCookie}),r=s.refreshTokenUri||s.createUrlFromDto(HttpMethods.Post,t);s.useTokenCookie&&(s.bearerToken=null,s.headers.delete("Authorization"));var n=s.createRequest({method:HttpMethods.Post,request:t,args:null,url:r});return fetch(r,n).then(function(e){return s.createResponse(e,t).then(function(e){return s.bearerToken=e.accessToken||null,o()})}).catch(function(e){return s.onAuthenticationRequired?s.onAuthenticationRequired().then(o).catch(function(e){return s.handleError(a,e,"RefreshTokenException")}):s.handleError(a,e,"RefreshTokenException")})}if(s.onAuthenticationRequired)return s.onAuthenticationRequired().then(o)}return s.handleError(a,e)})},Yc.prototype.raiseError=function(e,t){return null!=this.exceptionFilter&&this.exceptionFilter(e,t),t},Yc.prototype.send=function(e,t,r){return this.sendRequest({method:getMethod(e),request:e,args:t,url:r})},Yc.prototype.sendVoid=function(e,t,r){return this.sendRequest({method:getMethod(e),request:e,args:t,url:r})},Yc.prototype.api=function(n,o,s){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetch(getMethod(n,s),n,o)];case 1:return t=e.sent(),[2,new ApiResult({response:t})];case 2:return r=e.sent(),[2,new ApiResult({error:getResponseStatus(r)})];case 3:return[2]}})})},Yc.prototype.apiVoid=function(n,o,s){return __awaiter(this,void 0,void 0,function(){var t,r;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetch(getMethod(n,s),n,o)];case 1:return t=e.sent(),[2,new ApiResult({response:null!=t?t:new EmptyResponse})];case 2:return r=e.sent(),[2,new ApiResult({error:getResponseStatus(r)})];case 3:return[2]}})})},Yc);function Yc(e){void 0===e&&(e="/"),this.baseUrl=e,this.replyBaseUrl=combinePaths(e,"json","reply")+"/",this.oneWayBaseUrl=combinePaths(e,"json","oneway")+"/",this.mode="cors",this.credentials="include",this.headers=new Headers,this.headers.set("Content-Type","application/json"),this.manageCookies="undefined"==typeof document,this.cookies={},this.enableAutoRefreshToken=!0}function getMethod(e,t){return(null!=t?t:"function"==typeof e.getMethod)?e.getMethod():HttpMethods.Post}function getResponseStatus(e){var t,r;return null!==(r=null!==(t=e.responseStatus)&&void 0!==t?t:e.ResponseStatus)&&void 0!==r?r:e.errorCode?e:e.message?createErrorStatus(e.message,e.errorCode):null}exports.JsonServiceClient=JsonServiceClient,exports.getMethod=getMethod,exports.getResponseStatus=getResponseStatus;var ApiResult=(Object.defineProperty(Of.prototype,"completed",{get:function(){return null!=this.response||null!=this.error},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"failed",{get:function(){var e,t;return null!=(null===(e=this.error)||void 0===e?void 0:e.errorCode)||null!=(null===(t=this.error)||void 0===t?void 0:t.message)},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"succeeded",{get:function(){return!this.failed&&null!=this.response},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"errorMessage",{get:function(){var e;return null===(e=this.error)||void 0===e?void 0:e.message},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"errorCode",{get:function(){var e;return null===(e=this.error)||void 0===e?void 0:e.errorCode},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"errors",{get:function(){var e,t;return null!==(t=null===(e=this.error)||void 0===e?void 0:e.errors)&&void 0!==t?t:[]},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"errorSummary",{get:function(){return null!=this.error&&0==this.errors.length?this.errorMessage:null},enumerable:!1,configurable:!0}),Of.prototype.fieldError=function(e){var t,r=e.toLowerCase();return null===(t=this.errors)||void 0===t?void 0:t.find(function(e){return e.fieldName.toLowerCase()==r})},Of.prototype.fieldErrorMessage=function(e){var t;return null===(t=this.fieldError(e))||void 0===t?void 0:t.message},Of.prototype.hasFieldError=function(e){return null!=this.fieldError(e)},Of.prototype.showSummary=function(e){var t=this;return void 0===e&&(e=[]),!!this.failed&&e.every(function(e){return!t.hasFieldError(e)})},Of.prototype.summaryMessage=function(e){if(void 0===e&&(e=[]),this.showSummary(e)){var t=e.map(function(e){return e.toLowerCase()}),r=t.find(function(e){return-1==t.indexOf(e.toLowerCase())});return null!=r?r:this.errorMessage}},Of.prototype.addFieldError=function(e,t,r){void 0===r&&(r="Exception"),this.error||(this.error=new ResponseStatus);var n=this.fieldError(e);null!=n?(n.errorCode=r,n.message=t):this.error.errors.push(new ResponseError({fieldName:e,errorCode:r,message:t}))},Of);function Of(e){Object.assign(this,e)}function createErrorStatus(e,t){return void 0===t&&(t="Exception"),new ResponseStatus({errorCode:t,message:e})}function createFieldError(e,t,r){return void 0===r&&(r="Exception"),new ResponseStatus({errors:[new ResponseError({fieldName:e,errorCode:r,message:t})]})}function isFormData(e){return"undefined"!=typeof window&&e instanceof FormData}function createErrorResponse(t,r,n){return void 0===n&&(n=null),apply(new ErrorResponse,function(e){null!=n&&(e.type=n),e.responseStatus=apply(new ResponseStatus,function(e){e.errorCode=t&&t.toString(),e.message=r})})}function createError(e,t,r){return new ErrorResponse({responseStatus:new ResponseStatus({errorCode:e,message:t,errors:r?[new ResponseError({errorCode:e,message:t,fieldName:r})]:void 0})})}function toCamelCase(e){return e?e.charAt(0).toLowerCase()+e.substring(1):e}function toPascalCase(e){return e?e.charAt(0).toUpperCase()+e.substring(1):e}function sanitize(e){if(e.responseStatus)return e;if(e.errors)return e;var t={};for(var r in e)e.hasOwnProperty(r)&&(e[r]instanceof Object?t[toCamelCase(r)]=sanitize(e[r]):t[toCamelCase(r)]=e[r]);if(t.errors=[],null!=e.Errors)for(var n=0,o=e.Errors.length;n<o;n++){var s=e.Errors[n],a={};for(var r in s)a[toCamelCase(r)]=s[r];t.errors.push(a)}return t}function nameOf(e){if(!e)return"null";if("function"==typeof e.getTypeName)return e.getTypeName();var t=e&&e.constructor;if(null==t)throw"".concat(e," doesn't have constructor");if(t.name)return t.name;var r=t.toString();return r.substring(9,r.indexOf("("))}function log(e,t){return void 0===t&&(t="LOG"),console.log(t,e),e}function css(e,t,r){for(var n="string"==typeof e?document.querySelectorAll(e):e,o=0;o<n.length;o++){var s=n[o];null!=s&&null!=s.style&&(s.style[t]=r)}}function splitOnFirst(e,t){if(!e)return[e];var r=e.indexOf(t);return 0<=r?[e.substring(0,r),e.substring(r+1)]:[e]}function splitOnLast(e,t){if(!e)return[e];var r=e.lastIndexOf(t);return 0<=r?[e.substring(0,r),e.substring(r+1)]:[e]}function leftPart(e,t){if(null==e)return null;var r=e.indexOf(t);return-1==r?e:e.substring(0,r)}function rightPart(e,t){if(null==e)return null;var r=e.indexOf(t);return-1==r?e:e.substring(r+t.length)}function lastLeftPart(e,t){if(null==e)return null;var r=e.lastIndexOf(t);return-1==r?e:e.substring(0,r)}function lastRightPart(e,t){if(null==e)return null;var r=e.lastIndexOf(t);return-1==r?e:e.substring(r+t.length)}function chop(e,t){return void 0===t&&(t=1),t=Math.abs(t),e?t<e.length?e.substring(0,e.length-t):"":e}function onlyProps(t,e){var r={};return e.forEach(function(e){return r[e]=t[e]}),r}function splitCase(e){return"string"!=typeof e?e:e.replace(/([A-Z]|[0-9]+)/g," $1").replace(/_/g," ").trim()}function humanize(e){return!e||0<=e.indexOf(" ")?e:splitCase(toPascalCase(e))}exports.ApiResult=ApiResult,exports.createErrorStatus=createErrorStatus,exports.createFieldError=createFieldError,exports.isFormData=isFormData,exports.createError=createError,exports.toCamelCase=toCamelCase,exports.toPascalCase=toPascalCase,exports.sanitize=sanitize,exports.nameOf=nameOf,exports.css=css,exports.splitOnFirst=splitOnFirst,exports.splitOnLast=splitOnLast,exports.leftPart=leftPart,exports.rightPart=rightPart,exports.lastLeftPart=lastLeftPart,exports.lastRightPart=lastRightPart,exports.chop=chop,exports.onlyProps=onlyProps,exports.humanize=humanize;var humanify=function(e){return!e||0<=e.indexOf(" ")?e:(e.charAt(0).toUpperCase()+e.substring(1)).split(/(?<=[a-z])(?=[A-Z])|(?<=[A-Z])(?=[A-Z][a-z])/g).map(function(e){return e.replace(/([0-9]+)/g,"$1 ")}).join(" ")},Types,wl;function queryString(e){if(!e||-1===e.indexOf("?"))return{};for(var t=splitOnFirst(e,"?")[1].split("&"),r={},n=0;n<t.length;++n){var o=t[n].split("=");r[o[0]]=1<o.length?decodeURIComponent(o[1].replace(/\+/g," ")):null}return r}function combinePaths(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,n,o=[];for(r=0,n=e.length;r<n;r++){var s=e[r];o=-1===s.indexOf("://")?o.concat(s.split("/")):o.concat(s.lastIndexOf("/")===s.length-1?s.substring(0,s.length-1):s)}var a=[];for(r=0,n=o.length;r<n;r++){var i=o[r];i&&"."!==i&&(".."===i?a.pop():a.push(i))}return""===o[0]&&a.unshift(""),a.join("/")||(a.length?"/":".")}function createPath(e,t){var r={};for(var n in t)r[n.toLowerCase()]=n;for(var o=e.split("/"),s="",a=0;a<o.length;a++){var i=o[a];if(null==i&&(i=""),"{"===i[0]&&"}"===i[i.length-1]){var u=r[i.substring(1,i.length-1).toLowerCase()];u&&(i=t[u],delete t[u])}0<s.length&&(s+="/"),s+=i}return s}function createUrl(e,t){return appendQueryString(createPath(e,t),t)}function appendQueryString(e,t){for(var r in t)t.hasOwnProperty(r)&&(e+=0<=e.indexOf("?")?"&":"?",e+=r+"="+qsValue(t[r]));return e}function qsValue(e){return null==e?"":"undefined"!=typeof Uint8Array&&e instanceof Uint8Array?bytesToBase64(e):encodeURIComponent(e)||""}function bytesToBase64(e){for(var t=(3-e.length%3)%3,r="",n=void 0,o=e.length,s=0,a=0;a<o;a++)n=a%3,s|=e[a]<<(16>>>n&24),2!==n&&e.length-a!=1||(r+=String.fromCharCode(uint6ToB64(s>>>18&63),uint6ToB64(s>>>12&63),uint6ToB64(s>>>6&63),uint6ToB64(63&s)),s=0);return 0==t?r:r.substring(0,r.length-t)+(1==t?"=":"==")}function uint6ToB64(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function _btoa(e){return"function"==typeof btoa?btoa(e):Buffer.from(e).toString("base64")}function _atob(e){return"function"==typeof atob?atob(e):Buffer.from(e,"base64").toString()}function stripQuotes(e){return e&&'"'==e[0]&&'"'==e[e.length]?e.slice(1,-1):e}function tryDecode(t){try{return decodeURIComponent(t)}catch(e){return t}}function parseCookie(e){if(!e)return null;for(var t=null,r=e.split(/; */),n=0;n<r.length;n++){var o=splitOnFirst(r[n],"="),s=o[0].trim(),a=1<o.length?tryDecode(stripQuotes(o[1].trim())):null;if(0==n)t={name:s,value:a,path:"/"};else{var i=s.toLowerCase();"httponly"==i?t.httpOnly=!0:"secure"==i?t.secure=!0:"expires"==i?(t.expires=new Date(a),"Invalid Date"===t.expires.toString()&&(t.expires=new Date(a.replace(/-/g," ")))):t[s]=a}}return t}function normalizeKey(e){return e.toLowerCase().replace(/_/g,"")}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function normalize(e,t){if(isArray(e)){if(!t)return e;for(var r=[],n=0;n<e.length;n++)r[n]=normalize(e[n],t);return r}if("object"!=typeof e)return e;var o={};for(var s in e)o[normalizeKey(s)]=t?normalize(e[s],t):e[s];return o}function getField(e,t){return null==e||null==t?null:e[t]||e[Object.keys(e).filter(function(e){return normalizeKey(e)===normalizeKey(t)})[0]||""]}function parseResponseStatus(t,r){void 0===r&&(r=null);try{var e=JSON.parse(t);return sanitize(e.ResponseStatus||e.responseStatus)}catch(e){return{message:r||e.message||e,__error:{error:e,json:t}}}}function toFormData(e){if("undefined"!=typeof window){var t=new FormData;for(var r in e)t.append(r,e[r]);return t}}function toObject(e){var t=this,r={};if(!e)return r;if("object"!=typeof e)throw new Error("keys must be an Array of object keys");return Array.prototype.slice.call(e).forEach(function(e){t[e]&&(r[e]=t[e])}),r}function errorResponseSummary(){var e=this.responseStatus||this.ResponseStatus;if(null!=e){var t=e.ErrorCode?sanitize(e):e;return t.errors&&0!=t.errors.length?void 0:t.message||t.errorCode}}function errorResponseExcept(e){var t=this.responseStatus||this.ResponseStatus;if(null!=t){var r=t.ErrorCode?sanitize(t):t,n=toVarNames(e);if(n&&null!=r.errors&&0!=r.errors.length){for(var o=n.map(function(e){return(e||"").toLowerCase()}),s=0,a=r.errors;s<a.length;s++){var i=a[s];if(-1!==o.indexOf((i.fieldName||"").toLowerCase()))return}for(var u=0,l=r.errors;u<l.length;u++){i=l[u];if(-1===o.indexOf((i.fieldName||"").toLowerCase()))return i.message||i.errorCode}}return r.message||r.errorCode||void 0}}function errorResponse(t){if(null==t)return errorResponseSummary.call(this);var e=this.responseStatus||this.ResponseStatus;if(null!=e){var r=e.ErrorCode?sanitize(e):e;if(null!=r.errors&&0!=r.errors.length){var n=r.errors.find(function(e){return(e.fieldName||"").toLowerCase()==t.toLowerCase()});return n?n.message||n.errorCode:void 0}}}function isDate(e){return e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)}function toDate(e){return e?isDate(e)?e:"/"==e[0]?new Date(parseFloat(/Date\(([^)]+)\)/.exec(e)[1])):new Date(e):null}function toDateFmt(e){return dateFmt(toDate(e))}function padInt(e){return e<10?"0"+e:e}function dateFmt(e){return void 0===e&&(e=new Date),e.getFullYear()+"/"+padInt(e.getMonth()+1)+"/"+padInt(e.getDate())}function dateFmtHM(e){return void 0===e&&(e=new Date),e.getFullYear()+"/"+padInt(e.getMonth()+1)+"/"+padInt(e.getDate())+" "+padInt(e.getHours())+":"+padInt(e.getMinutes())}function timeFmt12(e){return void 0===e&&(e=new Date),padInt((e.getHours()+24)%12||12)+":"+padInt(e.getMinutes())+":"+padInt(e.getSeconds())+" "+(12<e.getHours()?"PM":"AM")}function toLocalISOString(e){return void 0===e&&(e=new Date),"".concat(e.getFullYear(),"-").concat(padInt(e.getMonth()+1),"-").concat(padInt(e.getDate()),"T").concat(padInt(e.getHours()),":").concat(padInt(e.getMinutes()),":").concat(padInt(e.getSeconds()))}function bsAlert(e){return'<div class="alert alert-danger">'+e+"</div>"}function attr(e,t){return e.getAttribute(t)}function sattr(e,t,r){return e.setAttribute(t,r)}function rattr(e,t){return e.removeAttribute(t)}function createElement(e,t,r){var n={className:"class",htmlFor:"for"},o=document.createElement(e);if(r)for(var s in r)sattr(o,n[s]||s,r[s]);return t&&t.insertAfter&&t.insertAfter.parentNode.insertBefore(o,t.insertAfter.nextSibling),o}function showInvalidInputs(){var e=attr(this,"data-invalid");if(e){var t="checkbox"===this.type||"radio"===this.type||hasClass(this,"form-check"),r=t?parent(this,"form-check"):null;t?addClass(r||this.parentElement,"is-invalid form-control"):addClass(this,"is-invalid");var n=this.nextElementSibling,o=!n||attr(n,"for")!==this.id&&"SMALL"!==n.tagName?this:t?r||n.parentElement:n;(null!=o&&o.nextElementSibling&&hasClass(o.nextElementSibling,"invalid-feedback")?o.nextElementSibling:createElement("div",{insertAfter:o},{className:"invalid-feedback"})).innerHTML=e}}function parent(e,t){for(;null!=e&&!hasClass(e,t);)e=e.parentElement;return e}function hasClass(e,t){return!!e&&(e.classList?e.classList.contains(t):-1<(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(" "+t+" "))}function addClass(e,t){var r;return e?e.classList?(r=e.classList).add.apply(r,t.split(" ")):hasClass(e,t)?null:e.className=(e.className+" "+t).trim():null}function remClass(e,t){return e?e.classList?e.classList.remove(t):hasClass(e,t)?e.className=e.className.replace(/(\s|^)someclass(\s|$)/," "):null:null}function $1(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function $$(e,t){return"string"==typeof e?Array.prototype.slice.call((t||document).querySelectorAll(e)):Array.isArray(e)?e:[e]}function on(e,n){$$(e).forEach(function(r){Object.keys(n).forEach(function(e){var t=n[e];"string"==typeof e&&"function"==typeof t&&r.addEventListener(e,t.bind(r))})})}function delaySet(e,t){var r=t&&t.duration||300,n=setTimeout(function(){return e(!0)},r);return function(){clearTimeout(n),e(!1)}}function bootstrap(e){for(var t=(e||document).querySelectorAll("[data-invalid]"),r=0;r<t.length;r++)showInvalidInputs.call(t[r])}function handleEvent(l,e,c){void 0===e&&(e=document),e.addEventListener(c,function(e){var t="data-".concat(c),r=e.target,n=attr(r,t);if(!n){var o=r.closest("[".concat(t,"]"));o&&(n=attr(o,t),r=o)}if(n){var s=n.indexOf(":");if(0<=s){var a=n.substring(0,s),i=n.substring(s+1);(u=l[a])&&u.apply(r,i.split(","))}else{var u;(u=l[n])&&u.apply(r,[].slice.call(arguments))}}})}function bindHandlers(t,r,e){void 0===r&&(r=document),void 0===e&&(e=null),e&&e.events?e.events.forEach(function(e){return handleEvent(t,r,e)}):["click","dblclick","change","focus","blur","focusin","focusout","select","keydown","keypress","keyup","hover","toggle","input"].forEach(function(e){r.querySelector("[data-".concat(e,"]"))&&handleEvent(t,r,e)})}function bootstrapForm(t,r){t&&(r.model&&populateForm(t,r.model),t.onsubmit=function(e){return e.preventDefault(),r.type="bootstrap-v4",ajaxSubmit(t,r)})}function applyErrors(e,n,t){var r={overrideMessages:!1,messages:{NotEmpty:"Required",NotNull:"Required",Email:"Invalid email",AlreadyExists:"Already exists"},errorFilter:function(e,t,r){return this.overrideMessages?this.messages[t]||e||splitCase(t):e||splitCase(t)}};if(clearErrors(e),n){n=sanitize(n),addClass(e,"has-errors");var a=t&&"bootstrap-v4"===t.type,o=__assign(__assign({},r),t);t.messages&&(o.overrideMessages=!0);var s=o.errorFilter.bind(o),i=n.errors,u=e.querySelectorAll.bind(e);if(i&&i.length){var l={},c={};u("input,textarea,select,button").forEach(function(e){var t=e,r=t.previousElementSibling,n=t.nextElementSibling,o=("radio"===t.type||"checkbox"===t.type?null:t.id)||attr(t,"name");if(o){var s=o.toLowerCase();l[s]=t,a||(hasClass(r,"help-inline")||hasClass(r,"help-block")?c[s]=r:(hasClass(n,"help-inline")||hasClass(n,"help-block"))&&(c[s]=n))}}),u(".help-inline[data-for],.help-block[data-for]").forEach(function(e){var t=attr(e,"data-for").toLowerCase();c[t]=e});for(var p=0,f=i;p<f.length;p++){var h=f[p],d=(h.fieldName||"").toLowerCase(),v=l[d];if(v)if(a){var m=attr(v,"type");"radio"===m||"checkbox"===m||addClass(v,"is-invalid"),sattr(v,"data-invalid",s(h.message,h.errorCode,"field"))}else addClass(v,"error"),addClass(v.parentElement,"has-error");var y=c[d];y&&(addClass(y,"error"),y.innerHTML=s(h.message,h.errorCode,"field"),y.style.display="block")}u("[data-validation-summary]").forEach(function(e){var t=attr(e,"data-validation-summary").split(","),r=errorResponseExcept.call(n,t);r&&(e.innerHTML=bsAlert(r))})}else{var g=s(n.message||splitCase(n.errorCode),n.errorCode,"summary");a?u("[data-validation-summary]").forEach(function(e){return e.innerHTML="<"===g[0]?g:bsAlert(g)}):u(".error-summary").forEach(function(e){e.innerHTML=g(e).style.display="block"})}return e}}function clearErrors(e){remClass(e,"has-errors");var t=e.querySelectorAll.bind(e);t(".error-summary").forEach(function(e){e.innerHTML="",e.style.display="none"}),t("[data-validation-summary]").forEach(function(e){e.innerHTML=""}),t(".error").forEach(function(e){return remClass(e,"error")}),t(".form-check.is-invalid [data-invalid]").forEach(function(e){rattr(e,"data-invalid")}),t(".form-check.is-invalid").forEach(function(e){return remClass(e,"form-control")}),t(".is-invalid").forEach(function(e){remClass(e,"is-invalid"),rattr(e,"data-invalid")}),t(".is-valid").forEach(function(e){return remClass(e,"is-valid")})}function toVarNames(e){return e?isArray(e)?e:e.split(",").map(function(e){return e.trim()}):[]}function formSubmit(e){void 0===e&&(e={});var t,r=this,n=attr(r,"enctype")||Types.UrlEncoded;if(n==Types.MultiPart&&void 0===window.FormData)throw new Error("FormData Type is needed to send '".concat(Types.MultiPart,"' Content Types"));try{t=serializeForm(r,n)}catch(e){throw new Error("".concat(e.message||e))}var o=new Headers;o.set("Accept",Types.Json),o.set("Content-Type",n);var s={method:attr(r,"method")||"POST",credentials:"include",mode:"cors",headers:o,body:t};return e.requestFilter&&e.requestFilter(s),fetch(new Request(e.url||attr(r,"action"),s)).catch(function(e){throw new Error("Network is unreachable (".concat(e.message||e,")"))}).then(function(t){return e.responseFilter&&e.responseFilter(t),t.ok?(handleHeaderBehaviors(r,t),fromResponse(t)):t.json().catch(function(e){throw new Error("The request failed with "+(t.statusText||t.status))}).then(function(e){throw Object.assign(new ErrorResponse,sanitize(e))})})}function handleHeaderBehaviors(e,t){var r=t.headers.get("X-Location");r&&(location.href=r);var n=t.headers.get("X-Trigger");if(n){var o=n.indexOf(":"),s=0<=o?n.substring(0,o):n,a=0<=o?n.substring(o+1):null;triggerEvent(e,s,a?[a]:[])}}function ajaxSubmit(o,s){void 0===s&&(s={});var a="bootstrap-v4"===s.type;clearErrors(o);try{if(s.validate&&!1===s.validate.call(o))return!1}catch(e){return!1}var i=o.querySelectorAll.bind(o);addClass(o,"loading");var e=null==s.onSubmitDisable?"[type=submit]":s.onSubmitDisable,t=null!=e&&""!=e;function r(e,t){if(void 0===t&&(t=null),t)applyErrors(o,t.ResponseStatus||t.responseStatus,__assign({},s));else if(e){addClass(o,"has-errors");var r=i(".error-summary")[0];if(r&&(r.innerHTML=e),a){var n=i("[data-validation-summary]")[0];n&&(n.innerHTML=bsAlert(e))}}s.error&&s.error.call(o,t),a&&i("[data-invalid]").forEach(function(e){return showInvalidInputs.call(e)})}return t&&i(e).forEach(function(e){sattr(e,"disabled","disabled")}),(s.submit||formSubmit).call(o,s).then(function(e){return s.success&&s.success.call(o,e),!1}).catch(function(e){e.responseStatus?r(null,e):r("".concat(e.message||e),null)}).finally(function(){remClass(o,"loading"),t&&i(e).forEach(function(e){rattr(e,"disabled")}),s.complete&&s.complete.call(o)})}function fromResponse(e){var t=e.headers.get("content-type"),r=t&&-1!==t.indexOf(Types.Json);if(r)return e.json();var n=e.headers.get("content-length");return"0"===n||null==n&&!r?null:e.json()}function serializeForm(e,t){return void 0===t&&(t=null),t===Types.MultiPart?new FormData(e):t==Types.Json?JSON.stringify(serializeToObject(e)):serializeToUrlEncoded(e)}function formEntries(e,t,r){for(var n,o=e,s=o.elements.length,a=0;a<s;a++)if((n=o.elements[a]).name&&!n.disabled&&"file"!=n.type&&"reset"!=n.type&&"submit"!=n.type&&"button"!=n.type)if("select-multiple"==n.type)for(var i=o.elements[a].options.length-1;0<=i;i--)n.options[i].selected&&r(t,n.name,n.options[i].value);else("checkbox"!=n.type&&"radio"!=n.type||n.checked)&&r(t,n.name,n.value);return t}function serializeToObject(e){return formEntries(e,{},function(e,t,r){return e[t]=r})}function serializeToUrlEncoded(e){return formEntries(e,[],function(e,t,r){return"string"==typeof r?e.push(encodeURIComponent(t)+"="+encodeURIComponent(r)):null}).join("&").replace(/%20/g,"+")}function serializeToFormData(e){return formEntries(e,new FormData,function(e,t,r){return e.append(t,r)})}function triggerEvent(e,t,r){if(void 0===r&&(r=null),document.createEvent){(n=document.createEvent("click"==t||t.startsWith("mouse")?"MouseEvents":"HTMLEvents")).initEvent(t,!0,!0),n.data=r,e.dispatchEvent(n)}else{var n=document.createEventObject();e.fireEvent("on"+t,n)}}function populateForm(e,t){if(t){var r;for(var n in t){var o=t[n];null==o&&(o="");var s=e.elements.namedItem(n)||e.elements.namedItem((r=n)?r[0]===r[0].toUpperCase()?toCamelCase(r):r[0]===r[0].toLowerCase()?toPascalCase(r):r:r),a=s;if(s)switch(a.type||s[0].type){case"radio":case"checkbox":for(var i=s.length,u=0;u<i;u++)s[u].checked=-1<o.indexOf(s[u].value);break;case"select-multiple":var l=isArray(o)?o:[o],c=s;for(u=0;u<c.options.length;u++)c.options[u].selected=-1<l.indexOf(c.options[u].value);break;case"select":case"select-one":a.value=o.toString()||o;break;case"date":var p=toDate(o);p&&(a.value=p.toISOString().split("T")[0]);break;default:a.value=o}}}}function trimEnd(e,t){for(var r=e.length;0<r&&e[r-1]===t;)--r;return r<e.length?e.substring(0,r):e}function safeVarName(e){return e.replace(/[\W]+/g,"")}function pick(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&0<=t.indexOf(n)&&(r[n]=e[n]);return r}function omit(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&(r[n]=e[n]);return r}function apply(e,t){return t(e),e}function each(e,r,t){return e.reduce(function(e,t){return r(e,t),e},t||{})}function resolve(e,t){var r="function"==typeof e?e():e;return"function"==typeof t?t(r):r}function mapGet(e,t){if(!e||!t)return null;var r=e[t];if(r)return r;if("object"!=typeof e)return null;var n=t.toLowerCase(),o=Object.keys(e).find(function(e){return e.toLowerCase()===n});return o?e[o]:null}function apiValue(e){return null==e?"":"string"==typeof e?"/Date("===e.substring(0,6)?toDate(e):e.trim():e}function apiValueFmt(e){var t=apiValue(e);return(null!=t?isDate(t)?dateFmt(t):t:null)||""}function activeClassNav(e,t){return null!=e.href&&(e.exact||t.length<=1?trimEnd(t,"/").toLowerCase()===trimEnd(e.href,"/").toLowerCase():trimEnd(t,"/").toLowerCase().startsWith(trimEnd(e.href,"/").toLowerCase()))?"active":null}function activeClass(e,t,r){return null!=e&&(r||t.length<=1?trimEnd(t,"/").toLowerCase()===trimEnd(e,"/").toLowerCase():trimEnd(t,"/").toLowerCase().startsWith(trimEnd(e,"/").toLowerCase()))?"active":null}function bootstrapColors(){return["primary","secondary","success","info","warning","danger","light","dark"]}function btnColorClass(e){for(var t=0,r=bootstrapColors();t<r.length;t++){var n=r[t];if(e[n])return"btn-"+n;if(e["outline-"+n])return"btn-outline-"+n}return null}function bootstrapSizes(){return["xs","sm","md","lg"]}function btnSizeClass(e){for(var t=0,r=bootstrapSizes();t<r.length;t++){var n=r[t];if(e[n])return"btn-"+n}return null}function btnClasses(e){var t=[],r=btnColorClass(e);r&&t.push(r);var n=btnSizeClass(e);return n&&t.push(n),e.block&&t.push("btn-block"),t}exports.humanify=humanify,exports.queryString=queryString,exports.combinePaths=combinePaths,exports.createPath=createPath,exports.createUrl=createUrl,exports.appendQueryString=appendQueryString,exports.bytesToBase64=bytesToBase64,JsonServiceClient.toBase64=function(e){return _btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(new Number("0x"+t).valueOf())}))},exports.stripQuotes=stripQuotes,exports.tryDecode=tryDecode,exports.parseCookie=parseCookie,exports.normalizeKey=normalizeKey,exports.normalize=normalize,exports.getField=getField,exports.parseResponseStatus=parseResponseStatus,exports.toFormData=toFormData,exports.toObject=toObject,exports.errorResponseSummary=errorResponseSummary,exports.errorResponseExcept=errorResponseExcept,exports.errorResponse=errorResponse,exports.isDate=isDate,exports.toDate=toDate,exports.toDateFmt=toDateFmt,exports.padInt=padInt,exports.dateFmt=dateFmt,exports.dateFmtHM=dateFmtHM,exports.timeFmt12=timeFmt12,exports.toLocalISOString=toLocalISOString,exports.createElement=createElement,exports.$1=$1,exports.$$=$$,exports.on=on,exports.delaySet=delaySet,exports.bootstrap=bootstrap,"undefined"!=typeof window&&void 0!==window.Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})),exports.bindHandlers=bindHandlers,exports.bootstrapForm=bootstrapForm,wl=Types||(Types={}),wl.MultiPart="multipart/form-data",wl.UrlEncoded="application/x-www-form-urlencoded",wl.Json="application/json",exports.toVarNames=toVarNames,exports.formSubmit=formSubmit,exports.ajaxSubmit=ajaxSubmit,exports.serializeForm=serializeForm,exports.serializeToObject=serializeToObject,exports.serializeToUrlEncoded=serializeToUrlEncoded,exports.serializeToFormData=serializeToFormData,exports.triggerEvent=triggerEvent,exports.populateForm=populateForm,exports.trimEnd=trimEnd,exports.safeVarName=safeVarName,exports.pick=pick,exports.omit=omit,exports.apply=apply,exports.each=each,exports.resolve=resolve,exports.mapGet=mapGet,exports.apiValue=apiValue,exports.apiValueFmt=apiValueFmt,exports.activeClassNav=activeClassNav,exports.activeClass=activeClass,exports.BootstrapColors=bootstrapColors(),exports.btnColorClass=btnColorClass,exports.BootstrapSizes=bootstrapSizes(),exports.btnSizeClass=btnSizeClass,exports.btnClasses=btnClasses;var NavDefaults=(Xn.create=function(){return new NavOptions},Xn.forNav=function(e){return e||Xn.create()},Xn.overrideDefaults=function(e,t){return null==e?t:((e=Object.assign({},e)).navClass===Xn.navClass&&null!=t.navClass&&(e.navClass=t.navClass),e.navItemClass===Xn.navItemClass&&null!=t.navItemClass&&(e.navItemClass=t.navItemClass),e.navLinkClass===Xn.navLinkClass&&null!=t.navLinkClass&&(e.navLinkClass=t.navLinkClass),e.childNavItemClass===Xn.childNavItemClass&&null!=t.childNavItemClass&&(e.childNavItemClass=t.childNavItemClass),e.childNavLinkClass===Xn.childNavLinkClass&&null!=t.childNavLinkClass&&(e.childNavLinkClass=t.childNavLinkClass),e.childNavMenuClass===Xn.childNavMenuClass&&null!=t.childNavMenuClass&&(e.childNavMenuClass=t.childNavMenuClass),e.childNavMenuItemClass===Xn.childNavMenuItemClass&&null!=t.childNavMenuItemClass&&(e.childNavMenuItemClass=t.childNavMenuItemClass),e)},Xn.showNav=function(e,t){return null==t||0===t.length?null==e.show:!(null!=e.show&&t.indexOf(e.show)<0||null!=e.hide&&0<=t.indexOf(e.hide))},Xn.navClass="nav",Xn.navItemClass="nav-item",Xn.navLinkClass="nav-link",Xn.childNavItemClass="nav-item dropdown",Xn.childNavLinkClass="nav-link dropdown-toggle",Xn.childNavMenuClass="dropdown-menu",Xn.childNavMenuItemClass="dropdown-item",Xn);function Xn(){}exports.NavDefaults=NavDefaults;var NavLinkDefaults=(bo.forNavLink=function(e){return e||NavDefaults.create()},bo);function bo(){}exports.NavLinkDefaults=NavLinkDefaults;var NavbarDefaults=(eo.create=function(){return new NavOptions({navClass:eo.navClass})},eo.forNavbar=function(e){return NavDefaults.overrideDefaults(e,eo.create())},eo.navClass="navbar-nav",eo);function eo(){}exports.NavbarDefaults=NavbarDefaults;var NavButtonGroupDefaults=(go.create=function(){return new NavOptions({navClass:go.navClass,navItemClass:go.navItemClass})},go.forNavButtonGroup=function(e){return NavDefaults.overrideDefaults(e,go.create())},go.navClass="btn-group",go.navItemClass="btn btn-primary",go);function go(){}exports.NavButtonGroupDefaults=NavButtonGroupDefaults;var LinkButtonDefaults=(io.create=function(){return new NavOptions({navItemClass:io.navItemClass})},io.forLinkButton=function(e){return NavDefaults.overrideDefaults(e||null,io.create())},io.navItemClass="btn",io);function io(){}exports.LinkButtonDefaults=LinkButtonDefaults;var UserAttributes=(ko.fromSession=function(e){var t=[];return null!=e&&(t.push("auth"),e.roles&&t.push.apply(t,e.roles.map(function(e){return"role:"+e})),e.permissions&&t.push.apply(t,e.permissions.map(function(e){return"perm:"+e}))),t},ko);function ko(){}exports.UserAttributes=UserAttributes;var NavOptions=(po.fromSession=function(e,t){return(t=t||new po).attributes=UserAttributes.fromSession(e),t},po);function po(e){this.attributes=[],this.navClass=NavDefaults.navClass,this.navItemClass=NavDefaults.navItemClass,this.navLinkClass=NavDefaults.navLinkClass,this.childNavItemClass=NavDefaults.childNavItemClass,this.childNavLinkClass=NavDefaults.childNavLinkClass,this.childNavMenuClass=NavDefaults.childNavMenuClass,this.childNavMenuItemClass=NavDefaults.childNavMenuItemClass,Object.assign(this,e)}function classNames(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=[],n=0;n<e.length;n++){var o=e[n];if(o){var s=typeof o;if("string"==s||"number"==s)r.push(o);else if(Array.isArray(o)&&o.length){var a=classNames.apply(null,o);a&&r.push(a)}else if("object"==s)for(var i=0,u=Object.keys(o);i<u.length;i++){var l=u[i];o[l]&&r.push(l)}}}return r.join(" ")}function fromXsdDuration(e){var t=0,r=0,n=0,o=0,s=0,a=splitOnFirst(e.substring(1),"T"),i=2==a.length,u=splitOnFirst(a[0],"D");if(2==u.length&&(t=parseInt(u[0],10)||0),i){var l=splitOnFirst(a[1],"H");2==l.length&&(r=parseInt(l[0],10)||0);var c=splitOnFirst(l[l.length-1],"M");2==c.length&&(n=parseInt(c[0],10)||0);var p=splitOnFirst(c[c.length-1],"S");2==p.length&&(s=parseFloat(p[0])),s-=o=0|s}return 24*t*60*60+60*r*60+60*n+o+s}function timeFmt(e,t){var r,n=0|e,o=n,s=60<=o?o%60:o,a=60<=(o/=60)?o%60:o,i=24<=(o/=60)?o%24:o,u=o/24,l=s+(e-n),c=t?"P":"";t?(0<(0|u)&&(c+="".concat(0|u,"D")),(0==u||0<i+a+s+l)&&(c+="T",0<(0|i)&&(c+="".concat(0|i,"H")),0<(0|a)&&(c+="".concat(0|a,"M")),0<l?(r=trimEnd(trimEnd(r=l.toFixed(7),"0"),"."),c+="".concat(r,"S")):2==c.length&&(c+="0S"))):(0<(0|u)&&(c+="".concat(0|u,":")),c+="".concat(padInt(0|i),":").concat(padInt(0|a),":"),0<l?(r=trimEnd(trimEnd(r=l.toFixed(7),"0"),"."),c+=10<=l?"".concat(r):"0".concat(r)):c+="00");return c}function toXsdDuration(e){return timeFmt(e,!0)}function toTimeSpanFmt(e){return timeFmt(e,!1)}function flatMap(r,e){return e.reduce(function(e,t){return e.concat(r(t))},[])}function uniq(e){return Array.from(new Set(e)).sort(function(e,t){return t<e?1:-1})}function enc(e){return null==e?null:"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):"".concat(e)}function htmlAttrs(t){var r=[];return Object.keys(t).forEach(function(e){0<r.length&&r.push(" "),r.push(e),r.push('="'),r.push(enc(t[e])),r.push('"')}),r.join("")}function indexOfAny(e,t){for(var r=0,n=t.length;r<n;r++){var o=e.indexOf(t[r]);if(0<=o)return o}return-1}function isNullOrEmpty(e){return null==e||""===e}function fromDateTime(e){return toDate(e)}function toDateTime(e){return"/Date(".concat(e.getTime(),")/")}function fromTimeSpan(e){return e}function toTimeSpan(e){return e}function fromGuid(e){return e}function toGuid(e){return e}function fromByteArray(e){for(var t=_atob(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n}function toByteArray(e){return _btoa(String.fromCharCode.apply(null,e))}function toBase64String(e){return JsonServiceClient.toBase64(e)}exports.NavOptions=NavOptions,exports.classNames=classNames,exports.fromXsdDuration=fromXsdDuration,exports.toXsdDuration=toXsdDuration,exports.toTimeSpanFmt=toTimeSpanFmt,exports.flatMap=flatMap,exports.uniq=uniq,exports.enc=enc,exports.htmlAttrs=htmlAttrs,exports.indexOfAny=indexOfAny,exports.isNullOrEmpty=isNullOrEmpty,exports.fromDateTime=fromDateTime,exports.toDateTime=toDateTime,exports.fromTimeSpan=fromTimeSpan,exports.toTimeSpan=toTimeSpan,exports.fromGuid=fromGuid,exports.toGuid=toGuid,exports.fromByteArray=fromByteArray,exports.toByteArray=toByteArray,exports.toBase64String=toBase64String;var StringBuffer=(Hp.prototype.set=function(e){this.buffer_=""+e},Hp.prototype.append=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(this.buffer_+=String(e),null!=t)for(var o=1;o<arguments.length;o++)this.buffer_+=arguments[o];return this},Hp.prototype.clear=function(){this.buffer_=""},Hp.prototype.getLength=function(){return this.buffer_.length},Hp.prototype.toString=function(){return this.buffer_},Hp);function Hp(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer_="",null!=e&&this.append.apply(this,arguments)}exports.StringBuffer=StringBuffer;var JSV=(Rp.encodeString=function(e){return null==e?null:""===e?'""':(e.indexOf('"')&&(e=e.replace(/"/g,'""')),0<=indexOfAny(e,Rp.ESCAPE_CHARS)?'"'+e+'"':e)},Rp.encodeArray=function(e){for(var t,r=new StringBuffer,n=0,o=e.length;n<o;n++)isNullOrEmpty(t=e[n])||"function"==typeof t||(0<r.getLength()&&r.append(","),r.append(Rp.stringify(t)));return"[".concat(r.toString(),"]")},Rp.encodeObject=function(e){var t,r=new StringBuffer;for(var n in e)t=e[n],e.hasOwnProperty(n)&&!isNullOrEmpty(t)&&"function"!=typeof t&&(0<r.getLength()&&r.append(","),r.append(Rp.encodeString(n)),r.append(":"),r.append(Rp.stringify(t)));return"{".concat(r.toString(),"}")},Rp.stringify=function(e){if(null==e)return null;var t=typeof e;if("function"==t||"symbol"==t)return null;if("object"==t){var r=e.constructor.toString().toLowerCase();return 0<=r.indexOf("string")?Rp.encodeString(e):0<=r.indexOf("boolean")?e?"true":"false":0<=r.indexOf("number")?e:0<=r.indexOf("date")?Rp.encodeString(toLocalISOString(e)):0<=r.indexOf("array")?Rp.encodeArray(e):Rp.encodeObject(e)}switch(t){case"string":return Rp.encodeString(e);case"boolean":return e?"true":"false";case"number":default:return e}},Rp.ESCAPE_CHARS=['"',":",",","{","}","[","]","\r","\n"],Rp);function Rp(){}function uniqueKeys(e){var t=[];return e.forEach(function(e){return Object.keys(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}),t}function alignLeft(e,t,r){return void 0===r&&(r=" "),t<0?"":t+1-e.length<=0?e:r+e+r.repeat(t+1-e.length)}function alignCenter(e,t,r){if(void 0===r&&(r=" "),t<0)return"";e||(e="");var n=e.length,o=Math.floor(t/2-n/2),s=Math.abs(n%2-t%2);return r.repeat(o+1)+e+r.repeat(o+1+s)}function alignRight(e,t,r){return void 0===r&&(r=" "),t<0?"":t+1-e.length<=0?e:r.repeat(t+1-e.length)+e+r}function alignAuto(e,t,r){void 0===r&&(r=" ");var n="".concat(e);return n.length<=t?"number"==typeof e?alignRight(n,t,r):alignLeft(n,t,r):n}function EventBus(){var n={};this.subscribe=function(e,t){var r=Symbol("id");return n[e]||(n[e]={}),n[e][r]=t,{unsubscribe:function(){delete n[e][r],0===Object.getOwnPropertySymbols(n[e]).length&&delete n[e]}}},this.publish=function(t,r){n[t]&&Object.getOwnPropertySymbols(n[t]).forEach(function(e){return n[t][e](r)})}}exports.JSV=JSV,exports.uniqueKeys=uniqueKeys,exports.alignLeft=alignLeft,exports.alignCenter=alignCenter,exports.alignRight=alignRight,exports.alignAuto=alignAuto,exports.EventBus=EventBus;var Inspect=(Gq.vars=function(e){var t=nodeRequire();if("function"==typeof t){var r=process.env.INSPECT_VARS;if(r&&e){var n=t("fs"),o=r.replace(/\\/g,"/");if(0<=o.indexOf("/")){var s=t("path").dirname(o);n.existsSync(s)||n.mkdirSync(s)}n.writeFileSync(o,JSON.stringify(e))}}},Gq.dump=function(e){return JSON.stringify(e,null,4).replace(/"/g,"")},Gq.printDump=function(e){console.log(Gq.dump(e))},Gq.dumpTable=function(e){var t=e,n=uniqueKeys(t),s={};n.forEach(function(n){var o=n.length;t.forEach(function(e){var t=e[n];if(null!=t){var r="".concat(t).length;o<r&&(o=r)}}),s[n]=o});var r=Object.keys(s).length,o=Object.keys(s).map(function(e){return s[e]}).reduce(function(e,t){return e+t},0)+2*r+(r+1),a=[];a.push("+".concat("-".repeat(o-2),"+"));var i="|";return n.forEach(function(e){return i+=alignCenter(e,s[e])+"|"}),a.push(i),a.push("|".concat("-".repeat(o-2),"|")),t.forEach(function(t){var r="|";n.forEach(function(e){return r+=alignAuto(t[e],s[e])+"|"}),a.push(r)}),a.push("+".concat("-".repeat(o-2),"+")),a.join("\n")},Gq.printDumpTable=function(e){console.log(Gq.dumpTable(e))},Gq);function Gq(){}exports.Inspect=Inspect});