var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,i,a,u){return new(a=a||Promise)(function(n,t){function r(e){try{s(u.next(e))}catch(e){t(e)}}function o(e){try{s(u.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?n(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(r,o)}s((u=u.apply(e,i||[])).next())})},__generator=this&&this.__generator||function(r,o){var s,i,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function e(n){return function(e){var t=[n,e];if(s)throw new TypeError("Generator is already executing.");for(;u=c&&t[c=0]?0:u;)try{if(s=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,i=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3]))u.label=t[1];else if(6===t[0]&&u.label<a[1])u.label=a[1],a=t;else{if(!(a&&u.label<a[2])){a[2]&&u.ops.pop(),u.trys.pop();continue}u.label=a[2],u.ops.push(t)}}t=o.call(r,u)}catch(e){t=[6,e],i=0}finally{s=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd?define(["require","exports"],e):"undefined"!=typeof window&&e(window.require||function(){},window["@servicestack/client"]={})}(function(P,t){"use strict";function A(e){Object.assign(this,e)}var F="object"==typeof module&&"object"==typeof module.exports,o=(Object.defineProperty(t,"__esModule",{value:!0}),t.Inspect=t.createBus=t.EventBus=t.alignAuto=t.alignRight=t.alignCenter=t.alignLeft=t.uniqueKeys=t.JSV=t.StringBuffer=t.toBase64String=t.toByteArray=t.fromByteArray=t.toGuid=t.fromGuid=t.toTimeSpan=t.fromTimeSpan=t.toDateTime=t.fromDateTime=t.isNullOrEmpty=t.indexOfAny=t.htmlAttrs=t.enc=t.uniq=t.flatMap=t.toTimeSpanFmt=t.toXsdDuration=t.fromXsdDuration=t.classNames=t.NavOptions=t.UserAttributes=t.LinkButtonDefaults=t.NavButtonGroupDefaults=t.NavbarDefaults=t.NavLinkDefaults=t.NavDefaults=t.btnClasses=t.btnSizeClass=t.BootstrapSizes=t.btnColorClass=t.BootstrapColors=t.activeClass=t.activeClassNav=t.apiValueFmt=t.apiValue=t.mapGet=t.resolve=t.each=t.apply=t.omit=t.pick=t.safeVarName=t.trimEnd=t.populateForm=t.triggerEvent=t.sanitizeFormData=t.serializeToFormData=t.serializeToUrlEncoded=t.serializeToObject=t.serializeForm=t.ajaxSubmit=t.formSubmit=t.toVarNames=t.bootstrapForm=t.bindHandlers=t.bootstrap=t.delaySet=t.on=t.$$=t.$1=t.createElement=t.padStart=t.msToTime=t.toTime=t.toLocalISOString=t.timeFmt12=t.dateFmtHM=t.dateFmt=t.padInt=t.toDateFmt=t.toDate=t.isDate=t.errorResponse=t.errorResponseExcept=t.errorResponseSummary=t.toObject=t.toFormData=t.parseResponseStatus=t.getField=t.normalize=t.normalizeKey=t.parseCookie=t.tryDecode=t.stripQuotes=t.bytesToBase64=t.setQueryString=t.appendQueryString=t.createUrl=t.createPath=t.combinePaths=t.queryString=t.humanify=t.splitTitleCase=t.isDigit=t.isLower=t.isUpper=t.ucFirst=t.humanize=t.onlyProps=t.chop=t.lastRightPart=t.lastLeftPart=t.rightPart=t.leftPart=t.splitOnLast=t.splitOnFirst=t.css=t.nameOf=t.sanitize=t.map=t.toKebabCase=t.toPascalCase=t.toCamelCase=t.createError=t.isFormData=t.createFieldError=t.createErrorStatus=t.ApiResult=t.getResponseStatus=t.getMethod=t.JsonApiClient=t.JsonServiceClient=t.GetAccessTokenResponse=t.HttpMethods=t.ServerEventUser=t.GetEventSubscribers=t.UpdateEventSubscriberResponse=t.UpdateEventSubscriber=t.ServerEventReceiver=t.getAllMembers=t.ServerEventsClient=t.ReadyState=t.SingletonInstanceResolver=t.NewInstanceResolver=t.MetadataType=t.MetadataPropertyType=t.MetadataAttribute=t.MetadataDataMember=t.MetadataDataContract=t.MetadataTypeName=t.MetadataTypes=t.MetadataOperationType=t.MetadataRoute=t.MetadataTypesConfig=t.GetNavItemsResponse=t.GetNavItems=t.NavItem=t.EmptyResponse=t.ErrorResponse=t.ResponseError=t.ResponseStatus=void 0,function(e){Object.assign(this,e)}),_=(t.ResponseStatus=o,function(e){Object.assign(this,e)}),B=(t.ResponseError=_,function(e){Object.assign(this,e)}),q=(t.ErrorResponse=B,function(e){Object.assign(this,e)}),e=(t.EmptyResponse=q,t.NavItem=A,H.prototype.createResponse=function(){return new Z},H.prototype.getTypeName=function(){return"GetNavItems"},H.prototype.getMethod=function(){return"GET"},H);function H(e){Object.assign(this,e)}t.GetNavItems=e;function G(e){Object.assign(this,e)}function z(e){Object.assign(this,e)}function J(e){Object.assign(this,e)}function V(e){Object.assign(this,e)}function W(e){Object.assign(this,e)}function $(e){Object.assign(this,e)}function K(e){Object.assign(this,e)}function Q(e){Object.assign(this,e)}function X(e){Object.assign(this,e)}function Y(e){Object.assign(this,e)}var Z=function(e){Object.assign(this,e)},ee=(t.GetNavItemsResponse=Z,t.MetadataTypesConfig=G,t.MetadataRoute=z,t.MetadataOperationType=J,t.MetadataTypes=V,t.MetadataTypeName=W,t.MetadataDataContract=$,t.MetadataDataMember=K,t.MetadataAttribute=Q,t.MetadataPropertyType=X,t.MetadataType=Y,te.prototype.tryResolve=function(e){return new e},te);function te(){}function ne(){}function re(e){switch(e){case"onConnect":return"ServerEventConnect";case"onHeartbeat":return"ServerEventHeartbeat";case"onJoin":return"ServerEventJoin";case"onLeave":return"ServerEventLeave";case"onUpdate":return"ServerEventUpdate"}return null}function n(e,t,n,r){void 0===n&&(n={}),void 0===r&&(r=null);var g=this;if(this.channels=t,this.options=n,this.eventSource=r,this.onMessage=function(e){if("undefined"==typeof document){var t,n,r,o=e.data?e.data.indexOf("\n"):-1;if(0<=o)return t=e.data,r=e.lastEventId,n=Object.assign({},{lastEventId:r,data:t.substring(0,o)}),r=Object.assign({},{lastEventId:r,data:t.substring(o+1)}),g._onMessage(n),void g._onMessage(r)}g._onMessage(e)},this._onMessage=function(e){if(!g.stopped){var t,o=g.options,n=(void 0===t&&(t={querySelectorAll:function(e){return[]}}),m(e.data," ")),r=null,s=n[0],i=m(s,"@"),i=(1<i.length&&(r=i[0],s=i[1]),n[1]),a=null;try{a=i?JSON.parse(i):null}catch(e){}if((n=m(s,".")).length<=1)throw"invalid selector format: "+s;var u=n[0],n=n[1].replace(new RegExp("%20","g")," "),c=m(n,"$"),l=c[0],f=c[1],p=f&&T(f),h=p&&p[0],e={eventId:parseInt(e.lastEventId),data:e.data,type:re(l)||"ServerEventMessage",channel:r,selector:s,json:i,body:a,op:u,target:c[0],cssSelector:f,meta:{}},r="object"==typeof a?Object.assign({},e,a):e;if(!o.validate||!1!==o.validate(e)){var d=new Headers;if(d.set("Content-Type","text/plain"),"cmd"===u)if("onConnect"===l){g.connectionInfo=r,"string"==typeof a.heartbeatIntervalMs&&(g.connectionInfo.heartbeatIntervalMs=parseInt(a.heartbeatIntervalMs)),"string"==typeof a.idleTimeoutMs&&(g.connectionInfo.idleTimeoutMs=parseInt(a.idleTimeoutMs)),Object.assign(o,a);var v=o.handlers.onConnect;if(v&&(v.call(h||t.body,g.connectionInfo,e),g.stopped))return;o.heartbeatUrl&&(o.heartbeat&&clearInterval(o.heartbeat),o.heartbeat=setInterval(function(){return __awaiter(g,void 0,void 0,function(){var t,n,r;return __generator(this,function(e){switch(e.label){case 0:if(this.eventSource.readyState===EventSource.CLOSED)return clearInterval(o.heartbeat),null!=(t=o.handlers.onStop)&&t.apply(this.eventSource),this.reconnectServerEvents({error:new Error("EventSource is CLOSED")}),[2];t=new Request(o.heartbeatUrl,{method:"POST",mode:"cors",headers:d,credentials:this.serviceClient.credentials}),e.label=1;case 1:return e.trys.push([1,6,,7]),[4,fetch(t)];case 2:return(n=e.sent()).ok?[3,3]:(r=new Error("".concat(n.status," - ").concat(n.statusText)),this.reconnectServerEvents({error:r}),[3,5]);case 3:return[4,n.text()];case 4:e.sent(),e.label=5;case 5:return[3,7];case 6:return r=e.sent(),this.reconnectServerEvents({error:r}),[3,7];case 7:return[2]}})})},g.connectionInfo&&g.connectionInfo.heartbeatIntervalMs||o.heartbeatIntervalMs||1e4)),o.unRegisterUrl&&"undefined"!=typeof window&&(window.onunload=function(){navigator.sendBeacon?(g.stopped=!0,g.eventSource&&g.eventSource.close(),navigator.sendBeacon(o.unRegisterUrl)):g.stop()}),g.updateSubscriberUrl=o.updateSubscriberUrl,g.updateChannels((o.channels||"").split(","))}else{s="onJoin"==l||"onLeave"==l||"onUpdate"==l;(v=o.handlers[l])?s?v.call(h||t.body,r):v.call(h||t.body,a,e):s||(i=o.receivers&&o.receivers.cmd,g.invokeReceiver(i,l,h,e,"cmd")),s&&(v=o.handlers.onCommand)&&v.call(h||t.body,r)}else"trigger"===u?g.raiseEvent(n,e):"css"===u&&Ce(p||T("body"),l,a);c=o.receivers&&o.receivers[u];g.invokeReceiver(c,l,h,e,u),re(l)||(v=o.handlers.onMessage)&&v.call(h||t.body,r),o.onTick&&o.onTick()}}},this.onError=function(e){var t;g.stopped||(e=e||event,null!=(t=g.options.onException)&&t.call(g.eventSource,e),g.options.onTick&&g.options.onTick())},0===this.channels.length)throw"at least 1 channel is required";this.resolver=this.options.resolver||new ee,this.eventStreamUri=v(e,"event-stream")+"?",this.updateChannels(t),this.serviceClient=new s(e),this.listeners={},this.withCredentials=!0,this.options.handlers||(this.options.handlers={})}function oe(e){var r=[];do{var t=Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e).map(function(e){return e.toString()})).sort().filter(function(e,t,n){return"constructor"!==e&&(0==t||e!==n[t-1])&&-1===r.indexOf(e)}),r=r.concat(t)}while((e=Object.getPrototypeOf(e))&&Object.getPrototypeOf(e));return r}function se(){}t.NewInstanceResolver=ee,ne.prototype.tryResolve=function(e){return e.instance||(e.instance=new e)},t.SingletonInstanceResolver=ne,(e=t.ReadyState||(t.ReadyState={}))[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED",n.prototype.getEventSourceOptions=function(){return{withCredentials:this.withCredentials}},n.prototype.reconnectServerEvents=function(t){var n,e,r,o=this;if(void 0===t&&(t={}),!this.stopped)return t.error&&this.onError(t.error),n=this.eventSource,e=t.url||this.eventStreamUri||n.url,null!=this.options.resolveStreamUrl&&(e=this.options.resolveStreamUrl(e)),(e=new(this.EventSource||EventSource)(e,this.getEventSourceOptions())).addEventListener("error",function(e){return(t.onerror||n.onerror||o.onError)(e)}),e.addEventListener("message",t.onmessage||n.onmessage||this.onMessage),null!=(r=this.options.onReconnect)&&r.call(e,t.error),n.removeEventListener&&(n.removeEventListener("error",this.onError),n.removeEventListener("message",this.onMessage)),n.close(),this.eventSource=e},n.prototype.start=function(){var e,t=this;return this.stopped=!1,null!=this.eventSource&&this.eventSource.readyState!==EventSource.CLOSED||(e=this.eventStreamUri,null!=this.options.resolveStreamUrl&&(e=this.options.resolveStreamUrl(e)),this.eventSource=new(this.EventSource||EventSource)(e,this.getEventSourceOptions()),this.eventSource.addEventListener("error",this.onError),this.eventSource.addEventListener("message",function(e){return t.onMessage(e)})),this},n.prototype.stop=function(){this.stopped=!0,this.eventSource&&this.eventSource.close();var e=this.options,e=(e&&e.heartbeat&&clearInterval(e.heartbeat),this.connectionInfo);return null==e||null==e.unRegisterUrl?new Promise(function(e,t){return e()}):(this.connectionInfo=null,fetch(new Request(e.unRegisterUrl,{method:"POST",mode:"cors",credentials:this.serviceClient.credentials})).then(function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText))}).catch(this.onError))},n.prototype.invokeReceiver=function(t,e,n,r,o){var s,i;t&&("function"==typeof t&&(t=this.resolver.tryResolve(t)),e=e.replace("-",""),t.client=this,t.request=r,"function"==typeof t[e]?t[e].call(n||t,r.body,r):e in t?t[e]=r.body:null!=(i=Object.getOwnPropertyDescriptor(t,e))?i.set?i.set(r.body):i.writable&&(t[e]=r.body):(s=e.toLowerCase(),oe(t).forEach(function(e){e.toLowerCase()==s&&("function"==typeof t[e]?t[e].call(n||t,r.body,r):t[e]=r.body)}),"function"==typeof(i=t.noSuchMethod)&&i.call(n||t,r.target,r)))},n.prototype.hasConnected=function(){return null!=this.connectionInfo},n.prototype.registerHandler=function(e,t){return this.options.handlers||(this.options.handlers={}),this.options.handlers[e]=t,this},n.prototype.setResolver=function(e){return this.options.resolver=e,this},n.prototype.registerReceiver=function(e){return this.registerNamedReceiver("cmd",e)},n.prototype.registerNamedReceiver=function(e,t){return this.options.receivers||(this.options.receivers={}),this.options.receivers[e]=t,this},n.prototype.unregisterReceiver=function(e){return void 0===e&&(e="cmd"),this.options.receivers&&delete this.options.receivers[e],this},n.prototype.updateChannels=function(e){this.channels=e;var t=null!=this.eventSource?this.eventSource.url:this.eventStreamUri;this.eventStreamUri=t.substring(0,Math.min(t.indexOf("?"),t.length))+"?channels="+e.join(",")+"&t="+(new Date).getTime()},n.prototype.update=function(e,t){var n="string"==typeof e?e.split(","):e,r="string"==typeof t?t.split(","):t,o=[];for(i in this.channels){var s=this.channels[i];null!=r&&-1!==r.indexOf(s)||o.push(s)}if(n)for(var i in n){s=n[i];-1===o.indexOf(s)&&o.push(s)}this.updateChannels(o)},n.prototype.addListener=function(e,t){return(this.listeners[e]||(this.listeners[e]=[])).push(t),this},n.prototype.removeListener=function(e,t){e=this.listeners[e];return e&&0<=(t=e.indexOf(t))&&e.splice(t,1),this},n.prototype.raiseEvent=function(e,t){var n=this,e=this.listeners[e];e&&e.forEach(function(e){try{e(t)}catch(e){n.onError(e)}})},n.prototype.getConnectionInfo=function(){if(null==this.connectionInfo)throw"Not Connected";return this.connectionInfo},n.prototype.getSubscriptionId=function(){return this.getConnectionInfo().id},n.prototype.updateSubscriber=function(t){var n=this;return null==t.id&&(t.id=this.getSubscriptionId()),this.serviceClient.post(t).then(function(e){n.update(t.subscribeChannels,t.unsubscribeChannels)}).catch(this.onError)},n.prototype.subscribeToChannels=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=new ie;return r.id=this.getSubscriptionId(),r.subscribeChannels=n,this.serviceClient.post(r).then(function(e){t.update(n,null)}).catch(this.onError)},n.prototype.unsubscribeFromChannels=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=new ie;return r.id=this.getSubscriptionId(),r.unsubscribeChannels=n,this.serviceClient.post(r).then(function(e){t.update(null,n)}).catch(this.onError)},n.prototype.getChannelSubscribers=function(){var t=this,e=new ce;return e.channels=this.channels,this.serviceClient.get(e).then(function(e){return e.map(function(e){return t.toServerEventUser(e)})}).catch(function(e){return t.onError(e),[]})},n.prototype.toServerEventUser=function(e){var t,n=e.channels,r=new fe;for(t in r.userId=e.userId,r.displayName=e.displayName,r.profileUrl=e.profileUrl,r.channels=n?n.split(","):null,e)"userId"!=t&&"displayName"!=t&&"profileUrl"!=t&&"channels"!=t&&(null==r.meta&&(r.meta={}),r.meta[t]=e[t]);return r},n.UnknownChannel="*",t.ServerEventsClient=n,t.getAllMembers=oe,se.prototype.noSuchMethod=function(e,t){},t.ServerEventReceiver=se;ae.prototype.createResponse=function(){return new ue},ae.prototype.getTypeName=function(){return"UpdateEventSubscriber"};var ie=ae;function ae(){}t.UpdateEventSubscriber=ie;var ue=function(){},ce=(t.UpdateEventSubscriberResponse=ue,le.prototype.createResponse=function(){return[]},le.prototype.getTypeName=function(){return"GetEventSubscribers"},le);function le(){}t.GetEventSubscribers=ce;var fe=function(){},a=(t.ServerEventUser=fe,r.Get="GET",r.Post="POST",r.Put="PUT",r.Delete="DELETE",r.Patch="PATCH",r.Head="HEAD",r.Options="OPTIONS",r.hasRequestBody=function(e){return!("GET"===e||"DELETE"===e||"HEAD"===e||"OPTIONS"===e)},r);function r(){}t.HttpMethods=a;he.prototype.createResponse=function(){return new de},he.prototype.getTypeName=function(){return"GetAccessToken"},he.prototype.getMethod=function(){return"POST"};var pe=he;function he(e){Object.assign(this,e)}var de=function(){},s=(t.GetAccessTokenResponse=de,u.prototype.setCredentials=function(e,t){this.userName=e,this.password=t},u.prototype.useBasePath=function(e){return this.basePath=e,this},Object.defineProperty(u.prototype,"basePath",{set:function(e){e?("/"!=e[0]&&(e="/"+e),this.replyBaseUrl=v(this.baseUrl,e)+"/",this.oneWayBaseUrl=v(this.baseUrl,e)+"/"):(this.replyBaseUrl=v(this.baseUrl,"json","reply")+"/",this.oneWayBaseUrl=v(this.baseUrl,"json","oneway")+"/")},enumerable:!1,configurable:!0}),u.prototype.apply=function(e){return e(this),this},u.prototype.get=function(e,t){return"string"!=typeof e?this.fetch(a.Get,e,t):this.fetch(a.Get,null,t,this.toAbsoluteUrl(e))},u.prototype.delete=function(e,t){return"string"!=typeof e?this.fetch(a.Delete,e,t):this.fetch(a.Delete,null,t,this.toAbsoluteUrl(e))},u.prototype.post=function(e,t){return this.fetch(a.Post,e,t)},u.prototype.postToUrl=function(e,t,n){return this.fetch(a.Post,t,n,this.toAbsoluteUrl(e))},u.prototype.postBody=function(e,t,n){return this.fetchBody(a.Post,e,t,n)},u.prototype.put=function(e,t){return this.fetch(a.Put,e,t)},u.prototype.putToUrl=function(e,t,n){return this.fetch(a.Put,t,n,this.toAbsoluteUrl(e))},u.prototype.putBody=function(e,t,n){return this.fetchBody(a.Put,e,t,n)},u.prototype.patch=function(e,t){return this.fetch(a.Patch,e,t)},u.prototype.patchToUrl=function(e,t,n){return this.fetch(a.Patch,t,n,this.toAbsoluteUrl(e))},u.prototype.patchBody=function(e,t,n){return this.fetchBody(a.Patch,e,t,n)},u.prototype.publish=function(e,t){return this.sendOneWay(e,t)},u.prototype.sendOneWay=function(e,t){var n=v(this.oneWayBaseUrl,h(e));return this.fetch(a.Post,e,null,n)},u.prototype.sendAll=function(e){var t;return 0==e.length?Promise.resolve([]):(t=v(this.replyBaseUrl,h(e[0])+"[]"),this.fetch(a.Post,e,null,t))},u.prototype.sendAllOneWay=function(e){var t;return 0==e.length?Promise.resolve(void 0):(t=v(this.oneWayBaseUrl,h(e[0])+"[]"),this.fetch(a.Post,e,null,t).then(function(e){}))},u.prototype.createUrlFromDto=function(e,t){var n=v(this.replyBaseUrl,h(t));return n=a.hasRequestBody(e)?n:g(n,t)},u.prototype.toAbsoluteUrl=function(e){return e.startsWith("http://")||e.startsWith("https://")?e:v(this.baseUrl,e)},u.prototype.deleteCookie=function(e){this.manageCookies?delete this.cookies[e]:document&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")},u.prototype.createRequest=function(e){var t=this,n=e.method,r=e.request,o=e.url,s=e.args,e=e.body,o=o||this.createUrlFromDto(n,r),s=(s&&(o=g(o,s)),null!=this.bearerToken?this.headers.set("Authorization","Bearer "+this.bearerToken):null!=this.userName&&this.headers.set("Authorization","Basic "+u.toBase64("".concat(this.userName,":").concat(this.password))),this.manageCookies&&(0<(s=Object.keys(this.cookies).map(function(e){e=t.cookies[e];return e.expires&&e.expires<new Date?null:"".concat(e.name,"=").concat(encodeURIComponent(e.value))}).filter(function(e){return!!e})).length?this.headers.set("Cookie",s.join("; ")):this.headers.delete("Cookie")),new Headers(this.headers)),i=a.hasRequestBody(n),o={url:o,method:n,mode:this.mode,credentials:this.credentials,headers:s,compress:!1};return i&&(o.body=e||JSON.stringify(r),me(e))&&(o.body=rt(e),s.delete("Content-Type")),null!=this.requestFilter&&this.requestFilter(o),null!=u.globalRequestFilter&&u.globalRequestFilter(o),o},u.prototype.json=function(e){return this.parseJson?this.parseJson(e):e.text().then(function(e){return 0<e.length?JSON.parse(e):null})},u.prototype.applyResponseFilters=function(e){null!=this.responseFilter&&this.responseFilter(e),null!=u.globalResponseFilter&&u.globalResponseFilter(e)},u.prototype.createResponse=function(e,t){var n,r=this;if(!e.ok)throw this.applyResponseFilters(e),e;this.manageCookies&&(n=[],e.headers.forEach(function(e,t){"set-cookie"===t.toLowerCase()&&e.split(",").forEach(function(e){return n.push(e)})}),n.forEach(function(e){e=je(e);e&&(r.cookies[e.name]=e)})),e.headers.forEach(function(e,t){"x-cookies"===t.toLowerCase()&&0<=e.split(",").indexOf("ss-reftok")&&(r.useTokenCookie=!0)}),this.applyResponseFilters(e);var o=t&&"string"!=typeof t&&"function"==typeof t.createResponse?t.createResponse():null;if("string"==typeof o)return e.text().then(function(e){return e});t=e.headers.get("content-type"),t=t&&-1!==t.indexOf("application/json");if(t)return this.json(e).then(function(e){return e});if("undefined"!=typeof Uint8Array&&o instanceof Uint8Array){if("function"!=typeof e.arrayBuffer)throw new Error("This fetch polyfill does not implement 'arrayBuffer'");return e.arrayBuffer().then(function(e){return new Uint8Array(e)})}if("function"==typeof Blob&&o instanceof Blob){if("function"!=typeof e.blob)throw new Error("This fetch polyfill does not implement 'blob'");return e.blob().then(function(e){return e})}var s=e.headers.get("content-length");return"0"===s||null==s&&!t?e.text().then(function(e){return o}):this.json(e).then(function(e){return e})},u.prototype.handleError=function(e,n,t){var r=this;if(void 0===t&&(t=null),n instanceof Error)throw this.raiseError(e,n);if(n.bodyUsed)throw this.raiseError(n,ye(n.status,n.statusText,t));return void 0===n.json&&n.responseStatus?new Promise(function(e,t){return t(r.raiseError(null,n))}):this.json(n).then(function(e){e=C(e);if(e.responseStatus)throw null!=t&&(e.type=t),e;throw ye(n.status,n.statusText,t)}).catch(function(e){if(e instanceof Error||"undefined"!=typeof window&&e instanceof window.DOMException)throw r.raiseError(n,ye(n.status,n.statusText,t));throw r.raiseError(n,e)})},u.prototype.fetch=function(e,t,n,r){return this.sendRequest({method:e,request:t,args:n,url:r})},u.prototype.fetchBody=function(e,t,n,r){var o=v(this.replyBaseUrl,h(t));return this.sendRequest({method:e,request:n,body:"string"==typeof n||me(n)?n:JSON.stringify(n),url:g(o,t),args:r,returns:t})},u.prototype.sendRequest=function(t){function o(){var e=s.createRequest(t);return s.urlFilter&&s.urlFilter(e.url),fetch(e.url,e).then(function(e){return s.createResponse(e,n)}).catch(function(e){return s.handleError(i,e)})}var s=this,e=this.createRequest(t),n=t.returns||t.request,i=null;return this.urlFilter&&this.urlFilter(e.url),fetch(e.url,e).then(function(e){return i=e,s.createResponse(e,n)}).catch(function(e){if(401===e.status){var t,n,r;if(s.enableAutoRefreshToken&&(s.refreshToken||s.useTokenCookie||null!=s.cookies["ss-reftok"]))return t=new pe({refreshToken:s.refreshToken,useTokenCookie:!!s.useTokenCookie}),n=s.refreshTokenUri||s.createUrlFromDto(a.Post,t),s.useTokenCookie&&(s.bearerToken=null,s.headers.delete("Authorization")),r=s.createRequest({method:a.Post,request:t,args:null,url:n}),fetch(n,r).then(function(e){return s.createResponse(e,t).then(function(e){return s.bearerToken=e.accessToken||null,o()})}).catch(function(e){return s.onAuthenticationRequired?s.onAuthenticationRequired().then(o).catch(function(e){return s.handleError(i,e,"RefreshTokenException")}):s.handleError(i,e,"RefreshTokenException")});if(s.onAuthenticationRequired)return s.onAuthenticationRequired().then(o)}return s.handleError(i,e)})},u.prototype.raiseError=function(e,t){return null!=this.exceptionFilter&&this.exceptionFilter(e,t),t},u.prototype.send=function(e,t,n){return this.sendRequest({method:i(e),request:e,args:t,url:n})},u.prototype.sendVoid=function(e,t,n){return this.sendRequest({method:i(e),request:e,args:t,url:n})},u.prototype.api=function(n,r,o){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetch(i(n,o),n,r)];case 1:return t=e.sent(),[2,new l({response:t})];case 2:return t=e.sent(),[2,new l({error:c(t)})];case 3:return[2]}})})},u.prototype.apiVoid=function(n,r,o){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetch(i(n,o),n,r)];case 1:return t=e.sent(),[2,new l({response:null!=t?t:new q})];case 2:return t=e.sent(),[2,new l({error:c(t)})];case 3:return[2]}})})},u.prototype.apiForm=function(n,r,o,s){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetchBody(i(n,s),n,r,o)];case 1:return t=e.sent(),[2,new l({response:t})];case 2:return t=e.sent(),[2,new l({error:c(t)})];case 3:return[2]}})})},u.prototype.apiFormVoid=function(n,r,o,s){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetchBody(i(n,s),n,r,o)];case 1:return t=e.sent(),[2,new l({response:null!=t?t:new q})];case 2:return t=e.sent(),[2,new l({error:c(t)})];case 3:return[2]}})})},u);function u(e){this.baseUrl=e=void 0===e?"/":e,this.replyBaseUrl=v(e,"json","reply")+"/",this.oneWayBaseUrl=v(e,"json","oneway")+"/",this.mode="cors",this.credentials="include",this.headers=new Headers,this.headers.set("Content-Type","application/json"),this.manageCookies="undefined"==typeof document,this.cookies={},this.enableAutoRefreshToken=!0}function ve(){}function i(e,t){return(null!=t?t:"function"==typeof e.getMethod)?e.getMethod():a.Post}function c(e){var t;return null!=(t=null!=(t=e.responseStatus)?t:e.ResponseStatus)?t:e.errorCode?e:e.message?ge(e.message,e.errorCode):null}t.JsonServiceClient=s,ve.create=function(e,t){return new s(e=void 0===e?"/":e).apply(function(e){e.basePath="/api",e.headers=new Headers,t&&t(e)})},t.JsonApiClient=ve,t.getMethod=i,t.getResponseStatus=c;Object.defineProperty(f.prototype,"completed",{get:function(){return null!=this.response||null!=this.error},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"failed",{get:function(){var e;return null!=(null==(e=this.error)?void 0:e.errorCode)||null!=(null==(e=this.error)?void 0:e.message)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"succeeded",{get:function(){return!this.failed&&null!=this.response},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"errorMessage",{get:function(){var e;return null==(e=this.error)?void 0:e.message},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"errorCode",{get:function(){var e;return null==(e=this.error)?void 0:e.errorCode},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"errors",{get:function(){var e;return null!=(e=null==(e=this.error)?void 0:e.errors)?e:[]},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"errorSummary",{get:function(){return null!=this.error&&0==this.errors.length?this.errorMessage:null},enumerable:!1,configurable:!0}),f.prototype.fieldError=function(e){var t=e.toLowerCase();return null==(e=this.errors)?void 0:e.find(function(e){return e.fieldName.toLowerCase()==t})},f.prototype.fieldErrorMessage=function(e){return null==(e=this.fieldError(e))?void 0:e.message},f.prototype.hasFieldError=function(e){return null!=this.fieldError(e)},f.prototype.showSummary=function(e){var t=this;return void 0===e&&(e=[]),!!this.failed&&e.every(function(e){return!t.hasFieldError(e)})},f.prototype.summaryMessage=function(e){var t;if(this.showSummary(e=void 0===e?[]:e))return null!=(e=(t=e.map(function(e){return e.toLowerCase()})).find(function(e){return-1==t.indexOf(e.toLowerCase())}))?e:this.errorMessage},f.prototype.addFieldError=function(e,t,n){void 0===n&&(n="Exception"),this.error||(this.error=new o);var r=this.fieldError(e);null!=r?(r.errorCode=n,r.message=t):this.error.errors.push(new _({fieldName:e,errorCode:n,message:t}))};var l=f;function f(e){Object.assign(this,e)}function ge(e,t){return new o({errorCode:t=void 0===t?"Exception":t,message:e})}function me(e){return"undefined"!=typeof window&&e instanceof FormData}function ye(t,n,r){return void 0===r&&(r=null),it(new B,function(e){null!=r&&(e.type=r),e.responseStatus=it(new o,function(e){e.errorCode=t&&t.toString(),e.message=n})})}function p(e){return e&&e.charAt(0).toLowerCase()+e.substring(1)}function be(e){return e&&e.charAt(0).toUpperCase()+e.substring(1)}function C(e){if(e.responseStatus)return e;if(e.errors)return e;var t={};for(o in e)e.hasOwnProperty(o)&&(e[o]instanceof Object?t[p(o)]=C(e[o]):t[p(o)]=e[o]);if(t.errors=[],null!=e.Errors)for(var n=0,r=e.Errors.length;n<r;n++){var o,s=e.Errors[n],i={};for(o in s)i[p(o)]=s[o];t.errors.push(i)}return t}function h(e){if(!e)return"null";if("function"==typeof e.getTypeName)return e.getTypeName();var t=e&&e.constructor;if(null==t)throw"".concat(e," doesn't have constructor");return t.name||(e=t.toString()).substring(9,e.indexOf("("))}function Ce(e,t,n){for(var r="string"==typeof e?document.querySelectorAll(e):e,o=0;o<r.length;o++){var s=r[o];null!=s&&null!=s.style&&(s.style[t]=n)}}function m(e,t){return e&&0<=(t=e.indexOf(t))?[e.substring(0,t),e.substring(t+1)]:[e]}function we(e,t){return null==e?null:-1==(t=e.indexOf(t))?e:e.substring(0,t)}function Se(e,t){var n;return null==e?null:-1==(n=e.indexOf(t))?e:e.substring(n+t.length)}function Ee(e){return"string"!=typeof e?e:e.replace(/([A-Z]|[0-9]+)/g," $1").replace(/_/g," ").trim()}t.ApiResult=l,t.createErrorStatus=ge,t.createFieldError=function(e,t,n){return new o({errors:[new _({fieldName:e,errorCode:n=void 0===n?"Exception":n,message:t})]})},t.isFormData=me,t.createError=function(e,t,n){return new B({responseStatus:new o({errorCode:e,message:t,errors:n?[new _({errorCode:e,message:t,fieldName:n})]:void 0})})},t.toCamelCase=p,t.toPascalCase=be,t.toKebabCase=function(e){return(e||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},t.map=function(e,t){return null==e?null:t(e)},t.sanitize=C,t.nameOf=h,t.css=Ce,t.splitOnFirst=m,t.splitOnLast=function(e,t){return e&&0<=(t=e.lastIndexOf(t))?[e.substring(0,t),e.substring(t+1)]:[e]},t.leftPart=we,t.rightPart=Se,t.lastLeftPart=function(e,t){return null==e?null:-1==(t=e.lastIndexOf(t))?e:e.substring(0,t)},t.lastRightPart=function(e,t){var n;return null==e?null:-1==(n=e.lastIndexOf(t))?e:e.substring(n+t.length)},t.chop=function(e,t){return void 0===t&&(t=1),t=Math.abs(t),e&&(t<e.length?e.substring(0,e.length-t):"")},t.onlyProps=function(t,e){var n={};return e.forEach(function(e){return n[e]=t[e]}),n},t.humanize=function(e){return!e||0<=e.indexOf(" ")?e:Ee(be(e))};function Oe(e){return(0,t.isUpper)(e)||(0,t.isDigit)(e)}var d;t.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},t.isUpper=function(e){return"A"<=e&&e<="Z"},t.isLower=function(e){return"a"<=e&&e<="z"},t.isDigit=function(e){return"0"<=e&&e<="9"};function Te(e){var t=[];if("string"!=typeof e)return t;for(var n=0,r=0;r<e.length;r++){var o=e[r],s=0<r?e[r-1]:null,i=r+1<e.length?e[r+1]:null;!Oe(o)||Oe(s)&&Oe(i)||(t.push(e.substring(n,r)),n=r)}return t.push(e.substring(n,e.length)),t.filter(function(e){return!!e})}function ke(e){if(!e||-1===e.indexOf("?"))return{};for(var t=Se(e,"?").split("&"),n={},r=0;r<t.length;++r){var o=t[r].split("=");n[o[0]]=1<o.length?decodeURIComponent(o[1].replace(/\+/g," ")):null}return n}function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0,o=e.length;r<o;r++)var s=e[r],n=-1===s.indexOf("://")?n.concat(s.split("/")):n.concat(s.lastIndexOf("/")===s.length-1?s.substring(0,s.length-1):s);var i=[];for(r=0,o=n.length;r<o;r++){var a=n[r];a&&"."!==a&&(".."===a?i.pop():i.push(a))}return""===n[0]&&i.unshift(""),i.join("/")||(i.length?"/":".")}function Ne(e,t){var n,r={};for(n in t)r[n.toLowerCase()]=n;for(var o=e.split("/"),s="",i=0;i<o.length;i++){var a,u=o[i];"{"===(u=null==u?"":u)[0]&&"}"===u[u.length-1]&&(a=r[u.substring(1,u.length-1).toLowerCase()])&&(u=t[a],delete t[a]),0<s.length&&(s+="/"),s+=u}return s}function g(e,t){for(var n in t){var r;t.hasOwnProperty(n)&&void 0!==(r=t[n])&&(e=(e+=0<=e.indexOf("?")?"&":"?")+n+(null===r?"":"="+(null==(n=r)?"":"undefined"!=typeof Uint8Array&&n instanceof Uint8Array?Re(n):encodeURIComponent(n)||"")))}return e}function Re(e){for(var t,n=(3-e.length%3)%3,r="",o=e.length,s=0,i=0;i<o;i++)s|=e[i]<<(16>>>(t=i%3)&24),2!=t&&e.length-i!=1||(r+=String.fromCharCode(Me(s>>>18&63),Me(s>>>12&63),Me(s>>>6&63),Me(63&s)),s=0);return 0==n?r:r.substring(0,r.length-n)+(1==n?"=":"==")}function Me(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function xe(e){return"function"==typeof btoa?btoa(e):Buffer.from(e).toString("base64")}function Le(e){return e&&'"'==e[0]&&'"'==e[e.length]?e.slice(1,-1):e}function Ie(t){try{return decodeURIComponent(t)}catch(e){return t}}function je(e){if(!e)return null;for(var t=null,n=e.split(/; */),r=0;r<n.length;r++){var o,s=m(n[r],"="),i=s[0].trim(),s=1<s.length?Ie(Le(s[1].trim())):null;0==r?t={name:i,value:s,path:"/"}:"httponly"==(o=i.toLowerCase())?t.httpOnly=!0:"secure"==o?t.secure=!0:"expires"==o?(t.expires=new Date(s),"Invalid Date"===t.expires.toString()&&(t.expires=new Date(s.replace(/-/g," ")))):t[i]=s}return t}function De(e){return e.toLowerCase().replace(/_/g,"")}function Ue(e){return"[object Array]"===Object.prototype.toString.call(e)}function Pe(){var e=this.responseStatus||this.ResponseStatus;return null==e||(e=e.ErrorCode?C(e):e).errors&&0!=e.errors.length?void 0:e.message||e.errorCode}function Ae(e){var t=this.responseStatus||this.ResponseStatus;if(null!=t){t=t.ErrorCode?C(t):t,e=Qe(e);if(e&&null!=t.errors&&0!=t.errors.length){for(var n=e.map(function(e){return(e||"").toLowerCase()}),r=0,o=t.errors;r<o.length;r++){var s=o[r];if(-1!==n.indexOf((s.fieldName||"").toLowerCase()))return}for(var i=0,a=t.errors;i<a.length;i++){s=a[i];if(-1===n.indexOf((s.fieldName||"").toLowerCase()))return s.message||s.errorCode}}return t.message||t.errorCode||void 0}}function Fe(e){return e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)}function y(e){return e?Fe(e)?e:"/"==e[0]?new Date(parseFloat(/Date\(([^)]+)\)/.exec(e)[1])):new Date(e):null}function b(e){return e<10?"0"+e:e}function _e(e){return(e=void 0===e?new Date:e).getFullYear()+"/"+b(e.getMonth()+1)+"/"+b(e.getDate())}function Be(e){return void 0===e&&(e=new Date),"".concat(e.getFullYear(),"-").concat(b(e.getMonth()+1),"-").concat(b(e.getDate()),"T").concat(b(e.getHours()),":").concat(b(e.getMinutes()),":").concat(b(e.getSeconds()))}function qe(e){var t=e%1e3,n=(e=(e-t)/1e3)%60,r=(e=(e-n)/60)%60,e=b((e-r)/60)+":"+b(r)+":"+b(n);return 0<t?e+"."+He("".concat(t),3,"0").substring(0,3):e}function He(e,t,n){if((t=Math.floor(t)||0)<e.length)return e;n=n?String(n):" ";for(var r="",o=t-e.length,s=0;r.length<o;)r+=n[s=n[s]?s:0],s++;return r+e.slice(0)}function Ge(e){return'<div class="alert alert-danger">'+e+"</div>"}function w(e,t){return e.getAttribute(t)}function ze(e,t,n){e.setAttribute(t,n)}function Je(e,t){e.removeAttribute(t)}function Ve(e,t,n){var r={className:"class",htmlFor:"for"},o=document.createElement(e);if(n)for(var s in n)ze(o,r[s]||s,n[s]);return t&&t.insertAfter&&t.insertAfter.parentNode.insertBefore(o,t.insertAfter.nextSibling),o}function We(){var e,t,n,r=w(this,"data-invalid");r&&(e=(n="checkbox"===this.type||"radio"===this.type||S(this,"form-check"))?function(e,t){for(;null!=e&&!S(e,t);)e=e.parentElement;return e}(this,"form-check"):null,n?E(e||this.parentElement,"is-invalid form-control"):E(this,"is-invalid"),(null!=(n=!(t=this.nextElementSibling)||w(t,"for")!==this.id&&"SMALL"!==t.tagName?this:n?e||t.parentElement:t)&&n.nextElementSibling&&S(n.nextElementSibling,"invalid-feedback")?n.nextElementSibling:Ve("div",{insertAfter:n},{className:"invalid-feedback"})).innerHTML=r)}function S(e,t){return!!e&&(e.classList?e.classList.contains(t):-1<(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(" "+t+" "))}function E(e,t){var n;e&&(e.classList?(n=e.classList).add.apply(n,t.split(" ")):S(e,t)||(e.className=(e.className+" "+t).trim()))}function O(e,t){return e?e.classList?e.classList.remove(t):S(e,t)?e.className=e.className.replace(/(\s|^)someclass(\s|$)/," "):null:null}function T(e,t){return"string"==typeof e?Array.prototype.slice.call((t||document).querySelectorAll(e)):Array.isArray(e)?e:[e]}function $e(s,e,i){(e=void 0===e?document:e).addEventListener(i,function(e){var t,n,r="data-".concat(i),e=e.target,o=w(e,r);o||(t=e.closest("[".concat(r,"]")))&&(o=w(t,r),e=t),o&&(0<=(r=o.indexOf(":"))?(t=o.substring(0,r),r=o.substring(r+1),(n=s[t])&&n.apply(e,r.split(","))):(n=s[o])&&n.apply(e,[].slice.call(arguments)))})}function Ke(e){O(e,"has-errors"),T(".error-summary").forEach(function(e){e.innerHTML="",e.style.display="none"}),T("[data-validation-summary]").forEach(function(e){e.innerHTML=""}),T(".error").forEach(function(e){return O(e,"error")}),T(".form-check.is-invalid [data-invalid]").forEach(function(e){Je(e,"data-invalid")}),T(".form-check.is-invalid").forEach(function(e){return O(e,"form-control")}),T(".is-invalid").forEach(function(e){O(e,"is-invalid"),Je(e,"data-invalid")}),T(".is-valid").forEach(function(e){return O(e,"is-valid")})}function Qe(e){return e?Ue(e)?e:e.split(",").map(function(e){return e.trim()}):[]}function Xe(s){void 0===s&&(s={});var e,i=this,t=w(i,"enctype")||d.UrlEncoded;if(t==d.MultiPart&&void 0===window.FormData)throw new Error("FormData Type is needed to send '".concat(d.MultiPart,"' Content Types"));try{e=Ze(i,t)}catch(e){throw new Error("".concat(e.message||e))}var n=new Headers,t=(n.set("Accept",d.Json),n.set("Content-Type",t),{method:w(i,"method")||"POST",credentials:"include",mode:"cors",headers:n,body:e});return s.requestFilter&&s.requestFilter(t),fetch(new Request(s.url||w(i,"action"),t)).catch(function(e){throw new Error("Network is unreachable (".concat(e.message||e,")"))}).then(function(t){var e,n,r,o;return s.responseFilter&&s.responseFilter(t),t.ok?(o=i,(e=(n=t).headers.get("X-Location"))&&(location.href=e),(e=n.headers.get("X-Trigger"))&&(n=e.indexOf(":"),r=0<=n?e.substring(0,n):e,e=0<=n?e.substring(n+1):null,ot(o,r,e?[e]:[])),!(o=(o=(n=t).headers.get("content-type"))&&-1!==o.indexOf(d.Json))&&("0"===(r=n.headers.get("content-length"))||null==r&&!o)?null:n.json()):t.json().catch(function(e){throw new Error("The request failed with "+(t.statusText||t.status))}).then(function(e){throw Object.assign(new B,C(e))})})}function Ye(m,y){var b="bootstrap-v4"===(y=void 0===y?{}:y).type;Ke(m);try{if(y.validate&&!1===y.validate.call(m))return!1}catch(e){return!1}E(m,"loading");var e=null==y.onSubmitDisable?"[type=submit]":y.onSubmitDisable,t=null!=e&&""!=e;function n(e,t){if(t=void 0===t?null:t){var n=m,r=t.ResponseStatus||t.responseStatus,o=__assign({},y),s={overrideMessages:!1,messages:{NotEmpty:"Required",NotNull:"Required",Email:"Invalid email",AlreadyExists:"Already exists"},errorFilter:function(e,t,n){return this.overrideMessages?this.messages[t]||e||Ee(t):e||Ee(t)}};if(Ke(n),r){r=C(r),E(n,"has-errors");var i=o&&"bootstrap-v4"===o.type,n=__assign(__assign({},s),o),a=(o.messages&&(n.overrideMessages=!0),n.errorFilter.bind(n)),s=r.errors;if(s&&s.length){var u={},c={};T("input,textarea,select,button").forEach(function(e){var t=e.previousElementSibling,n=e.nextElementSibling,r=("radio"===e.type||"checkbox"===e.type?null:e.id)||w(e,"name");r&&(r=r.toLowerCase(),u[r]=e,i||(S(t,"help-inline")||S(t,"help-block")?c[r]=t:(S(n,"help-inline")||S(n,"help-block"))&&(c[r]=n)))}),T(".help-inline[data-for],.help-block[data-for]").forEach(function(e){var t=w(e,"data-for").toLowerCase();c[t]=e});for(var l=0,f=s;l<f.length;l++){var p=f[l],h=(p.fieldName||"").toLowerCase(),d=u[h],v=(d&&(i?("radio"!==(v=w(d,"type"))&&"checkbox"!==v&&E(d,"is-invalid"),ze(d,"data-invalid",a(p.message,p.errorCode,"field"))):(E(d,"error"),E(d.parentElement,"has-error"))),c[h]);v&&(E(v,"error"),v.innerHTML=a(p.message,p.errorCode,"field"),v.style.display="block")}T("[data-validation-summary]").forEach(function(e){var t=w(e,"data-validation-summary").split(","),t=Ae.call(r,t);t&&(e.innerHTML=Ge(t))})}else{var g=a(r.message||Ee(r.errorCode),r.errorCode,"summary");i?T("[data-validation-summary]").forEach(function(e){return e.innerHTML="<"===g[0]?g:Ge(g)}):T(".error-summary").forEach(function(e){e.innerHTML=g(e).style.display="block"})}}}else e&&(E(m,"has-errors"),(o=T(".error-summary")[0])&&(o.innerHTML=e),b)&&(n=T("[data-validation-summary]")[0])&&(n.innerHTML=Ge(e));y.error&&y.error.call(m,t),b&&T("[data-invalid]").forEach(function(e){return We.call(e)})}return t&&T(e).forEach(function(e){ze(e,"disabled","disabled")}),(y.submit||Xe).call(m,y).then(function(e){return y.success&&y.success.call(m,e),!1}).catch(function(e){e.responseStatus?n(null,e):n("".concat(e.message||e),null)}).finally(function(){O(m,"loading"),t&&T(e).forEach(function(e){Je(e,"disabled")}),y.complete&&y.complete.call(m)})}function Ze(e,t){return(t=void 0===t?null:t)===d.MultiPart?new FormData(e):t==d.Json?JSON.stringify(tt(e)):nt(e)}function et(e,t,n){for(var r,o=e,s=o.elements.length,i=0;i<s;i++)if((r=o.elements[i]).name&&!r.disabled&&"file"!=r.type&&"reset"!=r.type&&"submit"!=r.type&&"button"!=r.type)if("select-multiple"==r.type)for(var a=o.elements[i].options.length-1;0<=a;a--)r.options[a].selected&&n(t,r.name,r.options[a].value);else("checkbox"!=r.type&&"radio"!=r.type||r.checked)&&n(t,r.name,r.value);return t}function tt(e){return et(e,{},function(e,t,n){e[t]=n})}function nt(e){return et(e,[],function(e,t,n){"string"==typeof n&&e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}).join("&").replace(/%20/g,"+")}function rt(e){for(var t=0,n=e;t<n.length;t++){var r=n[t],o=r[0],r=r[1];"object"==typeof r&&0===r.size&&e.delete(o)}return e}function ot(e,t,n){var r;void 0===n&&(n=null),document.createEvent?((r=document.createEvent("click"==t||t.startsWith("mouse")?"MouseEvents":"HTMLEvents")).initEvent(t,!0,!0),r.data=n,e.dispatchEvent(r)):(r=document.createEventObject(),e.fireEvent("on"+t,r))}function st(e,t){if(t){var n,r;for(n in t){var o=t[n],s=(null==o&&(o=""),e.elements.namedItem(n)||e.elements.namedItem((r=n)&&(r[0]===r[0].toUpperCase()?p(r):r[0]===r[0].toLowerCase()?be(r):r))),i=s;if(s)switch(i.type||s[0].type){case"radio":case"checkbox":for(var a=s.length,u=0;u<a;u++)s[u].checked=-1<o.indexOf(s[u].value);break;case"select-multiple":for(var c=Ue(o)?o:[o],l=s,u=0;u<l.options.length;u++)l.options[u].selected=-1<c.indexOf(l.options[u].value);break;case"select":case"select-one":i.value=o.toString()||o;break;case"date":var f=y(o);f&&(i.value=f.toISOString().split("T")[0]);break;default:i.value=o}}}}function k(e,t){for(var n=e.length;0<n&&e[n-1]===t;)--n;return n<e.length?e.substring(0,n):e}function it(e,t){return t(e),e}function at(e){return null==e?"":"string"==typeof e?"/Date("===e.substring(0,6)?y(e):e.trim():e}function ut(){return["primary","secondary","success","info","warning","danger","light","dark"]}function ct(e){for(var t=0,n=ut();t<n.length;t++){var r=n[t];if(e[r])return"btn-"+r;if(e["outline-"+r])return"btn-outline-"+r}return null}function lt(){return["xs","sm","md","lg"]}function ft(e){for(var t=0,n=lt();t<n.length;t++){var r=n[t];if(e[r])return"btn-"+r}return null}t.splitTitleCase=Te,t.humanify=function(e){return!e||0<=e.indexOf(" ")?e:(0,t.ucFirst)(Te(e).join(" "))},t.queryString=ke,t.combinePaths=v,t.createPath=Ne,t.createUrl=function(e,t){return g(Ne(e,t),t)},t.appendQueryString=g,t.setQueryString=function(e,t){return g(we(e,"?"),Object.assign(ke(e),t))},t.bytesToBase64=Re,s.toBase64=function(e){return xe(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(new Number("0x"+t).valueOf())}))},t.stripQuotes=Le,t.tryDecode=Ie,t.parseCookie=je,t.normalizeKey=De,t.normalize=function e(t,n){if(Ue(t)){if(!n)return t;for(var r=[],o=0;o<t.length;o++)r[o]=e(t[o],n);return r}if("object"!=typeof t)return t;var s,i={};for(s in t)i[De(s)]=n?e(t[s],n):t[s];return i},t.getField=function(e,t){return null==e||null==t?null:e[t]||e[Object.keys(e).filter(function(e){return De(e)===De(t)})[0]||""]},t.parseResponseStatus=function(t,n){void 0===n&&(n=null);try{var e=JSON.parse(t);return C(e.ResponseStatus||e.responseStatus)}catch(e){return{message:n||e.message||e,__error:{error:e,json:t}}}},t.toFormData=function(e){if("undefined"!=typeof window){var t,n=new FormData;for(t in e)n.append(t,e[t]);return n}},t.toObject=function(e){var t=this,n={};if(e){if("object"!=typeof e)throw new Error("keys must be an Array of object keys");Array.prototype.slice.call(e).forEach(function(e){t[e]&&(n[e]=t[e])})}return n},t.errorResponseSummary=Pe,t.errorResponseExcept=Ae,t.errorResponse=function(t){var e;return null==t?Pe.call(this):null!=(e=this.responseStatus||this.ResponseStatus)&&null!=(e=e.ErrorCode?C(e):e).errors&&0!=e.errors.length&&(e=e.errors.find(function(e){return(e.fieldName||"").toLowerCase()==t.toLowerCase()}))?e.message||e.errorCode:void 0},t.isDate=Fe,t.toDate=y,t.toDateFmt=function(e){return _e(y(e))},t.padInt=b,t.dateFmt=_e,t.dateFmtHM=function(e){return(e=void 0===e?new Date:e).getFullYear()+"/"+b(e.getMonth()+1)+"/"+b(e.getDate())+" "+b(e.getHours())+":"+b(e.getMinutes())},t.timeFmt12=function(e){return b(((e=void 0===e?new Date:e).getHours()+24)%12||12)+":"+b(e.getMinutes())+":"+b(e.getSeconds())+" "+(12<e.getHours()?"PM":"AM")},t.toLocalISOString=Be,t.toTime=function(e){return"string"==typeof e&&0<=e.indexOf(":")?e:qe(e instanceof Date?e.getTime():"string"==typeof e?1e3*mt(e):e)},t.msToTime=qe,t.padStart=He,t.createElement=Ve,t.$1=function(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null},t.$$=T,t.on=function(e,r){T(e).forEach(function(n){Object.keys(r).forEach(function(e){var t=r[e];"string"==typeof e&&"function"==typeof t&&n.addEventListener(e,t.bind(n))})})},t.delaySet=function(e,t){var t=t&&t.duration||300,n=setTimeout(function(){return e(!0)},t);return function(){clearTimeout(n),e(!1)}},t.bootstrap=function(e){for(var t=(e||document).querySelectorAll("[data-invalid]"),n=0;n<t.length;n++)We.call(t[n])},"undefined"!=typeof window&&void 0!==window.Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})),t.bindHandlers=function(t,n,e){void 0===n&&(n=document),(e=void 0===e?null:e)&&e.events?e.events.forEach(function(e){return $e(t,n,e)}):["click","dblclick","change","focus","blur","focusin","focusout","select","keydown","keypress","keyup","hover","toggle","input"].forEach(function(e){n.querySelector("[data-".concat(e,"]"))&&$e(t,n,e)})},t.bootstrapForm=function(t,n){t&&(n.model&&st(t,n.model),t.onsubmit=function(e){return e.preventDefault(),n.type="bootstrap-v4",Ye(t,n)})},(e=d=d||{}).MultiPart="multipart/form-data",e.UrlEncoded="application/x-www-form-urlencoded",e.Json="application/json",t.toVarNames=Qe,t.formSubmit=Xe,t.ajaxSubmit=Ye,t.serializeForm=Ze,t.serializeToObject=tt,t.serializeToUrlEncoded=nt,t.serializeToFormData=function(e){return et(e,new FormData,function(e,t,n){e.append(t,n)})},t.sanitizeFormData=rt,t.triggerEvent=ot,t.populateForm=st,t.trimEnd=k,t.safeVarName=function(e){return e.replace(/[\W]+/g,"")},t.pick=function(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&0<=t.indexOf(n)&&(r[n]=e[n]);return r},t.omit=function(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&(r[n]=e[n]);return r},t.apply=it,t.each=function(e,n,t){return e.reduce(function(e,t){return n(e,t),e},t||{})},t.resolve=function(e,t){return e="function"==typeof e?e():e,"function"==typeof t?t(e):e},t.mapGet=function(e,t){var n;return e&&t?e[t]||("object"==typeof e&&(n=t.toLowerCase(),t=Object.keys(e).find(function(e){return e.toLowerCase()===n}))?e[t]:null):null},t.apiValue=at,t.apiValueFmt=function(e){return(null!=(e=at(e))?Fe(e)?_e(e):e:null)||""},t.activeClassNav=function(e,t){return null!=e.href&&(e.exact||t.length<=1?k(t,"/").toLowerCase()===k(e.href,"/").toLowerCase():k(t,"/").toLowerCase().startsWith(k(e.href,"/").toLowerCase()))?"active":null},t.activeClass=function(e,t,n){return null!=e&&(n||t.length<=1?k(t,"/").toLowerCase()===k(e,"/").toLowerCase():k(t,"/").toLowerCase().startsWith(k(e,"/").toLowerCase()))?"active":null},t.BootstrapColors=ut(),t.btnColorClass=ct,t.BootstrapSizes=lt(),t.btnSizeClass=ft,t.btnClasses=function(e){var t=[],n=ct(e);return n&&t.push(n),(n=ft(e))&&t.push(n),e.block&&t.push("btn-block"),t};R.create=function(){return new I},R.forNav=function(e){return e||R.create()},R.overrideDefaults=function(e,t){return null==e?t:((e=Object.assign({},e)).navClass===R.navClass&&null!=t.navClass&&(e.navClass=t.navClass),e.navItemClass===R.navItemClass&&null!=t.navItemClass&&(e.navItemClass=t.navItemClass),e.navLinkClass===R.navLinkClass&&null!=t.navLinkClass&&(e.navLinkClass=t.navLinkClass),e.childNavItemClass===R.childNavItemClass&&null!=t.childNavItemClass&&(e.childNavItemClass=t.childNavItemClass),e.childNavLinkClass===R.childNavLinkClass&&null!=t.childNavLinkClass&&(e.childNavLinkClass=t.childNavLinkClass),e.childNavMenuClass===R.childNavMenuClass&&null!=t.childNavMenuClass&&(e.childNavMenuClass=t.childNavMenuClass),e.childNavMenuItemClass===R.childNavMenuItemClass&&null!=t.childNavMenuItemClass&&(e.childNavMenuItemClass=t.childNavMenuItemClass),e)},R.showNav=function(e,t){return null==t||0===t.length?null==e.show:!(null!=e.show&&t.indexOf(e.show)<0||null!=e.hide&&0<=t.indexOf(e.hide))},R.navClass="nav",R.navItemClass="nav-item",R.navLinkClass="nav-link",R.childNavItemClass="nav-item dropdown",R.childNavLinkClass="nav-link dropdown-toggle",R.childNavMenuClass="dropdown-menu",R.childNavMenuItemClass="dropdown-item";var N=R;function R(){}function pt(){}function M(){}function x(){}function L(){}t.NavDefaults=N,pt.forNavLink=function(e){return e||N.create()},t.NavLinkDefaults=pt,M.create=function(){return new I({navClass:M.navClass})},M.forNavbar=function(e){return N.overrideDefaults(e,M.create())},M.navClass="navbar-nav",t.NavbarDefaults=M,x.create=function(){return new I({navClass:x.navClass,navItemClass:x.navItemClass})},x.forNavButtonGroup=function(e){return N.overrideDefaults(e,x.create())},x.navClass="btn-group",x.navItemClass="btn btn-primary",t.NavButtonGroupDefaults=x,L.create=function(){return new I({navItemClass:L.navItemClass})},L.forLinkButton=function(e){return N.overrideDefaults(e||null,L.create())},L.navItemClass="btn",t.LinkButtonDefaults=L;dt.fromSession=function(e){var t=[];return null!=e&&(t.push("auth"),e.roles&&t.push.apply(t,e.roles.map(function(e){return"role:"+e})),e.permissions)&&t.push.apply(t,e.permissions.map(function(e){return"perm:"+e})),t};var ht=dt;function dt(){}t.UserAttributes=ht;vt.fromSession=function(e,t){return(t=t||new vt).attributes=ht.fromSession(e),t};var I=vt;function vt(e){this.attributes=[],this.navClass=N.navClass,this.navItemClass=N.navItemClass,this.navLinkClass=N.navLinkClass,this.childNavItemClass=N.childNavItemClass,this.childNavLinkClass=N.childNavLinkClass,this.childNavMenuClass=N.childNavMenuClass,this.childNavMenuItemClass=N.childNavMenuItemClass,Object.assign(this,e)}function gt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=[],r=0;r<e.length;r++){var o=e[r];if(o){var s=typeof o;if("string"==s||"number"==s)n.push(o);else if(Array.isArray(o)&&o.length){var i=gt.apply(null,o);i&&n.push(i)}else if("object"==s)for(var a=0,u=Object.keys(o);a<u.length;a++){var c=u[a];o[c]&&n.push(c)}}}return n.join(" ")}function mt(e){var t=0,n=0,r=0,o=0,s=0,e=m(e.substring(1),"T"),i=2==e.length,a=m(e[0],"D");return 2==a.length&&(t=parseInt(a[0],10)||0),i&&(2==(a=m(e[1],"H")).length&&(n=parseInt(a[0],10)||0),2==(i=m(a[a.length-1],"M")).length&&(r=parseInt(i[0],10)||0),2==(e=m(i[i.length-1],"S")).length&&(s=parseFloat(e[0])),s-=o=0|s),24*t*60*60+60*n*60+60*r+o+s}function yt(e,t){var n,r=0|e,o=r,s=60<=o?o%60:o,i=60<=(o/=60)?o%60:o,a=24<=(o/=60)?o%24:o,o=o/24,e=e-r+s,r=t?"P":"";return t?(0<(0|o)&&(r+="".concat(0|o,"D")),(0==o||0<a+i+s+e)&&(r+="T",0<(0|a)&&(r+="".concat(0|a,"H")),0<(0|i)&&(r+="".concat(0|i,"M")),0<e?(n=k(k(n=e.toFixed(7),"0"),"."),r+="".concat(n,"S")):2==r.length&&(r+="0S"))):(0<(0|o)&&(r+="".concat(0|o,":")),r+="".concat(b(0|a),":").concat(b(0|i),":"),0<e?(n=k(k(n=e.toFixed(7),"0"),"."),r+=(10<=e?"":"0").concat(n)):r+="00"),r}function bt(e){return null==e?null:"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):"".concat(e)}function Ct(e,t){for(var n=0,r=t.length;n<r;n++){var o=e.indexOf(t[n]);if(0<=o)return o}return-1}function wt(e){return null==e||""===e}t.NavOptions=I,t.classNames=gt,t.fromXsdDuration=mt,t.toXsdDuration=function(e){return yt(e,!0)},t.toTimeSpanFmt=function(e){return yt(e,!1)},t.flatMap=function(n,e){return e.reduce(function(e,t){return e.concat(n(t))},[])},t.uniq=function(e){return Array.from(new Set(e)).sort(function(e,t){return t<e?1:-1})},t.enc=bt,t.htmlAttrs=function(t){var n=[];return Object.keys(t).forEach(function(e){0<n.length&&n.push(" "),n.push(e),n.push('="'),n.push(bt(t[e])),n.push('"')}),n.join("")},t.indexOfAny=Ct,t.isNullOrEmpty=wt,t.fromDateTime=y,t.toDateTime=function(e){return"/Date(".concat(e.getTime(),")/")},t.fromTimeSpan=function(e){return e},t.toTimeSpan=function(e){return e},t.fromGuid=function(e){return e},t.toGuid=function(e){return e},t.fromByteArray=function(e){e=e;for(var t="function"==typeof atob?atob(e):Buffer.from(e,"base64").toString(),n=t.length,r=new Uint8Array(n),o=0;o<n;o++)r[o]=t.charCodeAt(o);return r},t.toByteArray=function(e){return xe(String.fromCharCode.apply(null,e))},t.toBase64String=function(e){return s.toBase64(e)};j.prototype.set=function(e){this.buffer_=""+e},j.prototype.append=function(e,t){for(var n=2;n<arguments.length;n++)n-2,0;if(this.buffer_+=String(e),null!=t)for(var r=1;r<arguments.length;r++)this.buffer_+=arguments[r];return this},j.prototype.clear=function(){this.buffer_=""},j.prototype.getLength=function(){return this.buffer_.length},j.prototype.toString=function(){return this.buffer_};var St=j;function j(e){for(var t=1;t<arguments.length;t++)t-1,0;this.buffer_="",null!=e&&this.append.apply(this,arguments)}function D(){}function Et(e){var t=[];return e.forEach(function(e){return Object.keys(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}),t}function Ot(e,t,n){return void 0===n&&(n=" "),t<0?"":t+1-e.length<=0?e:n+e+n.repeat(t+1-e.length)}function Tt(e,t,n){var r,o;return void 0===n&&(n=" "),t<0?"":(o=(e=e||"").length,r=Math.floor(t/2-o/2),o=Math.abs(o%2-t%2),n.repeat(r+1)+e+n.repeat(r+1+o))}function kt(e,t,n){return void 0===n&&(n=" "),t<0?"":t+1-e.length<=0?e:n.repeat(t+1-e.length)+e+n}function Nt(e,t,n){void 0===n&&(n=" ");var r="".concat(e);return r.length<=t?("number"==typeof e?kt:Ot)(r,t,n):r}function Rt(){var r={};return{subscribe:function(e,t){var n=Symbol("id");return r[e]||(r[e]={}),r[e][n]=t,{unsubscribe:function(){delete r[e][n],0===Object.getOwnPropertySymbols(r[e]).length&&delete r[e]}}},publish:function(t,n){r[t]&&Object.getOwnPropertySymbols(r[t]).forEach(function(e){return r[t][e](n)})}}}function U(){}t.StringBuffer=St,D.encodeString=function(e){return null==e?null:""===e?'""':0<=Ct(e=e.indexOf('"')?e.replace(/"/g,'""'):e,D.ESCAPE_CHARS)?'"'+e+'"':e},D.encodeArray=function(e){for(var t,n=new St,r=0,o=e.length;r<o;r++)wt(t=e[r])||"function"==typeof t||(0<n.getLength()&&n.append(","),n.append(D.stringify(t)));return"[".concat(n.toString(),"]")},D.encodeObject=function(e){var t,n,r=new St;for(n in e)t=e[n],e.hasOwnProperty(n)&&!wt(t)&&"function"!=typeof t&&(0<r.getLength()&&r.append(","),r.append(D.encodeString(n)),r.append(":"),r.append(D.stringify(t)));return"{".concat(r.toString(),"}")},D.stringify=function(e){if(null==e)return null;var t,n=typeof e;if("function"==n||"symbol"==n)return null;if("object"==n)return 0<=(t=e.constructor.toString().toLowerCase()).indexOf("string")?D.encodeString(e):0<=t.indexOf("boolean")?e?"true":"false":0<=t.indexOf("number")?e:0<=t.indexOf("date")?D.encodeString(Be(e)):0<=t.indexOf("array")?D.encodeArray(e):D.encodeObject(e);switch(n){case"string":return D.encodeString(e);case"boolean":return e?"true":"false";default:return e}},D.ESCAPE_CHARS=['"',":",",","{","}","[","]","\r","\n"],t.JSV=D,t.uniqueKeys=Et,t.alignLeft=Ot,t.alignCenter=Tt,t.alignRight=kt,t.alignAuto=Nt,t.EventBus=function(){var e=(t=Rt()).subscribe,t=t.publish;this.subscribe=e,this.publish=t},t.createBus=Rt,U.vars=function(o){return __awaiter(this,void 0,void 0,function(){var r,t=this;return __generator(this,function(e){switch(e.label){case 0:return"object"!=typeof process?[2]:(r=process.env.INSPECT_VARS)&&o?[4,(F?Promise.resolve().then(function(){return P("node:fs")}):new Promise(function(e,t){P(["node:fs"],e,t)})).then(function(n){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,(F?Promise.resolve().then(function(){return P("node:path")}):new Promise(function(e,t){P(["node:path"],e,t)})).then(function(e){var t=r.replace(/\\/g,"/");0<=t.indexOf("/")&&(e=e.dirname(t),n.existsSync(e)||n.mkdirSync(e)),n.writeFileSync(t,JSON.stringify(o))})];case 1:return e.sent(),[2]}})})})]:[2];case 1:return e.sent(),[2]}})})},U.dump=function(e){return JSON.stringify(e,null,4).replace(/"/g,"")},U.printDump=function(e){console.log(U.dump(e))},U.dumpTable=function(e){var r=e,o=Et(r),s={},e=(o.forEach(function(t){var n=t.length;r.forEach(function(e){var e=e[t];null!=e&&(e="".concat(e).length,n<e)&&(n=e)}),s[t]=n}),Object.keys(s).length),e=Object.keys(s).map(function(e){return s[e]}).reduce(function(e,t){return e+t},0)+2*e+(e+1),i=[],t=(i.push("+".concat("-".repeat(e-2),"+")),"|");return o.forEach(function(e){return t+=Tt(e,s[e])+"|"}),i.push(t),i.push("|".concat("-".repeat(e-2),"|")),r.forEach(function(t){var n="|";o.forEach(function(e){return n+=Nt(t[e],s[e])+"|"}),i.push(n)}),i.push("+".concat("-".repeat(e-2),"+")),i.join("\n")},U.printDumpTable=function(e){console.log(U.dumpTable(e))},t.Inspect=U});