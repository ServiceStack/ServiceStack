var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},__awaiter=this&&this.__awaiter||function(e,a,i,u){return new(i=i||Promise)(function(r,t){function n(e){try{s(u.next(e))}catch(e){t(e)}}function o(e){try{s(u.throw(e))}catch(e){t(e)}}function s(e){var t;e.done?r(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(n,o)}s((u=u.apply(e,a||[])).next())})},__generator=this&&this.__generator||function(n,o){var s,a,i,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},l={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function e(r){return function(e){var t=[r,e];if(s)throw new TypeError("Generator is already executing.");for(;u=l&&t[l=0]?0:u;)try{if(s=1,a&&(i=2&t[0]?a.return:t[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,t[1])).done)return i;switch(a=0,(t=i?[2&t[0],i.value]:t)[0]){case 0:case 1:i=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,a=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(i=0<(i=u.trys).length&&i[i.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3]))u.label=t[1];else if(6===t[0]&&u.label<i[1])u.label=i[1],i=t;else{if(!(i&&u.label<i[2])){i[2]&&u.ops.pop(),u.trys.pop();continue}u.label=i[2],u.ops.push(t)}}t=o.call(n,u)}catch(e){t=[6,e],a=0}finally{s=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}};!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require,exports):"function"==typeof define&&define.amd?define(["require","exports"],e):"undefined"!=typeof window&&e(window.require||function(){},window["@servicestack/client"]={})}(function(require,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Inspect=exports.createBus=exports.EventBus=exports.alignAuto=exports.alignRight=exports.alignCenter=exports.alignLeft=exports.uniqueKeys=exports.JSV=exports.StringBuffer=exports.toBase64String=exports.toByteArray=exports.fromByteArray=exports.toGuid=exports.fromGuid=exports.toTimeSpan=exports.fromTimeSpan=exports.toDateTime=exports.fromDateTime=exports.isNullOrEmpty=exports.indexOfAny=exports.htmlAttrs=exports.enc=exports.uniq=exports.flatMap=exports.toTimeSpanFmt=exports.toXsdDuration=exports.fromXsdDuration=exports.classNames=exports.NavOptions=exports.UserAttributes=exports.LinkButtonDefaults=exports.NavButtonGroupDefaults=exports.NavbarDefaults=exports.NavLinkDefaults=exports.NavDefaults=exports.btnClasses=exports.btnSizeClass=exports.BootstrapSizes=exports.btnColorClass=exports.BootstrapColors=exports.activeClass=exports.activeClassNav=exports.apiValueFmt=exports.apiValue=exports.mapGet=exports.resolve=exports.each=exports.apply=exports.omit=exports.pick=exports.safeVarName=exports.trimEnd=exports.populateForm=exports.triggerEvent=exports.sanitizeFormData=exports.serializeToFormData=exports.serializeToUrlEncoded=exports.serializeToObject=exports.serializeForm=exports.ajaxSubmit=exports.formSubmit=exports.toVarNames=exports.bootstrapForm=exports.bindHandlers=exports.bootstrap=exports.delaySet=exports.on=exports.$$=exports.$1=exports.createElement=exports.toLocalISOString=exports.timeFmt12=exports.dateFmtHM=exports.dateFmt=exports.padInt=exports.toDateFmt=exports.toDate=exports.isDate=exports.errorResponse=exports.errorResponseExcept=exports.errorResponseSummary=exports.toObject=exports.toFormData=exports.parseResponseStatus=exports.getField=exports.normalize=exports.normalizeKey=exports.parseCookie=exports.tryDecode=exports.stripQuotes=exports.bytesToBase64=exports.appendQueryString=exports.createUrl=exports.createPath=exports.combinePaths=exports.queryString=exports.humanify=exports.splitTitleCase=exports.isDigit=exports.isLower=exports.isUpper=exports.ucFirst=exports.humanize=exports.onlyProps=exports.chop=exports.lastRightPart=exports.lastLeftPart=exports.rightPart=exports.leftPart=exports.splitOnLast=exports.splitOnFirst=exports.css=exports.nameOf=exports.sanitize=exports.map=exports.toKebabCase=exports.toPascalCase=exports.toCamelCase=exports.createError=exports.isFormData=exports.createFieldError=exports.createErrorStatus=exports.ApiResult=exports.getResponseStatus=exports.getMethod=exports.JsonServiceClient=exports.GetAccessTokenResponse=exports.HttpMethods=exports.ServerEventUser=exports.GetEventSubscribers=exports.UpdateEventSubscriberResponse=exports.UpdateEventSubscriber=exports.ServerEventReceiver=exports.getAllMembers=exports.ServerEventsClient=exports.ReadyState=exports.SingletonInstanceResolver=exports.NewInstanceResolver=exports.MetadataType=exports.MetadataPropertyType=exports.MetadataAttribute=exports.MetadataDataMember=exports.MetadataDataContract=exports.MetadataTypeName=exports.MetadataTypes=exports.MetadataOperationType=exports.MetadataRoute=exports.MetadataTypesConfig=exports.GetNavItemsResponse=exports.GetNavItems=exports.NavItem=exports.EmptyResponse=exports.ErrorResponse=exports.ResponseError=exports.ResponseStatus=void 0;var ResponseStatus=function(e){Object.assign(this,e)},ResponseError=(exports.ResponseStatus=ResponseStatus,function(e){Object.assign(this,e)}),ErrorResponse=(exports.ResponseError=ResponseError,function(e){Object.assign(this,e)}),EmptyResponse=(exports.ErrorResponse=ErrorResponse,function(e){Object.assign(this,e)}),NavItem=(exports.EmptyResponse=EmptyResponse,function(e){Object.assign(this,e)}),GetNavItems=(exports.NavItem=NavItem,function(){function e(e){Object.assign(this,e)}return e.prototype.createResponse=function(){return new GetNavItemsResponse},e.prototype.getTypeName=function(){return"GetNavItems"},e.prototype.getMethod=function(){return"GET"},e}()),GetNavItemsResponse=(exports.GetNavItems=GetNavItems,function(e){Object.assign(this,e)}),MetadataTypesConfig=(exports.GetNavItemsResponse=GetNavItemsResponse,function(e){Object.assign(this,e)}),MetadataRoute=(exports.MetadataTypesConfig=MetadataTypesConfig,function(e){Object.assign(this,e)}),MetadataOperationType=(exports.MetadataRoute=MetadataRoute,function(e){Object.assign(this,e)}),MetadataTypes=(exports.MetadataOperationType=MetadataOperationType,function(e){Object.assign(this,e)}),MetadataTypeName=(exports.MetadataTypes=MetadataTypes,function(e){Object.assign(this,e)}),MetadataDataContract=(exports.MetadataTypeName=MetadataTypeName,function(e){Object.assign(this,e)}),MetadataDataMember=(exports.MetadataDataContract=MetadataDataContract,function(e){Object.assign(this,e)}),MetadataAttribute=(exports.MetadataDataMember=MetadataDataMember,function(e){Object.assign(this,e)}),MetadataPropertyType=(exports.MetadataAttribute=MetadataAttribute,function(e){Object.assign(this,e)}),MetadataType=(exports.MetadataPropertyType=MetadataPropertyType,function(e){Object.assign(this,e)}),NewInstanceResolver=(exports.MetadataType=MetadataType,function(){function e(){}return e.prototype.tryResolve=function(e){return new e},e}()),SingletonInstanceResolver=(exports.NewInstanceResolver=NewInstanceResolver,function(){function e(){}return e.prototype.tryResolve=function(e){return e.instance||(e.instance=new e)},e}()),ReadyState;function eventMessageType(e){switch(e){case"onConnect":return"ServerEventConnect";case"onHeartbeat":return"ServerEventHeartbeat";case"onJoin":return"ServerEventJoin";case"onLeave":return"ServerEventLeave";case"onUpdate":return"ServerEventUpdate"}return null}exports.SingletonInstanceResolver=SingletonInstanceResolver,!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED"}(ReadyState=exports.ReadyState||(exports.ReadyState={}));var ServerEventsClient=function(){function e(e,t,r,n){void 0===r&&(r={}),void 0===n&&(n=null);var y=this;if(this.channels=t,this.options=r,this.eventSource=n,this.onMessage=function(e){if("undefined"==typeof document){var t,r,n,o=e.data?e.data.indexOf("\n"):-1;if(0<=o)return t=e.data,n=e.lastEventId,r=Object.assign({},{lastEventId:n,data:t.substring(0,o)}),n=Object.assign({},{lastEventId:n,data:t.substring(o+1)}),y._onMessage(r),void y._onMessage(n)}y._onMessage(e)},this._onMessage=function(e){if(!y.stopped){var t,r=y.options,n=(t=void 0===t?{querySelectorAll:function(e){return[]}}:t).querySelectorAll.bind(t),o=splitOnFirst(e.data," "),s=null,a=o[0],i=splitOnFirst(a,"@"),i=(1<i.length&&(s=i[0],a=i[1]),o[1]),u=null;try{u=i?JSON.parse(i):null}catch(e){}if((o=splitOnFirst(a,".")).length<=1)throw"invalid selector format: "+a;var l=o[0],o=o[1].replace(new RegExp("%20","g")," "),c=splitOnFirst(o,"$"),p=c[0],f=c[1],h=f&&n(f),d=h&&h[0],e={eventId:parseInt(e.lastEventId),data:e.data,type:eventMessageType(p)||"ServerEventMessage",channel:s,selector:a,json:i,body:u,op:l,target:c[0],cssSelector:f,meta:{}},s="object"==typeof u?Object.assign({},e,u):e;if(!r.validate||!1!==r.validate(e)){var v=new Headers;if(v.set("Content-Type","text/plain"),"cmd"===l)if("onConnect"===p){y.connectionInfo=s,"string"==typeof u.heartbeatIntervalMs&&(y.connectionInfo.heartbeatIntervalMs=parseInt(u.heartbeatIntervalMs)),"string"==typeof u.idleTimeoutMs&&(y.connectionInfo.idleTimeoutMs=parseInt(u.idleTimeoutMs)),Object.assign(r,u);var m=r.handlers.onConnect;if(m&&(m.call(d||t.body,y.connectionInfo,e),y.stopped))return;r.heartbeatUrl&&(r.heartbeat&&clearInterval(r.heartbeat),r.heartbeat=setInterval(function(){var e;y.eventSource.readyState===EventSource.CLOSED?(clearInterval(r.heartbeat),null!=(e=r.handlers.onStop)&&e.apply(y.eventSource),y.reconnectServerEvents({error:new Error("EventSource is CLOSED")})):fetch(new Request(r.heartbeatUrl,{method:"POST",mode:"cors",headers:v,credentials:y.serviceClient.credentials})).then(function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText))}).catch(function(e){return y.reconnectServerEvents({error:e})})},y.connectionInfo&&y.connectionInfo.heartbeatIntervalMs||r.heartbeatIntervalMs||1e4)),r.unRegisterUrl&&"undefined"!=typeof window&&(window.onunload=function(){navigator.sendBeacon?(y.stopped=!0,y.eventSource&&y.eventSource.close(),navigator.sendBeacon(r.unRegisterUrl)):y.stop()}),y.updateSubscriberUrl=r.updateSubscriberUrl,y.updateChannels((r.channels||"").split(","))}else{a="onJoin"==p||"onLeave"==p||"onUpdate"==p;(m=r.handlers[p])?a?m.call(d||t.body,s):m.call(d||t.body,u,e):a||(i=r.receivers&&r.receivers.cmd,y.invokeReceiver(i,p,d,e,"cmd")),a&&(m=r.handlers.onCommand)&&m.call(d||t.body,s)}else"trigger"===l?y.raiseEvent(o,e):"css"===l&&css(h||n("body"),p,u);c=r.receivers&&r.receivers[l];y.invokeReceiver(c,p,d,e,l),eventMessageType(p)||(m=r.handlers.onMessage)&&m.call(d||t.body,s),r.onTick&&r.onTick()}}},this.onError=function(e){var t;y.stopped||(e=e||event,null!=(t=y.options.onException)&&t.call(y.eventSource,e),y.options.onTick&&y.options.onTick())},0===this.channels.length)throw"at least 1 channel is required";this.resolver=this.options.resolver||new NewInstanceResolver,this.eventStreamUri=combinePaths(e,"event-stream")+"?",this.updateChannels(t),this.serviceClient=new JsonServiceClient(e),this.listeners={},this.withCredentials=!0,this.options.handlers||(this.options.handlers={})}return e.prototype.getEventSourceOptions=function(){return{withCredentials:this.withCredentials}},e.prototype.reconnectServerEvents=function(t){var r,e,n,o=this;if(void 0===t&&(t={}),!this.stopped)return t.error&&this.onError(t.error),r=this.eventSource,e=t.url||this.eventStreamUri||r.url,null!=this.options.resolveStreamUrl&&(e=this.options.resolveStreamUrl(e)),(e=new(this.EventSource||EventSource)(e,this.getEventSourceOptions())).addEventListener("error",function(e){return(t.onerror||r.onerror||o.onError)(e)}),e.addEventListener("message",t.onmessage||r.onmessage||this.onMessage),null!=(n=this.options.onReconnect)&&n.call(e,t.error),r.removeEventListener&&(r.removeEventListener("error",this.onError),r.removeEventListener("message",this.onMessage)),r.close(),this.eventSource=e},e.prototype.start=function(){var e,t=this;return this.stopped=!1,null!=this.eventSource&&this.eventSource.readyState!==EventSource.CLOSED||(e=this.eventStreamUri,null!=this.options.resolveStreamUrl&&(e=this.options.resolveStreamUrl(e)),this.eventSource=new(this.EventSource||EventSource)(e,this.getEventSourceOptions()),this.eventSource.addEventListener("error",this.onError),this.eventSource.addEventListener("message",function(e){return t.onMessage(e)})),this},e.prototype.stop=function(){this.stopped=!0,this.eventSource&&this.eventSource.close();var e=this.options,e=(e&&e.heartbeat&&clearInterval(e.heartbeat),this.connectionInfo);return null==e||null==e.unRegisterUrl?new Promise(function(e,t){return e()}):(this.connectionInfo=null,fetch(new Request(e.unRegisterUrl,{method:"POST",mode:"cors",credentials:this.serviceClient.credentials})).then(function(e){if(!e.ok)throw new Error("".concat(e.status," - ").concat(e.statusText))}).catch(this.onError))},e.prototype.invokeReceiver=function(t,e,r,n,o){var s,a;t&&("function"==typeof t&&(t=this.resolver.tryResolve(t)),e=e.replace("-",""),t.client=this,t.request=n,"function"==typeof t[e]?t[e].call(r||t,n.body,n):e in t?t[e]=n.body:null!=(a=Object.getOwnPropertyDescriptor(t,e))?a.set?a.set(n.body):a.writable&&(t[e]=n.body):(s=e.toLowerCase(),getAllMembers(t).forEach(function(e){e.toLowerCase()==s&&("function"==typeof t[e]?t[e].call(r||t,n.body,n):t[e]=n.body)}),"function"==typeof(a=t.noSuchMethod)&&a.call(r||t,n.target,n)))},e.prototype.hasConnected=function(){return null!=this.connectionInfo},e.prototype.registerHandler=function(e,t){return this.options.handlers||(this.options.handlers={}),this.options.handlers[e]=t,this},e.prototype.setResolver=function(e){return this.options.resolver=e,this},e.prototype.registerReceiver=function(e){return this.registerNamedReceiver("cmd",e)},e.prototype.registerNamedReceiver=function(e,t){return this.options.receivers||(this.options.receivers={}),this.options.receivers[e]=t,this},e.prototype.unregisterReceiver=function(e){return void 0===e&&(e="cmd"),this.options.receivers&&delete this.options.receivers[e],this},e.prototype.updateChannels=function(e){this.channels=e;var t=null!=this.eventSource?this.eventSource.url:this.eventStreamUri;this.eventStreamUri=t.substring(0,Math.min(t.indexOf("?"),t.length))+"?channels="+e.join(",")+"&t="+(new Date).getTime()},e.prototype.update=function(e,t){var r="string"==typeof e?e.split(","):e,n="string"==typeof t?t.split(","):t,o=[];for(a in this.channels){var s=this.channels[a];null!=n&&-1!==n.indexOf(s)||o.push(s)}if(r)for(var a in r){s=r[a];-1===o.indexOf(s)&&o.push(s)}this.updateChannels(o)},e.prototype.addListener=function(e,t){return(this.listeners[e]||(this.listeners[e]=[])).push(t),this},e.prototype.removeListener=function(e,t){e=this.listeners[e];return e&&0<=(t=e.indexOf(t))&&e.splice(t,1),this},e.prototype.raiseEvent=function(e,t){var r=this,e=this.listeners[e];e&&e.forEach(function(e){try{e(t)}catch(e){r.onError(e)}})},e.prototype.getConnectionInfo=function(){if(null==this.connectionInfo)throw"Not Connected";return this.connectionInfo},e.prototype.getSubscriptionId=function(){return this.getConnectionInfo().id},e.prototype.updateSubscriber=function(t){var r=this;return null==t.id&&(t.id=this.getSubscriptionId()),this.serviceClient.post(t).then(function(e){r.update(t.subscribeChannels,t.unsubscribeChannels)}).catch(this.onError)},e.prototype.subscribeToChannels=function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=new UpdateEventSubscriber;return n.id=this.getSubscriptionId(),n.subscribeChannels=r,this.serviceClient.post(n).then(function(e){t.update(r,null)}).catch(this.onError)},e.prototype.unsubscribeFromChannels=function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=new UpdateEventSubscriber;return n.id=this.getSubscriptionId(),n.unsubscribeChannels=r,this.serviceClient.post(n).then(function(e){t.update(null,r)}).catch(this.onError)},e.prototype.getChannelSubscribers=function(){var t=this,e=new GetEventSubscribers;return e.channels=this.channels,this.serviceClient.get(e).then(function(e){return e.map(function(e){return t.toServerEventUser(e)})}).catch(function(e){return t.onError(e),[]})},e.prototype.toServerEventUser=function(e){var t,r=e.channels,n=new ServerEventUser;for(t in n.userId=e.userId,n.displayName=e.displayName,n.profileUrl=e.profileUrl,n.channels=r?r.split(","):null,e)"userId"!=t&&"displayName"!=t&&"profileUrl"!=t&&"channels"!=t&&(null==n.meta&&(n.meta={}),n.meta[t]=e[t]);return n},e.UnknownChannel="*",e}();function getAllMembers(e){var n=[];do{var t=Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e).map(function(e){return e.toString()})).sort().filter(function(e,t,r){return"constructor"!==e&&(0==t||e!==r[t-1])&&-1===n.indexOf(e)}),n=n.concat(t)}while((e=Object.getPrototypeOf(e))&&Object.getPrototypeOf(e));return n}exports.ServerEventsClient=ServerEventsClient,exports.getAllMembers=getAllMembers;var ServerEventReceiver=function(){function e(){}return e.prototype.noSuchMethod=function(e,t){},e}(),UpdateEventSubscriber=(exports.ServerEventReceiver=ServerEventReceiver,function(){function e(){}return e.prototype.createResponse=function(){return new UpdateEventSubscriberResponse},e.prototype.getTypeName=function(){return"UpdateEventSubscriber"},e}()),UpdateEventSubscriberResponse=(exports.UpdateEventSubscriber=UpdateEventSubscriber,function(){}),GetEventSubscribers=(exports.UpdateEventSubscriberResponse=UpdateEventSubscriberResponse,function(){function e(){}return e.prototype.createResponse=function(){return[]},e.prototype.getTypeName=function(){return"GetEventSubscribers"},e}()),ServerEventUser=(exports.GetEventSubscribers=GetEventSubscribers,function(){}),HttpMethods=(exports.ServerEventUser=ServerEventUser,function(){function e(){}return e.Get="GET",e.Post="POST",e.Put="PUT",e.Delete="DELETE",e.Patch="PATCH",e.Head="HEAD",e.Options="OPTIONS",e.hasRequestBody=function(e){return!("GET"===e||"DELETE"===e||"HEAD"===e||"OPTIONS"===e)},e}()),GetAccessToken=(exports.HttpMethods=HttpMethods,function(){function e(e){Object.assign(this,e)}return e.prototype.createResponse=function(){return new GetAccessTokenResponse},e.prototype.getTypeName=function(){return"GetAccessToken"},e.prototype.getMethod=function(){return"POST"},e}()),GetAccessTokenResponse=function(){},JsonServiceClient=(exports.GetAccessTokenResponse=GetAccessTokenResponse,function(){function i(e){this.baseUrl=e=void 0===e?"/":e,this.replyBaseUrl=combinePaths(e,"json","reply")+"/",this.oneWayBaseUrl=combinePaths(e,"json","oneway")+"/",this.mode="cors",this.credentials="include",this.headers=new Headers,this.headers.set("Content-Type","application/json"),this.manageCookies="undefined"==typeof document,this.cookies={},this.enableAutoRefreshToken=!0}return i.prototype.setCredentials=function(e,t){this.userName=e,this.password=t},i.prototype.useBasePath=function(e){return this.basePath=e,this},Object.defineProperty(i.prototype,"basePath",{set:function(e){e?("/"!=e[0]&&(e="/"+e),this.replyBaseUrl=combinePaths(this.baseUrl,e)+"/",this.oneWayBaseUrl=combinePaths(this.baseUrl,e)+"/"):(this.replyBaseUrl=combinePaths(this.baseUrl,"json","reply")+"/",this.oneWayBaseUrl=combinePaths(this.baseUrl,"json","oneway")+"/")},enumerable:!1,configurable:!0}),i.prototype.apply=function(e){return e(this),this},i.prototype.get=function(e,t){return"string"!=typeof e?this.fetch(HttpMethods.Get,e,t):this.fetch(HttpMethods.Get,null,t,this.toAbsoluteUrl(e))},i.prototype.delete=function(e,t){return"string"!=typeof e?this.fetch(HttpMethods.Delete,e,t):this.fetch(HttpMethods.Delete,null,t,this.toAbsoluteUrl(e))},i.prototype.post=function(e,t){return this.fetch(HttpMethods.Post,e,t)},i.prototype.postToUrl=function(e,t,r){return this.fetch(HttpMethods.Post,t,r,this.toAbsoluteUrl(e))},i.prototype.postBody=function(e,t,r){return this.fetchBody(HttpMethods.Post,e,t,r)},i.prototype.put=function(e,t){return this.fetch(HttpMethods.Put,e,t)},i.prototype.putToUrl=function(e,t,r){return this.fetch(HttpMethods.Put,t,r,this.toAbsoluteUrl(e))},i.prototype.putBody=function(e,t,r){return this.fetchBody(HttpMethods.Put,e,t,r)},i.prototype.patch=function(e,t){return this.fetch(HttpMethods.Patch,e,t)},i.prototype.patchToUrl=function(e,t,r){return this.fetch(HttpMethods.Patch,t,r,this.toAbsoluteUrl(e))},i.prototype.patchBody=function(e,t,r){return this.fetchBody(HttpMethods.Patch,e,t,r)},i.prototype.publish=function(e,t){return this.sendOneWay(e,t)},i.prototype.sendOneWay=function(e,t){var r=combinePaths(this.oneWayBaseUrl,nameOf(e));return this.fetch(HttpMethods.Post,e,null,r)},i.prototype.sendAll=function(e){var t;return 0==e.length?Promise.resolve([]):(t=combinePaths(this.replyBaseUrl,nameOf(e[0])+"[]"),this.fetch(HttpMethods.Post,e,null,t))},i.prototype.sendAllOneWay=function(e){var t;return 0==e.length?Promise.resolve(void 0):(t=combinePaths(this.oneWayBaseUrl,nameOf(e[0])+"[]"),this.fetch(HttpMethods.Post,e,null,t).then(function(e){}))},i.prototype.createUrlFromDto=function(e,t){var r=combinePaths(this.replyBaseUrl,nameOf(t));return r=HttpMethods.hasRequestBody(e)?r:appendQueryString(r,t)},i.prototype.toAbsoluteUrl=function(e){return e.startsWith("http://")||e.startsWith("https://")?e:combinePaths(this.baseUrl,e)},i.prototype.deleteCookie=function(e){this.manageCookies?delete this.cookies[e]:document&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")},i.prototype.createRequest=function(e){var t=this,r=e.method,n=e.request,o=e.url,s=e.args,e=e.body,o=o||this.createUrlFromDto(r,n),s=(s&&(o=appendQueryString(o,s)),null!=this.bearerToken?this.headers.set("Authorization","Bearer "+this.bearerToken):null!=this.userName&&this.headers.set("Authorization","Basic "+i.toBase64("".concat(this.userName,":").concat(this.password))),this.manageCookies&&(0<(s=Object.keys(this.cookies).map(function(e){e=t.cookies[e];return e.expires&&e.expires<new Date?null:"".concat(e.name,"=").concat(encodeURIComponent(e.value))}).filter(function(e){return!!e})).length?this.headers.set("Cookie",s.join("; ")):this.headers.delete("Cookie")),new Headers(this.headers)),a=HttpMethods.hasRequestBody(r),o={url:o,method:r,mode:this.mode,credentials:this.credentials,headers:s,compress:!1};return a&&(o.body=e||JSON.stringify(n),isFormData(e))&&(o.body=sanitizeFormData(e),s.delete("Content-Type")),null!=this.requestFilter&&this.requestFilter(o),null!=i.globalRequestFilter&&i.globalRequestFilter(o),o},i.prototype.json=function(e){return this.parseJson?this.parseJson(e):e.text().then(function(e){return 0<e.length?JSON.parse(e):null})},i.prototype.applyResponseFilters=function(e){null!=this.responseFilter&&this.responseFilter(e),null!=i.globalResponseFilter&&i.globalResponseFilter(e)},i.prototype.createResponse=function(e,t){var r,n=this;if(!e.ok)throw this.applyResponseFilters(e),e;this.manageCookies&&(r=[],e.headers.forEach(function(e,t){"set-cookie"===t.toLowerCase()&&e.split(",").forEach(function(e){return r.push(e)})}),r.forEach(function(e){e=parseCookie(e);e&&(n.cookies[e.name]=e)})),e.headers.forEach(function(e,t){"x-cookies"===t.toLowerCase()&&0<=e.split(",").indexOf("ss-reftok")&&(n.useTokenCookie=!0)}),this.applyResponseFilters(e);t=t&&"string"!=typeof t&&"function"==typeof t.createResponse?t.createResponse():null;if("string"==typeof t)return e.text().then(function(e){return e});var o=e.headers.get("content-type"),o=o&&-1!==o.indexOf("application/json");if(o)return this.json(e).then(function(e){return e});if("undefined"!=typeof Uint8Array&&t instanceof Uint8Array){if("function"!=typeof e.arrayBuffer)throw new Error("This fetch polyfill does not implement 'arrayBuffer'");return e.arrayBuffer().then(function(e){return new Uint8Array(e)})}if("function"==typeof Blob&&t instanceof Blob){if("function"!=typeof e.blob)throw new Error("This fetch polyfill does not implement 'blob'");return e.blob().then(function(e){return e})}var s=e.headers.get("content-length");return"0"===s||null==s&&!o?t:this.json(e).then(function(e){return e})},i.prototype.handleError=function(e,r,t){var n=this;if(void 0===t&&(t=null),r instanceof Error)throw this.raiseError(e,r);if(r.bodyUsed)throw this.raiseError(r,createErrorResponse(r.status,r.statusText,t));return void 0===r.json&&r.responseStatus?new Promise(function(e,t){return t(n.raiseError(null,r))}):this.json(r).then(function(e){e=sanitize(e);if(e.responseStatus)throw null!=t&&(e.type=t),e;throw createErrorResponse(r.status,r.statusText,t)}).catch(function(e){if(e instanceof Error||"undefined"!=typeof window&&e instanceof window.DOMException)throw n.raiseError(r,createErrorResponse(r.status,r.statusText,t));throw n.raiseError(r,e)})},i.prototype.fetch=function(e,t,r,n){return this.sendRequest({method:e,request:t,args:r,url:n})},i.prototype.fetchBody=function(e,t,r,n){var o=combinePaths(this.replyBaseUrl,nameOf(t));return this.sendRequest({method:e,request:r,body:"string"==typeof r||isFormData(r)?r:JSON.stringify(r),url:appendQueryString(o,t),args:n,returns:t})},i.prototype.sendRequest=function(t){function o(){var e=s.createRequest(t);return s.urlFilter&&s.urlFilter(e.url),fetch(e.url,e).then(function(e){return s.createResponse(e,r)}).catch(function(e){return s.handleError(a,e)})}var s=this,e=this.createRequest(t),r=t.returns||t.request,a=null;return this.urlFilter&&this.urlFilter(e.url),fetch(e.url,e).then(function(e){return a=e,s.createResponse(e,r)}).catch(function(e){if(401===e.status){var t,r,n;if(s.enableAutoRefreshToken&&(s.refreshToken||s.useTokenCookie||null!=s.cookies["ss-reftok"]))return t=new GetAccessToken({refreshToken:s.refreshToken,useTokenCookie:!!s.useTokenCookie}),r=s.refreshTokenUri||s.createUrlFromDto(HttpMethods.Post,t),s.useTokenCookie&&(s.bearerToken=null,s.headers.delete("Authorization")),n=s.createRequest({method:HttpMethods.Post,request:t,args:null,url:r}),fetch(r,n).then(function(e){return s.createResponse(e,t).then(function(e){return s.bearerToken=e.accessToken||null,o()})}).catch(function(e){return s.onAuthenticationRequired?s.onAuthenticationRequired().then(o).catch(function(e){return s.handleError(a,e,"RefreshTokenException")}):s.handleError(a,e,"RefreshTokenException")});if(s.onAuthenticationRequired)return s.onAuthenticationRequired().then(o)}return s.handleError(a,e)})},i.prototype.raiseError=function(e,t){return null!=this.exceptionFilter&&this.exceptionFilter(e,t),t},i.prototype.send=function(e,t,r){return this.sendRequest({method:getMethod(e),request:e,args:t,url:r})},i.prototype.sendVoid=function(e,t,r){return this.sendRequest({method:getMethod(e),request:e,args:t,url:r})},i.prototype.api=function(r,n,o){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetch(getMethod(r,o),r,n)];case 1:return t=e.sent(),[2,new ApiResult({response:t})];case 2:return t=e.sent(),[2,new ApiResult({error:getResponseStatus(t)})];case 3:return[2]}})})},i.prototype.apiVoid=function(r,n,o){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetch(getMethod(r,o),r,n)];case 1:return t=e.sent(),[2,new ApiResult({response:null!=t?t:new EmptyResponse})];case 2:return t=e.sent(),[2,new ApiResult({error:getResponseStatus(t)})];case 3:return[2]}})})},i.prototype.apiForm=function(r,n,o,s){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetchBody(getMethod(r,s),r,n,o)];case 1:return t=e.sent(),[2,new ApiResult({response:t})];case 2:return t=e.sent(),[2,new ApiResult({error:getResponseStatus(t)})];case 3:return[2]}})})},i.prototype.apiFormVoid=function(r,n,o,s){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.fetchBody(getMethod(r,s),r,n,o)];case 1:return t=e.sent(),[2,new ApiResult({response:null!=t?t:new EmptyResponse})];case 2:return t=e.sent(),[2,new ApiResult({error:getResponseStatus(t)})];case 3:return[2]}})})},i}());function getMethod(e,t){return(null!=t?t:"function"==typeof e.getMethod)?e.getMethod():HttpMethods.Post}function getResponseStatus(e){var t;return null!=(t=null!=(t=e.responseStatus)?t:e.ResponseStatus)?t:e.errorCode?e:e.message?createErrorStatus(e.message,e.errorCode):null}exports.JsonServiceClient=JsonServiceClient,exports.getMethod=getMethod,exports.getResponseStatus=getResponseStatus;var ApiResult=function(){function e(e){Object.assign(this,e)}return Object.defineProperty(e.prototype,"completed",{get:function(){return null!=this.response||null!=this.error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failed",{get:function(){var e;return null!=(null==(e=this.error)?void 0:e.errorCode)||null!=(null==(e=this.error)?void 0:e.message)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeeded",{get:function(){return!this.failed&&null!=this.response},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){var e;return null==(e=this.error)?void 0:e.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){var e;return null==(e=this.error)?void 0:e.errorCode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errors",{get:function(){var e;return null!=(e=null==(e=this.error)?void 0:e.errors)?e:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorSummary",{get:function(){return null!=this.error&&0==this.errors.length?this.errorMessage:null},enumerable:!1,configurable:!0}),e.prototype.fieldError=function(e){var t=e.toLowerCase();return null==(e=this.errors)?void 0:e.find(function(e){return e.fieldName.toLowerCase()==t})},e.prototype.fieldErrorMessage=function(e){return null==(e=this.fieldError(e))?void 0:e.message},e.prototype.hasFieldError=function(e){return null!=this.fieldError(e)},e.prototype.showSummary=function(e){var t=this;return void 0===e&&(e=[]),!!this.failed&&e.every(function(e){return!t.hasFieldError(e)})},e.prototype.summaryMessage=function(e){var t;if(this.showSummary(e=void 0===e?[]:e))return null!=(e=(t=e.map(function(e){return e.toLowerCase()})).find(function(e){return-1==t.indexOf(e.toLowerCase())}))?e:this.errorMessage},e.prototype.addFieldError=function(e,t,r){void 0===r&&(r="Exception"),this.error||(this.error=new ResponseStatus);var n=this.fieldError(e);null!=n?(n.errorCode=r,n.message=t):this.error.errors.push(new ResponseError({fieldName:e,errorCode:r,message:t}))},e}();function createErrorStatus(e,t){return new ResponseStatus({errorCode:t=void 0===t?"Exception":t,message:e})}function createFieldError(e,t,r){return new ResponseStatus({errors:[new ResponseError({fieldName:e,errorCode:r=void 0===r?"Exception":r,message:t})]})}function isFormData(e){return"undefined"!=typeof window&&e instanceof FormData}function createErrorResponse(t,r,n){return void 0===n&&(n=null),apply(new ErrorResponse,function(e){null!=n&&(e.type=n),e.responseStatus=apply(new ResponseStatus,function(e){e.errorCode=t&&t.toString(),e.message=r})})}function createError(e,t,r){return new ErrorResponse({responseStatus:new ResponseStatus({errorCode:e,message:t,errors:r?[new ResponseError({errorCode:e,message:t,fieldName:r})]:void 0})})}function toCamelCase(e){return e&&e.charAt(0).toLowerCase()+e.substring(1)}function toPascalCase(e){return e&&e.charAt(0).toUpperCase()+e.substring(1)}function toKebabCase(e){return(e||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function map(e,t){return null==e?null:t(e)}function sanitize(e){if(e.responseStatus)return e;if(e.errors)return e;var t={};for(o in e)e.hasOwnProperty(o)&&(e[o]instanceof Object?t[toCamelCase(o)]=sanitize(e[o]):t[toCamelCase(o)]=e[o]);if(t.errors=[],null!=e.Errors)for(var r=0,n=e.Errors.length;r<n;r++){var o,s=e.Errors[r],a={};for(o in s)a[toCamelCase(o)]=s[o];t.errors.push(a)}return t}function nameOf(e){if(!e)return"null";if("function"==typeof e.getTypeName)return e.getTypeName();var t=e&&e.constructor;if(null==t)throw"".concat(e," doesn't have constructor");return t.name||(e=t.toString()).substring(9,e.indexOf("("))}function log(e,t){void 0===t&&(t="LOG"),console.log(t,e)}function css(e,t,r){for(var n="string"==typeof e?document.querySelectorAll(e):e,o=0;o<n.length;o++){var s=n[o];null!=s&&null!=s.style&&(s.style[t]=r)}}function splitOnFirst(e,t){return e&&0<=(t=e.indexOf(t))?[e.substring(0,t),e.substring(t+1)]:[e]}function splitOnLast(e,t){return e&&0<=(t=e.lastIndexOf(t))?[e.substring(0,t),e.substring(t+1)]:[e]}function leftPart(e,t){return null==e?null:-1==(t=e.indexOf(t))?e:e.substring(0,t)}function rightPart(e,t){var r;return null==e?null:-1==(r=e.indexOf(t))?e:e.substring(r+t.length)}function lastLeftPart(e,t){return null==e?null:-1==(t=e.lastIndexOf(t))?e:e.substring(0,t)}function lastRightPart(e,t){var r;return null==e?null:-1==(r=e.lastIndexOf(t))?e:e.substring(r+t.length)}function chop(e,t){return void 0===t&&(t=1),t=Math.abs(t),e&&(t<e.length?e.substring(0,e.length-t):"")}function onlyProps(t,e){var r={};return e.forEach(function(e){return r[e]=t[e]}),r}function splitCase(e){return"string"!=typeof e?e:e.replace(/([A-Z]|[0-9]+)/g," $1").replace(/_/g," ").trim()}function humanize(e){return!e||0<=e.indexOf(" ")?e:splitCase(toPascalCase(e))}exports.ApiResult=ApiResult,exports.createErrorStatus=createErrorStatus,exports.createFieldError=createFieldError,exports.isFormData=isFormData,exports.createError=createError,exports.toCamelCase=toCamelCase,exports.toPascalCase=toPascalCase,exports.toKebabCase=toKebabCase,exports.map=map,exports.sanitize=sanitize,exports.nameOf=nameOf,exports.css=css,exports.splitOnFirst=splitOnFirst,exports.splitOnLast=splitOnLast,exports.leftPart=leftPart,exports.rightPart=rightPart,exports.lastLeftPart=lastLeftPart,exports.lastRightPart=lastRightPart,exports.chop=chop,exports.onlyProps=onlyProps,exports.humanize=humanize;var ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)},isUpper=(exports.ucFirst=ucFirst,function(e){return"A"<=e&&e<="Z"}),isLower=(exports.isUpper=isUpper,function(e){return"a"<=e&&e<="z"}),isDigit=(exports.isLower=isLower,function(e){return"0"<=e&&e<="9"}),upperOrDigit=(exports.isDigit=isDigit,function(e){return(0,exports.isUpper)(e)||(0,exports.isDigit)(e)});function splitTitleCase(e){var t=[];if("string"!=typeof e)return t;for(var r=0,n=0;n<e.length;n++){var o=e[n],s=0<n?e[n-1]:null,a=n+1<e.length?e[n+1]:null;!upperOrDigit(o)||upperOrDigit(s)&&upperOrDigit(a)||(t.push(e.substring(r,n)),r=n)}return t.push(e.substring(r,e.length)),t.filter(function(e){return!!e})}exports.splitTitleCase=splitTitleCase;var humanify=function(e){return!e||0<=e.indexOf(" ")?e:(0,exports.ucFirst)(splitTitleCase(e).join(" "))},Types;function queryString(e){if(!e||-1===e.indexOf("?"))return{};for(var t=splitOnFirst(e,"?")[1].split("&"),r={},n=0;n<t.length;++n){var o=t[n].split("=");r[o[0]]=1<o.length?decodeURIComponent(o[1].replace(/\+/g," ")):null}return r}function combinePaths(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=[],n=0,o=e.length;n<o;n++)var s=e[n],r=-1===s.indexOf("://")?r.concat(s.split("/")):r.concat(s.lastIndexOf("/")===s.length-1?s.substring(0,s.length-1):s);var a=[];for(n=0,o=r.length;n<o;n++){var i=r[n];i&&"."!==i&&(".."===i?a.pop():a.push(i))}return""===r[0]&&a.unshift(""),a.join("/")||(a.length?"/":".")}function createPath(e,t){var r,n={};for(r in t)n[r.toLowerCase()]=r;for(var o=e.split("/"),s="",a=0;a<o.length;a++){var i,u=o[a];"{"===(u=null==u?"":u)[0]&&"}"===u[u.length-1]&&(i=n[u.substring(1,u.length-1).toLowerCase()])&&(u=t[i],delete t[i]),0<s.length&&(s+="/"),s+=u}return s}function createUrl(e,t){return appendQueryString(createPath(e,t),t)}function appendQueryString(e,t){for(var r in t){var n;t.hasOwnProperty(r)&&void 0!==(n=t[r])&&(e=(e+=0<=e.indexOf("?")?"&":"?")+r+"="+qsValue(n))}return e}function qsValue(e){return null==e?"":"undefined"!=typeof Uint8Array&&e instanceof Uint8Array?bytesToBase64(e):encodeURIComponent(e)||""}function bytesToBase64(e){for(var t,r=(3-e.length%3)%3,n="",o=e.length,s=0,a=0;a<o;a++)s|=e[a]<<(16>>>(t=a%3)&24),2!=t&&e.length-a!=1||(n+=String.fromCharCode(uint6ToB64(s>>>18&63),uint6ToB64(s>>>12&63),uint6ToB64(s>>>6&63),uint6ToB64(63&s)),s=0);return 0==r?n:n.substring(0,n.length-r)+(1==r?"=":"==")}function uint6ToB64(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function _btoa(e){return"function"==typeof btoa?btoa(e):Buffer.from(e).toString("base64")}function _atob(e){return"function"==typeof atob?atob(e):Buffer.from(e,"base64").toString()}function stripQuotes(e){return e&&'"'==e[0]&&'"'==e[e.length]?e.slice(1,-1):e}function tryDecode(t){try{return decodeURIComponent(t)}catch(e){return t}}function parseCookie(e){if(!e)return null;for(var t=null,r=e.split(/; */),n=0;n<r.length;n++){var o,s=splitOnFirst(r[n],"="),a=s[0].trim(),s=1<s.length?tryDecode(stripQuotes(s[1].trim())):null;0==n?t={name:a,value:s,path:"/"}:"httponly"==(o=a.toLowerCase())?t.httpOnly=!0:"secure"==o?t.secure=!0:"expires"==o?(t.expires=new Date(s),"Invalid Date"===t.expires.toString()&&(t.expires=new Date(s.replace(/-/g," ")))):t[a]=s}return t}function normalizeKey(e){return e.toLowerCase().replace(/_/g,"")}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function normalize(e,t){if(isArray(e)){if(!t)return e;for(var r=[],n=0;n<e.length;n++)r[n]=normalize(e[n],t);return r}if("object"!=typeof e)return e;var o,s={};for(o in e)s[normalizeKey(o)]=t?normalize(e[o],t):e[o];return s}function getField(e,t){return null==e||null==t?null:e[t]||e[Object.keys(e).filter(function(e){return normalizeKey(e)===normalizeKey(t)})[0]||""]}function parseResponseStatus(t,r){void 0===r&&(r=null);try{var e=JSON.parse(t);return sanitize(e.ResponseStatus||e.responseStatus)}catch(e){return{message:r||e.message||e,__error:{error:e,json:t}}}}function toFormData(e){if("undefined"!=typeof window){var t,r=new FormData;for(t in e)r.append(t,e[t]);return r}}function toObject(e){var t=this,r={};if(e){if("object"!=typeof e)throw new Error("keys must be an Array of object keys");Array.prototype.slice.call(e).forEach(function(e){t[e]&&(r[e]=t[e])})}return r}function errorResponseSummary(){var e=this.responseStatus||this.ResponseStatus;return null==e||(e=e.ErrorCode?sanitize(e):e).errors&&0!=e.errors.length?void 0:e.message||e.errorCode}function errorResponseExcept(e){var t=this.responseStatus||this.ResponseStatus;if(null!=t){t=t.ErrorCode?sanitize(t):t,e=toVarNames(e);if(e&&null!=t.errors&&0!=t.errors.length){for(var r=e.map(function(e){return(e||"").toLowerCase()}),n=0,o=t.errors;n<o.length;n++){var s=o[n];if(-1!==r.indexOf((s.fieldName||"").toLowerCase()))return}for(var a=0,i=t.errors;a<i.length;a++){s=i[a];if(-1===r.indexOf((s.fieldName||"").toLowerCase()))return s.message||s.errorCode}}return t.message||t.errorCode||void 0}}function errorResponse(t){var e;return null==t?errorResponseSummary.call(this):null!=(e=this.responseStatus||this.ResponseStatus)&&null!=(e=e.ErrorCode?sanitize(e):e).errors&&0!=e.errors.length&&(e=e.errors.find(function(e){return(e.fieldName||"").toLowerCase()==t.toLowerCase()}))?e.message||e.errorCode:void 0}function isDate(e){return e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)}function toDate(e){return e?isDate(e)?e:"/"==e[0]?new Date(parseFloat(/Date\(([^)]+)\)/.exec(e)[1])):new Date(e):null}function toDateFmt(e){return dateFmt(toDate(e))}function padInt(e){return e<10?"0"+e:e}function dateFmt(e){return(e=void 0===e?new Date:e).getFullYear()+"/"+padInt(e.getMonth()+1)+"/"+padInt(e.getDate())}function dateFmtHM(e){return(e=void 0===e?new Date:e).getFullYear()+"/"+padInt(e.getMonth()+1)+"/"+padInt(e.getDate())+" "+padInt(e.getHours())+":"+padInt(e.getMinutes())}function timeFmt12(e){return padInt(((e=void 0===e?new Date:e).getHours()+24)%12||12)+":"+padInt(e.getMinutes())+":"+padInt(e.getSeconds())+" "+(12<e.getHours()?"PM":"AM")}function toLocalISOString(e){return void 0===e&&(e=new Date),"".concat(e.getFullYear(),"-").concat(padInt(e.getMonth()+1),"-").concat(padInt(e.getDate()),"T").concat(padInt(e.getHours()),":").concat(padInt(e.getMinutes()),":").concat(padInt(e.getSeconds()))}function bsAlert(e){return'<div class="alert alert-danger">'+e+"</div>"}function attr(e,t){return e.getAttribute(t)}function sattr(e,t,r){e.setAttribute(t,r)}function rattr(e,t){e.removeAttribute(t)}function createElement(e,t,r){var n={className:"class",htmlFor:"for"},o=document.createElement(e);if(r)for(var s in r)sattr(o,n[s]||s,r[s]);return t&&t.insertAfter&&t.insertAfter.parentNode.insertBefore(o,t.insertAfter.nextSibling),o}function showInvalidInputs(){var e,t,r,n=attr(this,"data-invalid");n&&(e=(r="checkbox"===this.type||"radio"===this.type||hasClass(this,"form-check"))?parent(this,"form-check"):null,r?addClass(e||this.parentElement,"is-invalid form-control"):addClass(this,"is-invalid"),(null!=(r=!(t=this.nextElementSibling)||attr(t,"for")!==this.id&&"SMALL"!==t.tagName?this:r?e||t.parentElement:t)&&r.nextElementSibling&&hasClass(r.nextElementSibling,"invalid-feedback")?r.nextElementSibling:createElement("div",{insertAfter:r},{className:"invalid-feedback"})).innerHTML=n)}function parent(e,t){for(;null!=e&&!hasClass(e,t);)e=e.parentElement;return e}function hasClass(e,t){return!!e&&(e.classList?e.classList.contains(t):-1<(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(" "+t+" "))}function addClass(e,t){var r;e&&(e.classList?(r=e.classList).add.apply(r,t.split(" ")):hasClass(e,t)||(e.className=(e.className+" "+t).trim()))}function remClass(e,t){return e?e.classList?e.classList.remove(t):hasClass(e,t)?e.className=e.className.replace(/(\s|^)someclass(\s|$)/," "):null:null}function $1(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function $$(e,t){return"string"==typeof e?Array.prototype.slice.call((t||document).querySelectorAll(e)):Array.isArray(e)?e:[e]}function on(e,n){$$(e).forEach(function(r){Object.keys(n).forEach(function(e){var t=n[e];"string"==typeof e&&"function"==typeof t&&r.addEventListener(e,t.bind(r))})})}function delaySet(e,t){var t=t&&t.duration||300,r=setTimeout(function(){return e(!0)},t);return function(){clearTimeout(r),e(!1)}}function bootstrap(e){for(var t=(e||document).querySelectorAll("[data-invalid]"),r=0;r<t.length;r++)showInvalidInputs.call(t[r])}function handleEvent(s,e,a){(e=void 0===e?document:e).addEventListener(a,function(e){var t,r,n="data-".concat(a),e=e.target,o=attr(e,n);o||(t=e.closest("[".concat(n,"]")))&&(o=attr(t,n),e=t),o&&(0<=(n=o.indexOf(":"))?(t=o.substring(0,n),n=o.substring(n+1),(r=s[t])&&r.apply(e,n.split(","))):(r=s[o])&&r.apply(e,[].slice.call(arguments)))})}function bindHandlers(t,r,e){void 0===r&&(r=document),(e=void 0===e?null:e)&&e.events?e.events.forEach(function(e){return handleEvent(t,r,e)}):["click","dblclick","change","focus","blur","focusin","focusout","select","keydown","keypress","keyup","hover","toggle","input"].forEach(function(e){r.querySelector("[data-".concat(e,"]"))&&handleEvent(t,r,e)})}function bootstrapForm(t,r){t&&(r.model&&populateForm(t,r.model),t.onsubmit=function(e){return e.preventDefault(),r.type="bootstrap-v4",ajaxSubmit(t,r)})}function applyErrors(e,r,t){var n={overrideMessages:!1,messages:{NotEmpty:"Required",NotNull:"Required",Email:"Invalid email",AlreadyExists:"Already exists"},errorFilter:function(e,t,r){return this.overrideMessages?this.messages[t]||e||splitCase(t):e||splitCase(t)}};if(clearErrors(e),r){r=sanitize(r),addClass(e,"has-errors");var o=t&&"bootstrap-v4"===t.type,n=__assign(__assign({},n),t),s=(t.messages&&(n.overrideMessages=!0),n.errorFilter.bind(n)),t=r.errors,n=e.querySelectorAll.bind(e);if(t&&t.length){var a={},i={};n("input,textarea,select,button").forEach(function(e){var t=e.previousElementSibling,r=e.nextElementSibling,n=("radio"===e.type||"checkbox"===e.type?null:e.id)||attr(e,"name");n&&(n=n.toLowerCase(),a[n]=e,o||(hasClass(t,"help-inline")||hasClass(t,"help-block")?i[n]=t:(hasClass(r,"help-inline")||hasClass(r,"help-block"))&&(i[n]=r)))}),n(".help-inline[data-for],.help-block[data-for]").forEach(function(e){var t=attr(e,"data-for").toLowerCase();i[t]=e});for(var u=0,l=t;u<l.length;u++){var c=l[u],p=(c.fieldName||"").toLowerCase(),f=a[p],h=(f&&(o?("radio"!==(h=attr(f,"type"))&&"checkbox"!==h&&addClass(f,"is-invalid"),sattr(f,"data-invalid",s(c.message,c.errorCode,"field"))):(addClass(f,"error"),addClass(f.parentElement,"has-error"))),i[p]);h&&(addClass(h,"error"),h.innerHTML=s(c.message,c.errorCode,"field"),h.style.display="block")}n("[data-validation-summary]").forEach(function(e){var t=attr(e,"data-validation-summary").split(","),t=errorResponseExcept.call(r,t);t&&(e.innerHTML=bsAlert(t))})}else{var d=s(r.message||splitCase(r.errorCode),r.errorCode,"summary");o?n("[data-validation-summary]").forEach(function(e){return e.innerHTML="<"===d[0]?d:bsAlert(d)}):n(".error-summary").forEach(function(e){e.innerHTML=d(e).style.display="block"})}}}function clearErrors(e){remClass(e,"has-errors");e=e.querySelectorAll.bind(e);e(".error-summary").forEach(function(e){e.innerHTML="",e.style.display="none"}),e("[data-validation-summary]").forEach(function(e){e.innerHTML=""}),e(".error").forEach(function(e){return remClass(e,"error")}),e(".form-check.is-invalid [data-invalid]").forEach(function(e){rattr(e,"data-invalid")}),e(".form-check.is-invalid").forEach(function(e){return remClass(e,"form-control")}),e(".is-invalid").forEach(function(e){remClass(e,"is-invalid"),rattr(e,"data-invalid")}),e(".is-valid").forEach(function(e){return remClass(e,"is-valid")})}function toVarNames(e){return e?isArray(e)?e:e.split(",").map(function(e){return e.trim()}):[]}function formSubmit(e){void 0===e&&(e={});var t,r=this,n=attr(r,"enctype")||Types.UrlEncoded;if(n==Types.MultiPart&&void 0===window.FormData)throw new Error("FormData Type is needed to send '".concat(Types.MultiPart,"' Content Types"));try{t=serializeForm(r,n)}catch(e){throw new Error("".concat(e.message||e))}var o=new Headers,n=(o.set("Accept",Types.Json),o.set("Content-Type",n),{method:attr(r,"method")||"POST",credentials:"include",mode:"cors",headers:o,body:t});return e.requestFilter&&e.requestFilter(n),fetch(new Request(e.url||attr(r,"action"),n)).catch(function(e){throw new Error("Network is unreachable (".concat(e.message||e,")"))}).then(function(t){return e.responseFilter&&e.responseFilter(t),t.ok?(handleHeaderBehaviors(r,t),fromResponse(t)):t.json().catch(function(e){throw new Error("The request failed with "+(t.statusText||t.status))}).then(function(e){throw Object.assign(new ErrorResponse,sanitize(e))})})}function handleHeaderBehaviors(e,t){var r=t.headers.get("X-Location"),r=(r&&(location.href=r),t.headers.get("X-Trigger"));r&&triggerEvent(e,0<=(t=r.indexOf(":"))?r.substring(0,t):r,(e=0<=t?r.substring(t+1):null)?[e]:[])}function ajaxSubmit(n,o){var s="bootstrap-v4"===(o=void 0===o?{}:o).type;clearErrors(n);try{if(o.validate&&!1===o.validate.call(n))return!1}catch(e){return!1}var a=n.querySelectorAll.bind(n),e=(addClass(n,"loading"),null==o.onSubmitDisable?"[type=submit]":o.onSubmitDisable),t=null!=e&&""!=e;function r(e,t){var r;(t=void 0===t?null:t)?applyErrors(n,t.ResponseStatus||t.responseStatus,__assign({},o)):e&&(addClass(n,"has-errors"),(r=a(".error-summary")[0])&&(r.innerHTML=e),s)&&(r=a("[data-validation-summary]")[0])&&(r.innerHTML=bsAlert(e)),o.error&&o.error.call(n,t),s&&a("[data-invalid]").forEach(function(e){return showInvalidInputs.call(e)})}return t&&a(e).forEach(function(e){sattr(e,"disabled","disabled")}),(o.submit||formSubmit).call(n,o).then(function(e){return o.success&&o.success.call(n,e),!1}).catch(function(e){e.responseStatus?r(null,e):r("".concat(e.message||e),null)}).finally(function(){remClass(n,"loading"),t&&a(e).forEach(function(e){rattr(e,"disabled")}),o.complete&&o.complete.call(n)})}function fromResponse(e){var t,r=e.headers.get("content-type"),r=r&&-1!==r.indexOf(Types.Json);return!r&&("0"===(t=e.headers.get("content-length"))||null==t&&!r)?null:e.json()}function serializeForm(e,t){return(t=void 0===t?null:t)===Types.MultiPart?new FormData(e):t==Types.Json?JSON.stringify(serializeToObject(e)):serializeToUrlEncoded(e)}function formEntries(e,t,r){for(var n,o=e,s=o.elements.length,a=0;a<s;a++)if((n=o.elements[a]).name&&!n.disabled&&"file"!=n.type&&"reset"!=n.type&&"submit"!=n.type&&"button"!=n.type)if("select-multiple"==n.type)for(var i=o.elements[a].options.length-1;0<=i;i--)n.options[i].selected&&r(t,n.name,n.options[i].value);else("checkbox"!=n.type&&"radio"!=n.type||n.checked)&&r(t,n.name,n.value);return t}function serializeToObject(e){return formEntries(e,{},function(e,t,r){return e[t]=r})}function serializeToUrlEncoded(e){return formEntries(e,[],function(e,t,r){return"string"==typeof r?e.push(encodeURIComponent(t)+"="+encodeURIComponent(r)):null}).join("&").replace(/%20/g,"+")}function serializeToFormData(e){return formEntries(e,new FormData,function(e,t,r){return e.append(t,r)})}function sanitizeFormData(e){for(var t=0,r=e;t<r.length;t++){var n=r[t],o=n[0],n=n[1];"object"==typeof n&&0===n.size&&e.delete(o)}return e}function triggerEvent(e,t,r){var n;void 0===r&&(r=null),document.createEvent?((n=document.createEvent("click"==t||t.startsWith("mouse")?"MouseEvents":"HTMLEvents")).initEvent(t,!0,!0),n.data=r,e.dispatchEvent(n)):(n=document.createEventObject(),e.fireEvent("on"+t,n))}function populateForm(e,t){if(t){var r,n;for(r in t){var o=t[r],s=(null==o&&(o=""),e.elements.namedItem(r)||e.elements.namedItem((n=r)&&(n[0]===n[0].toUpperCase()?toCamelCase(n):n[0]===n[0].toLowerCase()?toPascalCase(n):n))),a=s;if(s)switch(a.type||s[0].type){case"radio":case"checkbox":for(var i=s.length,u=0;u<i;u++)s[u].checked=-1<o.indexOf(s[u].value);break;case"select-multiple":for(var l=isArray(o)?o:[o],c=s,u=0;u<c.options.length;u++)c.options[u].selected=-1<l.indexOf(c.options[u].value);break;case"select":case"select-one":a.value=o.toString()||o;break;case"date":var p=toDate(o);p&&(a.value=p.toISOString().split("T")[0]);break;default:a.value=o}}}}function trimEnd(e,t){for(var r=e.length;0<r&&e[r-1]===t;)--r;return r<e.length?e.substring(0,r):e}function safeVarName(e){return e.replace(/[\W]+/g,"")}function pick(e,t){var r,n={};for(r in e)e.hasOwnProperty(r)&&0<=t.indexOf(r)&&(n[r]=e[r]);return n}function omit(e,t){var r,n={};for(r in e)e.hasOwnProperty(r)&&t.indexOf(r)<0&&(n[r]=e[r]);return n}function apply(e,t){return t(e),e}function each(e,r,t){return e.reduce(function(e,t){return r(e,t),e},t||{})}function resolve(e,t){e="function"==typeof e?e():e;return"function"==typeof t?t(e):e}function mapGet(e,t){var r;return e&&t?e[t]||("object"==typeof e&&(r=t.toLowerCase(),t=Object.keys(e).find(function(e){return e.toLowerCase()===r}))?e[t]:null):null}function apiValue(e){return null==e?"":"string"==typeof e?"/Date("===e.substring(0,6)?toDate(e):e.trim():e}function apiValueFmt(e){e=apiValue(e);return(null!=e?isDate(e)?dateFmt(e):e:null)||""}function activeClassNav(e,t){return null!=e.href&&(e.exact||t.length<=1?trimEnd(t,"/").toLowerCase()===trimEnd(e.href,"/").toLowerCase():trimEnd(t,"/").toLowerCase().startsWith(trimEnd(e.href,"/").toLowerCase()))?"active":null}function activeClass(e,t,r){return null!=e&&(r||t.length<=1?trimEnd(t,"/").toLowerCase()===trimEnd(e,"/").toLowerCase():trimEnd(t,"/").toLowerCase().startsWith(trimEnd(e,"/").toLowerCase()))?"active":null}function bootstrapColors(){return["primary","secondary","success","info","warning","danger","light","dark"]}function btnColorClass(e){for(var t=0,r=bootstrapColors();t<r.length;t++){var n=r[t];if(e[n])return"btn-"+n;if(e["outline-"+n])return"btn-outline-"+n}return null}function bootstrapSizes(){return["xs","sm","md","lg"]}function btnSizeClass(e){for(var t=0,r=bootstrapSizes();t<r.length;t++){var n=r[t];if(e[n])return"btn-"+n}return null}function btnClasses(e){var t=[],r=btnColorClass(e),r=(r&&t.push(r),btnSizeClass(e));return r&&t.push(r),e.block&&t.push("btn-block"),t}exports.humanify=humanify,exports.queryString=queryString,exports.combinePaths=combinePaths,exports.createPath=createPath,exports.createUrl=createUrl,exports.appendQueryString=appendQueryString,exports.bytesToBase64=bytesToBase64,JsonServiceClient.toBase64=function(e){return _btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(new Number("0x"+t).valueOf())}))},exports.stripQuotes=stripQuotes,exports.tryDecode=tryDecode,exports.parseCookie=parseCookie,exports.normalizeKey=normalizeKey,exports.normalize=normalize,exports.getField=getField,exports.parseResponseStatus=parseResponseStatus,exports.toFormData=toFormData,exports.toObject=toObject,exports.errorResponseSummary=errorResponseSummary,exports.errorResponseExcept=errorResponseExcept,exports.errorResponse=errorResponse,exports.isDate=isDate,exports.toDate=toDate,exports.toDateFmt=toDateFmt,exports.padInt=padInt,exports.dateFmt=dateFmt,exports.dateFmtHM=dateFmtHM,exports.timeFmt12=timeFmt12,exports.toLocalISOString=toLocalISOString,exports.createElement=createElement,exports.$1=$1,exports.$$=$$,exports.on=on,exports.delaySet=delaySet,exports.bootstrap=bootstrap,"undefined"!=typeof window&&void 0!==window.Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})),exports.bindHandlers=bindHandlers,exports.bootstrapForm=bootstrapForm,!function(e){e.MultiPart="multipart/form-data",e.UrlEncoded="application/x-www-form-urlencoded",e.Json="application/json"}(Types=Types||{}),exports.toVarNames=toVarNames,exports.formSubmit=formSubmit,exports.ajaxSubmit=ajaxSubmit,exports.serializeForm=serializeForm,exports.serializeToObject=serializeToObject,exports.serializeToUrlEncoded=serializeToUrlEncoded,exports.serializeToFormData=serializeToFormData,exports.sanitizeFormData=sanitizeFormData,exports.triggerEvent=triggerEvent,exports.populateForm=populateForm,exports.trimEnd=trimEnd,exports.safeVarName=safeVarName,exports.pick=pick,exports.omit=omit,exports.apply=apply,exports.each=each,exports.resolve=resolve,exports.mapGet=mapGet,exports.apiValue=apiValue,exports.apiValueFmt=apiValueFmt,exports.activeClassNav=activeClassNav,exports.activeClass=activeClass,exports.BootstrapColors=bootstrapColors(),exports.btnColorClass=btnColorClass,exports.BootstrapSizes=bootstrapSizes(),exports.btnSizeClass=btnSizeClass,exports.btnClasses=btnClasses;var NavDefaults=function(){function r(){}return r.create=function(){return new NavOptions},r.forNav=function(e){return e||r.create()},r.overrideDefaults=function(e,t){return null==e?t:((e=Object.assign({},e)).navClass===r.navClass&&null!=t.navClass&&(e.navClass=t.navClass),e.navItemClass===r.navItemClass&&null!=t.navItemClass&&(e.navItemClass=t.navItemClass),e.navLinkClass===r.navLinkClass&&null!=t.navLinkClass&&(e.navLinkClass=t.navLinkClass),e.childNavItemClass===r.childNavItemClass&&null!=t.childNavItemClass&&(e.childNavItemClass=t.childNavItemClass),e.childNavLinkClass===r.childNavLinkClass&&null!=t.childNavLinkClass&&(e.childNavLinkClass=t.childNavLinkClass),e.childNavMenuClass===r.childNavMenuClass&&null!=t.childNavMenuClass&&(e.childNavMenuClass=t.childNavMenuClass),e.childNavMenuItemClass===r.childNavMenuItemClass&&null!=t.childNavMenuItemClass&&(e.childNavMenuItemClass=t.childNavMenuItemClass),e)},r.showNav=function(e,t){return null==t||0===t.length?null==e.show:!(null!=e.show&&t.indexOf(e.show)<0||null!=e.hide&&0<=t.indexOf(e.hide))},r.navClass="nav",r.navItemClass="nav-item",r.navLinkClass="nav-link",r.childNavItemClass="nav-item dropdown",r.childNavLinkClass="nav-link dropdown-toggle",r.childNavMenuClass="dropdown-menu",r.childNavMenuItemClass="dropdown-item",r}(),NavLinkDefaults=(exports.NavDefaults=NavDefaults,function(){function e(){}return e.forNavLink=function(e){return e||NavDefaults.create()},e}()),NavbarDefaults=(exports.NavLinkDefaults=NavLinkDefaults,function(){function t(){}return t.create=function(){return new NavOptions({navClass:t.navClass})},t.forNavbar=function(e){return NavDefaults.overrideDefaults(e,t.create())},t.navClass="navbar-nav",t}()),NavButtonGroupDefaults=(exports.NavbarDefaults=NavbarDefaults,function(){function t(){}return t.create=function(){return new NavOptions({navClass:t.navClass,navItemClass:t.navItemClass})},t.forNavButtonGroup=function(e){return NavDefaults.overrideDefaults(e,t.create())},t.navClass="btn-group",t.navItemClass="btn btn-primary",t}()),LinkButtonDefaults=(exports.NavButtonGroupDefaults=NavButtonGroupDefaults,function(){function t(){}return t.create=function(){return new NavOptions({navItemClass:t.navItemClass})},t.forLinkButton=function(e){return NavDefaults.overrideDefaults(e||null,t.create())},t.navItemClass="btn",t}()),UserAttributes=(exports.LinkButtonDefaults=LinkButtonDefaults,function(){function e(){}return e.fromSession=function(e){var t=[];return null!=e&&(t.push("auth"),e.roles&&t.push.apply(t,e.roles.map(function(e){return"role:"+e})),e.permissions)&&t.push.apply(t,e.permissions.map(function(e){return"perm:"+e})),t},e}()),NavOptions=(exports.UserAttributes=UserAttributes,function(){function r(e){this.attributes=[],this.navClass=NavDefaults.navClass,this.navItemClass=NavDefaults.navItemClass,this.navLinkClass=NavDefaults.navLinkClass,this.childNavItemClass=NavDefaults.childNavItemClass,this.childNavLinkClass=NavDefaults.childNavLinkClass,this.childNavMenuClass=NavDefaults.childNavMenuClass,this.childNavMenuItemClass=NavDefaults.childNavMenuItemClass,Object.assign(this,e)}return r.fromSession=function(e,t){return(t=t||new r).attributes=UserAttributes.fromSession(e),t},r}());function classNames(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=[],n=0;n<e.length;n++){var o=e[n];if(o){var s=typeof o;if("string"==s||"number"==s)r.push(o);else if(Array.isArray(o)&&o.length){var a=classNames.apply(null,o);a&&r.push(a)}else if("object"==s)for(var i=0,u=Object.keys(o);i<u.length;i++){var l=u[i];o[l]&&r.push(l)}}}return r.join(" ")}function fromXsdDuration(e){var t=0,r=0,n=0,o=0,s=0,e=splitOnFirst(e.substring(1),"T"),a=2==e.length,i=splitOnFirst(e[0],"D");return 2==i.length&&(t=parseInt(i[0],10)||0),a&&(2==(i=splitOnFirst(e[1],"H")).length&&(r=parseInt(i[0],10)||0),2==(a=splitOnFirst(i[i.length-1],"M")).length&&(n=parseInt(a[0],10)||0),2==(e=splitOnFirst(a[a.length-1],"S")).length&&(s=parseFloat(e[0])),s-=o=0|s),24*t*60*60+60*r*60+60*n+o+s}function timeFmt(e,t){var r,n=0|e,o=n,s=60<=o?o%60:o,a=60<=(o/=60)?o%60:o,i=24<=(o/=60)?o%24:o,o=o/24,e=e-n+s,n=t?"P":"";return t?(0<(0|o)&&(n+="".concat(0|o,"D")),(0==o||0<i+a+s+e)&&(n+="T",0<(0|i)&&(n+="".concat(0|i,"H")),0<(0|a)&&(n+="".concat(0|a,"M")),0<e?(r=trimEnd(trimEnd(r=e.toFixed(7),"0"),"."),n+="".concat(r,"S")):2==n.length&&(n+="0S"))):(0<(0|o)&&(n+="".concat(0|o,":")),n+="".concat(padInt(0|i),":").concat(padInt(0|a),":"),0<e?(r=trimEnd(trimEnd(r=e.toFixed(7),"0"),"."),n+=(10<=e?"":"0").concat(r)):n+="00"),n}function toXsdDuration(e){return timeFmt(e,!0)}function toTimeSpanFmt(e){return timeFmt(e,!1)}function flatMap(r,e){return e.reduce(function(e,t){return e.concat(r(t))},[])}function uniq(e){return Array.from(new Set(e)).sort(function(e,t){return t<e?1:-1})}function enc(e){return null==e?null:"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):"".concat(e)}function htmlAttrs(t){var r=[];return Object.keys(t).forEach(function(e){0<r.length&&r.push(" "),r.push(e),r.push('="'),r.push(enc(t[e])),r.push('"')}),r.join("")}function indexOfAny(e,t){for(var r=0,n=t.length;r<n;r++){var o=e.indexOf(t[r]);if(0<=o)return o}return-1}function isNullOrEmpty(e){return null==e||""===e}function fromDateTime(e){return toDate(e)}function toDateTime(e){return"/Date(".concat(e.getTime(),")/")}function fromTimeSpan(e){return e}function toTimeSpan(e){return e}function fromGuid(e){return e}function toGuid(e){return e}function fromByteArray(e){for(var t=_atob(e),r=t.length,n=new Uint8Array(r),o=0;o<r;o++)n[o]=t.charCodeAt(o);return n}function toByteArray(e){return _btoa(String.fromCharCode.apply(null,e))}function toBase64String(e){return JsonServiceClient.toBase64(e)}exports.NavOptions=NavOptions,exports.classNames=classNames,exports.fromXsdDuration=fromXsdDuration,exports.toXsdDuration=toXsdDuration,exports.toTimeSpanFmt=toTimeSpanFmt,exports.flatMap=flatMap,exports.uniq=uniq,exports.enc=enc,exports.htmlAttrs=htmlAttrs,exports.indexOfAny=indexOfAny,exports.isNullOrEmpty=isNullOrEmpty,exports.fromDateTime=fromDateTime,exports.toDateTime=toDateTime,exports.fromTimeSpan=fromTimeSpan,exports.toTimeSpan=toTimeSpan,exports.fromGuid=fromGuid,exports.toGuid=toGuid,exports.fromByteArray=fromByteArray,exports.toByteArray=toByteArray,exports.toBase64String=toBase64String;var StringBuffer=function(){function e(e){for(var t=1;t<arguments.length;t++)t-1,0;this.buffer_="",null!=e&&this.append.apply(this,arguments)}return e.prototype.set=function(e){this.buffer_=""+e},e.prototype.append=function(e,t){for(var r=2;r<arguments.length;r++)r-2,0;if(this.buffer_+=String(e),null!=t)for(var n=1;n<arguments.length;n++)this.buffer_+=arguments[n];return this},e.prototype.clear=function(){this.buffer_=""},e.prototype.getLength=function(){return this.buffer_.length},e.prototype.toString=function(){return this.buffer_},e}(),JSV=(exports.StringBuffer=StringBuffer,function(){function s(){}return s.encodeString=function(e){return null==e?null:""===e?'""':0<=indexOfAny(e=e.indexOf('"')?e.replace(/"/g,'""'):e,s.ESCAPE_CHARS)?'"'+e+'"':e},s.encodeArray=function(e){for(var t,r=new StringBuffer,n=0,o=e.length;n<o;n++)isNullOrEmpty(t=e[n])||"function"==typeof t||(0<r.getLength()&&r.append(","),r.append(s.stringify(t)));return"[".concat(r.toString(),"]")},s.encodeObject=function(e){var t,r,n=new StringBuffer;for(r in e)t=e[r],e.hasOwnProperty(r)&&!isNullOrEmpty(t)&&"function"!=typeof t&&(0<n.getLength()&&n.append(","),n.append(s.encodeString(r)),n.append(":"),n.append(s.stringify(t)));return"{".concat(n.toString(),"}")},s.stringify=function(e){if(null==e)return null;var t,r=typeof e;if("function"==r||"symbol"==r)return null;if("object"==r)return 0<=(t=e.constructor.toString().toLowerCase()).indexOf("string")?s.encodeString(e):0<=t.indexOf("boolean")?e?"true":"false":0<=t.indexOf("number")?e:0<=t.indexOf("date")?s.encodeString(toLocalISOString(e)):0<=t.indexOf("array")?s.encodeArray(e):s.encodeObject(e);switch(r){case"string":return s.encodeString(e);case"boolean":return e?"true":"false";default:return e}},s.ESCAPE_CHARS=['"',":",",","{","}","[","]","\r","\n"],s}());function uniqueKeys(e){var t=[];return e.forEach(function(e){return Object.keys(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}),t}function alignLeft(e,t,r){return void 0===r&&(r=" "),t<0?"":t+1-e.length<=0?e:r+e+r.repeat(t+1-e.length)}function alignCenter(e,t,r){var n,o;return void 0===r&&(r=" "),t<0?"":(o=(e=e||"").length,n=Math.floor(t/2-o/2),o=Math.abs(o%2-t%2),r.repeat(n+1)+e+r.repeat(n+1+o))}function alignRight(e,t,r){return void 0===r&&(r=" "),t<0?"":t+1-e.length<=0?e:r.repeat(t+1-e.length)+e+r}function alignAuto(e,t,r){void 0===r&&(r=" ");var n="".concat(e);return n.length<=t?("number"==typeof e?alignRight:alignLeft)(n,t,r):n}function EventBus(){var e=createBus(),t=e.subscribe,e=e.publish;this.subscribe=t,this.publish=e}function createBus(){var n={};return{subscribe:function(e,t){var r=Symbol("id");return n[e]||(n[e]={}),n[e][r]=t,{unsubscribe:function(){delete n[e][r],0===Object.getOwnPropertySymbols(n[e]).length&&delete n[e]}}},publish:function(t,r){n[t]&&Object.getOwnPropertySymbols(n[t]).forEach(function(e){return n[t][e](r)})}}}exports.JSV=JSV,exports.uniqueKeys=uniqueKeys,exports.alignLeft=alignLeft,exports.alignCenter=alignCenter,exports.alignRight=alignRight,exports.alignAuto=alignAuto,exports.EventBus=EventBus,exports.createBus=createBus;var Inspect=function(){function Inspect(){}return Inspect.vars=function(obj){var inspectVarsPath="object"==typeof process&&process.env.INSPECT_VARS;if(inspectVarsPath&&obj){var R=null;try{var isNode="object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node;if(!isNode)return;R=eval("require")}catch(e){return}var fs=R("fs"),varsPath=inspectVarsPath.replace(/\\/g,"/"),dir;0<=varsPath.indexOf("/")&&(dir=R("path").dirname(varsPath),fs.existsSync(dir)||fs.mkdirSync(dir)),fs.writeFileSync(varsPath,JSON.stringify(obj))}},Inspect.dump=function(e){return JSON.stringify(e,null,4).replace(/"/g,"")},Inspect.printDump=function(e){console.log(Inspect.dump(e))},Inspect.dumpTable=function(e){var n=e,o=uniqueKeys(n),s={},e=(o.forEach(function(t){var r=t.length;n.forEach(function(e){var e=e[t];null!=e&&(e="".concat(e).length,r<e)&&(r=e)}),s[t]=r}),Object.keys(s).length),e=Object.keys(s).map(function(e){return s[e]}).reduce(function(e,t){return e+t},0)+2*e+(e+1),a=[],t=(a.push("+".concat("-".repeat(e-2),"+")),"|");return o.forEach(function(e){return t+=alignCenter(e,s[e])+"|"}),a.push(t),a.push("|".concat("-".repeat(e-2),"|")),n.forEach(function(t){var r="|";o.forEach(function(e){return r+=alignAuto(t[e],s[e])+"|"}),a.push(r)}),a.push("+".concat("-".repeat(e-2),"+")),a.join("\n")},Inspect.printDumpTable=function(e){console.log(Inspect.dumpTable(e))},Inspect}();exports.Inspect=Inspect});