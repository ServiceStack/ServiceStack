var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)};!function(e){if("object"==typeof module&&"object"==typeof module.exports){var t=e(require,exports);void 0!==t&&(module.exports=t)}else"function"==typeof define&&define.amd?define(["require","exports"],e):"undefined"!=typeof window&&e(window.require||function(){},window["@servicestack/client"]={})}(function(require,exports){"use strict";function nodeRequire(){try{var isNode="object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node;return isNode?eval("require"):null}catch(e){return null}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Inspect=exports.alignAuto=exports.alignRight=exports.alignCenter=exports.alignLeft=exports.uniqueKeys=exports.JSV=exports.StringBuffer=exports.toBase64String=exports.toByteArray=exports.fromByteArray=exports.toGuid=exports.fromGuid=exports.toTimeSpan=exports.fromTimeSpan=exports.toDateTime=exports.fromDateTime=exports.isNullOrEmpty=exports.indexOfAny=exports.htmlAttrs=exports.enc=exports.uniq=exports.flatMap=exports.toTimeSpanFmt=exports.toXsdDuration=exports.fromXsdDuration=exports.classNames=exports.NavOptions=exports.UserAttributes=exports.LinkButtonDefaults=exports.NavButtonGroupDefaults=exports.NavbarDefaults=exports.NavLinkDefaults=exports.NavDefaults=exports.btnClasses=exports.btnSizeClass=exports.BootstrapSizes=exports.btnColorClass=exports.BootstrapColors=exports.activeClass=exports.activeClassNav=exports.omit=exports.pick=exports.safeVarName=exports.trimEnd=exports.populateForm=exports.triggerEvent=exports.serializeToFormData=exports.serializeToUrlEncoded=exports.serializeToObject=exports.serializeForm=exports.ajaxSubmit=exports.formSubmit=exports.toVarNames=exports.bootstrapForm=exports.bindHandlers=exports.bootstrap=exports.createElement=exports.toLocalISOString=exports.timeFmt12=exports.dateFmtHM=exports.dateFmt=exports.padInt=exports.toDateFmt=exports.toDate=exports.errorResponse=exports.errorResponseExcept=exports.errorResponseSummary=exports.toObject=exports.toFormData=exports.parseResponseStatus=exports.getField=exports.normalize=exports.normalizeKey=exports.parseCookie=exports.tryDecode=exports.stripQuotes=exports.bytesToBase64=exports.appendQueryString=exports.createUrl=exports.createPath=exports.combinePaths=exports.queryString=exports.humanize=exports.onlyProps=exports.chop=exports.lastRightPart=exports.lastLeftPart=exports.rightPart=exports.leftPart=exports.splitOnLast=exports.splitOnFirst=exports.css=exports.nameOf=exports.sanitize=exports.toPascalCase=exports.toCamelCase=exports.isFormData=exports.JsonServiceClient=exports.GetAccessTokenResponse=exports.HttpMethods=exports.ServerEventUser=exports.GetEventSubscribers=exports.UpdateEventSubscriberResponse=exports.UpdateEventSubscriber=exports.ServerEventReceiver=exports.ServerEventsClient=exports.ReadyState=exports.SingletonInstanceResolver=exports.NewInstanceResolver=exports.GetNavItemsResponse=exports.GetNavItems=exports.NavItem=exports.ErrorResponse=exports.ResponseError=exports.ResponseStatus=void 0;var R=nodeRequire();R&&R("cross-fetch/polyfill");var ResponseStatus=function(e){Object.assign(this,e)};exports.ResponseStatus=ResponseStatus;var ResponseError=function(e){Object.assign(this,e)};exports.ResponseError=ResponseError;var ErrorResponse=function(e){Object.assign(this,e)};exports.ErrorResponse=ErrorResponse;var NavItem=function(e){Object.assign(this,e)};exports.NavItem=NavItem;var GetNavItems=(q.prototype.createResponse=function(){return new GetNavItemsResponse},q.prototype.getTypeName=function(){return"GetNavItems"},q);function q(e){Object.assign(this,e)}exports.GetNavItems=GetNavItems;var GetNavItemsResponse=function(e){Object.assign(this,e)};exports.GetNavItemsResponse=GetNavItemsResponse;var NewInstanceResolver=(u.prototype.tryResolve=function(e){return new e},u);function u(){}exports.NewInstanceResolver=NewInstanceResolver;var SingletonInstanceResolver=(w.prototype.tryResolve=function(e){return e.instance||(e.instance=new e)},w),ReadyState,z;function w(){}function eventMessageType(e){switch(e){case"onConnect":return"ServerEventConnect";case"onHeartbeat":return"ServerEventHeartbeat";case"onJoin":return"ServerEventJoin";case"onLeave":return"ServerEventLeave";case"onUpdate":return"ServerEventUpdate"}return null}exports.SingletonInstanceResolver=SingletonInstanceResolver,z=ReadyState=exports.ReadyState||(exports.ReadyState={}),z[z.CONNECTING=0]="CONNECTING",z[z.OPEN=1]="OPEN",z[z.CLOSED=2]="CLOSED";var ServerEventsClient=(A.prototype.getEventSourceOptions=function(){return{withCredentials:this.withCredentials}},A.prototype.reconnectServerEvents=function(t){var r=this;if(void 0===t&&(t={}),!this.stopped){t.error&&this.onError(t.error);var n=this.eventSource,e=t.url||this.eventStreamUri||n.url;null!=this.options.resolveStreamUrl&&(e=this.options.resolveStreamUrl(e));var s=this.EventSource?new this.EventSource(e,this.getEventSourceOptions()):new EventSource(e,this.getEventSourceOptions());s.addEventListener("error",function(e){return(t.onerror||n.onerror||r.onError)(e)}),s.addEventListener("message",t.onmessage||n.onmessage||this.onMessage);var o=this.options.onReconnect;return null!=o&&o.call(s,t.error),n.removeEventListener&&(n.removeEventListener("error",this.onError),n.removeEventListener("message",this.onMessage)),n.close(),this.eventSource=s}},A.prototype.start=function(){var t=this;if(this.stopped=!1,null==this.eventSource||this.eventSource.readyState===EventSource.CLOSED){var e=this.eventStreamUri;null!=this.options.resolveStreamUrl&&(e=this.options.resolveStreamUrl(e)),this.eventSource=this.EventSource?new this.EventSource(e,this.getEventSourceOptions()):new EventSource(e,this.getEventSourceOptions()),this.eventSource.addEventListener("error",this.onError),this.eventSource.addEventListener("message",function(e){return t.onMessage(e)})}return this},A.prototype.stop=function(){this.stopped=!0,this.eventSource&&this.eventSource.close();var e=this.options;e&&e.heartbeat&&clearInterval(e.heartbeat);var t=this.connectionInfo;return null==t||null==t.unRegisterUrl?new Promise(function(e,t){return e()}):(this.connectionInfo=null,fetch(new Request(t.unRegisterUrl,{method:"POST",mode:"cors",credentials:this.serviceClient.credentials})).then(function(e){if(!e.ok)throw new Error(e.status+" - "+e.statusText)}).catch(this.onError))},A.prototype.invokeReceiver=function(e,t,r,n,s){if(e)if("function"==typeof e&&(e=this.resolver.tryResolve(e)),t=t.replace("-",""),e.client=this,e.request=n,"function"==typeof e[t])e[t].call(r||e,n.body,n);else if(t in e)e[t]=n.body;else{var o=Object.getOwnPropertyDescriptor(e,t);if(null!=o)return void(o.set?o.set(n.body):o.writable&&(e[t]=n.body));var a=t.toLowerCase();for(var i in e)if(i.toLowerCase()==a)return void("function"==typeof e[i]?e[i].call(r||e,n.body,n):e[i]=n.body);var l=e.noSuchMethod;"function"==typeof l&&l.call(r||e,n.target,n)}},A.prototype.hasConnected=function(){return null!=this.connectionInfo},A.prototype.registerHandler=function(e,t){return this.options.handlers||(this.options.handlers={}),this.options.handlers[e]=t,this},A.prototype.setResolver=function(e){return this.options.resolver=e,this},A.prototype.registerReceiver=function(e){return this.registerNamedReceiver("cmd",e)},A.prototype.registerNamedReceiver=function(e,t){return this.options.receivers||(this.options.receivers={}),this.options.receivers[e]=t,this},A.prototype.unregisterReceiver=function(e){return void 0===e&&(e="cmd"),this.options.receivers&&delete this.options.receivers[e],this},A.prototype.updateChannels=function(e){this.channels=e;var t=null!=this.eventSource?this.eventSource.url:this.eventStreamUri;this.eventStreamUri=t.substring(0,Math.min(t.indexOf("?"),t.length))+"?channels="+e.join(",")+"&t="+(new Date).getTime()},A.prototype.update=function(e,t){var r="string"==typeof e?e.split(","):e,n="string"==typeof t?t.split(","):t,s=[];for(var o in this.channels){var a=this.channels[o];null!=n&&-1!==n.indexOf(a)||s.push(a)}if(r)for(var o in r)a=r[o],-1===s.indexOf(a)&&s.push(a);this.updateChannels(s)},A.prototype.addListener=function(e,t){return(this.listeners[e]||(this.listeners[e]=[])).push(t),this},A.prototype.removeListener=function(e,t){var r=this.listeners[e];if(r){var n=r.indexOf(t);0<=n&&r.splice(n,1)}return this},A.prototype.raiseEvent=function(e,t){var r=this,n=this.listeners[e];n&&n.forEach(function(e){try{e(t)}catch(e){r.onError(e)}})},A.prototype.getConnectionInfo=function(){if(null==this.connectionInfo)throw"Not Connected";return this.connectionInfo},A.prototype.getSubscriptionId=function(){return this.getConnectionInfo().id},A.prototype.updateSubscriber=function(t){var r=this;return null==t.id&&(t.id=this.getSubscriptionId()),this.serviceClient.post(t).then(function(e){r.update(t.subscribeChannels,t.unsubscribeChannels)}).catch(this.onError)},A.prototype.subscribeToChannels=function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=new UpdateEventSubscriber;return n.id=this.getSubscriptionId(),n.subscribeChannels=r,this.serviceClient.post(n).then(function(e){t.update(r,null)}).catch(this.onError)},A.prototype.unsubscribeFromChannels=function(){for(var t=this,r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=new UpdateEventSubscriber;return n.id=this.getSubscriptionId(),n.unsubscribeChannels=r,this.serviceClient.post(n).then(function(e){t.update(null,r)}).catch(this.onError)},A.prototype.getChannelSubscribers=function(){var t=this,e=new GetEventSubscribers;return e.channels=this.channels,this.serviceClient.get(e).then(function(e){return e.map(function(e){return t.toServerEventUser(e)})}).catch(function(e){return t.onError(e),[]})},A.prototype.toServerEventUser=function(e){var t=e.channels,r=new ServerEventUser;for(var n in r.userId=e.userId,r.displayName=e.displayName,r.profileUrl=e.profileUrl,r.channels=t?t.split(","):null,e)"userId"!=n&&"displayName"!=n&&"profileUrl"!=n&&"channels"!=n&&(null==r.meta&&(r.meta={}),r.meta[n]=e[n]);return r},A.UnknownChannel="*",A);function A(e,t,r,n){var w=this;if(void 0===r&&(r={}),void 0===n&&(n=null),this.channels=t,this.options=r,this.eventSource=n,this.onMessage=function(e){if("undefined"==typeof document){var t=e.data?e.data.indexOf("\n"):-1;if(0<=t){var r=e.data,n=e.lastEventId,s=Object.assign({},{lastEventId:n,data:r.substring(0,t)}),o=Object.assign({},{lastEventId:n,data:r.substring(t+1)});return w._onMessage(s),void w._onMessage(o)}}w._onMessage(e)},this._onMessage=function(e){if(!w.stopped){var t=w.options;if(void 0===r)var r={querySelectorAll:function(e){return[]}};var n=r.querySelectorAll.bind(r),s=splitOnFirst(e.data," "),o=null,a=s[0],i=splitOnFirst(a,"@");1<i.length&&(o=i[0],a=i[1]);var l=s[1],u=null;try{u=l?JSON.parse(l):null}catch(e){}if((s=splitOnFirst(a,".")).length<=1)throw"invalid selector format: "+a;var c=s[0],p=s[1].replace(new RegExp("%20","g")," "),f=splitOnFirst(p,"$"),h=f[0],d=f[1],v=d&&n(d),m=v&&v[0],b={eventId:parseInt(e.lastEventId),data:e.data,type:eventMessageType(h)||"ServerEventMessage",channel:o,selector:a,json:l,body:u,op:c,target:f[0],cssSelector:d,meta:{}},g="object"==typeof u?Object.assign({},b,u):b;if(!t.validate||!1!==t.validate(b)){var y=new Headers;if(y.set("Content-Type","text/plain"),"cmd"===c)if("onConnect"===h){if(w.connectionInfo=g,"string"==typeof u.heartbeatIntervalMs&&(w.connectionInfo.heartbeatIntervalMs=parseInt(u.heartbeatIntervalMs)),"string"==typeof u.idleTimeoutMs&&(w.connectionInfo.idleTimeoutMs=parseInt(u.idleTimeoutMs)),Object.assign(t,u),(S=t.handlers.onConnect)&&(S.call(m||r.body,w.connectionInfo,b),w.stopped))return;t.heartbeatUrl&&(t.heartbeat&&clearInterval(t.heartbeat),t.heartbeat=setInterval(function(){if(w.eventSource.readyState===EventSource.CLOSED){clearInterval(t.heartbeat);var e=t.handlers.onStop;return null!=e&&e.apply(w.eventSource),void w.reconnectServerEvents({error:new Error("EventSource is CLOSED")})}fetch(new Request(t.heartbeatUrl,{method:"POST",mode:"cors",headers:y,credentials:w.serviceClient.credentials})).then(function(e){if(!e.ok)throw new Error(e.status+" - "+e.statusText)}).catch(function(e){return w.reconnectServerEvents({error:e})})},w.connectionInfo&&w.connectionInfo.heartbeatIntervalMs||t.heartbeatIntervalMs||1e4)),t.unRegisterUrl&&"undefined"!=typeof window&&(window.onunload=function(){navigator.sendBeacon?(w.stopped=!0,w.eventSource&&w.eventSource.close(),navigator.sendBeacon(t.unRegisterUrl)):w.stop()}),w.updateSubscriberUrl=t.updateSubscriberUrl,w.updateChannels((t.channels||"").split(","))}else{var x="onJoin"==h||"onLeave"==h||"onUpdate"==h;if(S=t.handlers[h])x?S.call(m||r.body,g):S.call(m||r.body,u,b);else if(!x){var C=t.receivers&&t.receivers.cmd;w.invokeReceiver(C,h,m,b,"cmd")}x&&(S=t.handlers.onCommand)&&S.call(m||r.body,g)}else"trigger"===c?w.raiseEvent(p,b):"css"===c&&css(v||n("body"),h,u);var S,E=t.receivers&&t.receivers[c];if(w.invokeReceiver(E,h,m,b,c),!eventMessageType(h))(S=t.handlers.onMessage)&&S.call(m||r.body,g);t.onTick&&t.onTick()}}},this.onError=function(e){if(!w.stopped){e||(e=event);var t=w.options.onException;null!=t&&t.call(w.eventSource,e),w.options.onTick&&w.options.onTick()}},0===this.channels.length)throw"at least 1 channel is required";this.resolver=this.options.resolver||new NewInstanceResolver,this.eventStreamUri=combinePaths(e,"event-stream")+"?",this.updateChannels(t),this.serviceClient=new JsonServiceClient(e),this.listeners={},this.withCredentials=!0,this.options.handlers||(this.options.handlers={})}exports.ServerEventsClient=ServerEventsClient;var ServerEventReceiver=(Ob.prototype.noSuchMethod=function(e,t){},Ob);function Ob(){}exports.ServerEventReceiver=ServerEventReceiver;var UpdateEventSubscriber=(Rb.prototype.createResponse=function(){return new UpdateEventSubscriberResponse},Rb.prototype.getTypeName=function(){return"UpdateEventSubscriber"},Rb);function Rb(){}exports.UpdateEventSubscriber=UpdateEventSubscriber;var UpdateEventSubscriberResponse=function(){};exports.UpdateEventSubscriberResponse=UpdateEventSubscriberResponse;var GetEventSubscribers=(Tb.prototype.createResponse=function(){return[]},Tb.prototype.getTypeName=function(){return"GetEventSubscribers"},Tb);function Tb(){}exports.GetEventSubscribers=GetEventSubscribers;var ServerEventUser=function(){};exports.ServerEventUser=ServerEventUser;var HttpMethods=(Vb.Get="GET",Vb.Post="POST",Vb.Put="PUT",Vb.Delete="DELETE",Vb.Patch="PATCH",Vb.Head="HEAD",Vb.Options="OPTIONS",Vb.hasRequestBody=function(e){return!("GET"===e||"DELETE"===e||"HEAD"===e||"OPTIONS"===e)},Vb);function Vb(){}exports.HttpMethods=HttpMethods;var GetAccessToken=(Xb.prototype.createResponse=function(){return new GetAccessTokenResponse},Xb.prototype.getTypeName=function(){return"GetAccessToken"},Xb);function Xb(e){Object.assign(this,e)}var GetAccessTokenResponse=function(){};exports.GetAccessTokenResponse=GetAccessTokenResponse;var JsonServiceClient=($b.prototype.setCredentials=function(e,t){this.userName=e,this.password=t},$b.prototype.setBearerToken=function(e){this.bearerToken=e},$b.prototype.get=function(e,t){return"string"!=typeof e?this.send(HttpMethods.Get,e,t):this.send(HttpMethods.Get,null,t,this.toAbsoluteUrl(e))},$b.prototype.delete=function(e,t){return"string"!=typeof e?this.send(HttpMethods.Delete,e,t):this.send(HttpMethods.Delete,null,t,this.toAbsoluteUrl(e))},$b.prototype.post=function(e,t){return this.send(HttpMethods.Post,e,t)},$b.prototype.postToUrl=function(e,t,r){return this.send(HttpMethods.Post,t,r,this.toAbsoluteUrl(e))},$b.prototype.postBody=function(e,t,r){return this.sendBody(HttpMethods.Post,e,t,r)},$b.prototype.put=function(e,t){return this.send(HttpMethods.Put,e,t)},$b.prototype.putToUrl=function(e,t,r){return this.send(HttpMethods.Put,t,r,this.toAbsoluteUrl(e))},$b.prototype.putBody=function(e,t,r){return this.sendBody(HttpMethods.Put,e,t,r)},$b.prototype.patch=function(e,t){return this.send(HttpMethods.Patch,e,t)},$b.prototype.patchToUrl=function(e,t,r){return this.send(HttpMethods.Patch,t,r,this.toAbsoluteUrl(e))},$b.prototype.patchBody=function(e,t,r){return this.sendBody(HttpMethods.Patch,e,t,r)},$b.prototype.publish=function(e,t){return this.sendOneWay(e,t)},$b.prototype.sendOneWay=function(e,t){var r=combinePaths(this.oneWayBaseUrl,nameOf(e));return this.send(HttpMethods.Post,e,null,r)},$b.prototype.sendAll=function(e){if(0==e.length)return Promise.resolve([]);var t=combinePaths(this.replyBaseUrl,nameOf(e[0])+"[]");return this.send(HttpMethods.Post,e,null,t)},$b.prototype.sendAllOneWay=function(e){if(0==e.length)return Promise.resolve(void 0);var t=combinePaths(this.oneWayBaseUrl,nameOf(e[0])+"[]");return this.send(HttpMethods.Post,e,null,t).then(function(e){})},$b.prototype.createUrlFromDto=function(e,t){var r=combinePaths(this.replyBaseUrl,nameOf(t));return HttpMethods.hasRequestBody(e)||(r=appendQueryString(r,t)),r},$b.prototype.toAbsoluteUrl=function(e){return e.startsWith("http://")||e.startsWith("https://")?e:combinePaths(this.baseUrl,e)},$b.prototype.deleteCookie=function(e){this.manageCookies?delete this.cookies[e]:document&&(document.cookie=e+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/")},$b.prototype.createRequest=function(e){var r=this,t=e.method,n=e.request,s=e.url,o=e.args,a=e.body;if(s||(s=this.createUrlFromDto(t,n)),o&&(s=appendQueryString(s,o)),null!=this.bearerToken?this.headers.set("Authorization","Bearer "+this.bearerToken):null!=this.userName&&this.headers.set("Authorization","Basic "+$b.toBase64(this.userName+":"+this.password)),this.manageCookies){var i=Object.keys(this.cookies).map(function(e){var t=r.cookies[e];return t.expires&&t.expires<new Date?null:t.name+"="+encodeURIComponent(t.value)}).filter(function(e){return!!e});0<i.length?this.headers.set("Cookie",i.join("; ")):this.headers.delete("Cookie")}var l=new Headers(this.headers),u=HttpMethods.hasRequestBody(t),c={url:s,method:t,mode:this.mode,credentials:this.credentials,headers:l,compress:!1};return u&&(c.body=a||JSON.stringify(n),isFormData(a)&&l.delete("Content-Type")),null!=this.requestFilter&&this.requestFilter(c),c},$b.prototype.json=function(e){return this.parseJson?this.parseJson(e):e.json()},$b.prototype.createResponse=function(e,t){var r=this;if(!e.ok)throw e;if(this.manageCookies){var n=[];e.headers.forEach(function(e,t){switch(t.toLowerCase()){case"set-cookie":e.split(",").forEach(function(e){return n.push(e)})}}),n.forEach(function(e){var t=parseCookie(e);t&&(r.cookies[t.name]=t)})}e.headers.forEach(function(e,t){switch(t.toLowerCase()){case"x-cookies":0<=e.split(",").indexOf("ss-reftok")&&(r.useTokenCookie=!0)}}),null!=this.responseFilter&&this.responseFilter(e);var s=t&&"string"!=typeof t&&"function"==typeof t.createResponse?t.createResponse():null;if("string"==typeof s)return e.text().then(function(e){return e});var o=e.headers.get("content-type"),a=o&&-1!==o.indexOf("application/json");if(a)return this.json(e).then(function(e){return e});if("undefined"!=typeof Uint8Array&&s instanceof Uint8Array){if("function"!=typeof e.arrayBuffer)throw new Error("This fetch polyfill does not implement 'arrayBuffer'");return e.arrayBuffer().then(function(e){return new Uint8Array(e)})}if("function"==typeof Blob&&s instanceof Blob){if("function"!=typeof e.blob)throw new Error("This fetch polyfill does not implement 'blob'");return e.blob().then(function(e){return e})}var i=e.headers.get("content-length");return"0"===i||null==i&&!a?s:this.json(e).then(function(e){return e})},$b.prototype.handleError=function(e,r,n){var s=this;if(void 0===n&&(n=null),r instanceof Error)throw this.raiseError(e,r);if(r.bodyUsed)throw this.raiseError(r,createErrorResponse(r.status,r.statusText,n));return void 0===r.json&&r.responseStatus?new Promise(function(e,t){return t(s.raiseError(null,r))}):this.json(r).then(function(e){var t=sanitize(e);if(!t.responseStatus)throw createErrorResponse(r.status,r.statusText,n);throw null!=n&&(t.type=n),t}).catch(function(e){if(e instanceof Error||"undefined"!=typeof window&&e instanceof window.DOMException)throw s.raiseError(r,createErrorResponse(r.status,r.statusText,n));throw s.raiseError(r,e)})},$b.prototype.send=function(e,t,r,n){return this.sendRequest({method:e,request:t,args:r,url:n})},$b.prototype.sendBody=function(e,t,r,n){var s=combinePaths(this.replyBaseUrl,nameOf(t));return this.sendRequest({method:e,request:r,body:"string"==typeof r?r:isFormData(r)?r:JSON.stringify(r),url:appendQueryString(s,t),args:n,returns:t})},$b.prototype.sendRequest=function(t){function s(){var e=o.createRequest(t);return o.urlFilter&&o.urlFilter(e.url),fetch(e.url,e).then(function(e){return o.createResponse(e,r)}).catch(function(e){return o.handleError(a,e)})}var o=this,e=this.createRequest(t),r=t.returns||t.request,a=null;return this.urlFilter&&this.urlFilter(e.url),fetch(e.url,e).then(function(e){return a=e,o.createResponse(e,r)}).catch(function(e){if(401===e.status){if(o.refreshToken||o.useTokenCookie||null!=o.cookies["ss-reftok"]){var t=new GetAccessToken({refreshToken:o.refreshToken,useTokenCookie:!!o.useTokenCookie}),r=o.refreshTokenUri||o.createUrlFromDto(HttpMethods.Post,t);o.useTokenCookie&&(o.bearerToken=null,o.headers.delete("Authorization"));var n=o.createRequest({method:HttpMethods.Post,request:t,args:null,url:r});return fetch(r,n).then(function(e){return o.createResponse(e,t).then(function(e){return o.bearerToken=e.accessToken||null,s()})}).catch(function(e){return o.onAuthenticationRequired?o.onAuthenticationRequired().then(s).catch(function(e){return o.handleError(a,e,"RefreshTokenException")}):o.handleError(a,e,"RefreshTokenException")})}if(o.onAuthenticationRequired)return o.onAuthenticationRequired().then(s)}return o.handleError(a,e)})},$b.prototype.raiseError=function(e,t){return null!=this.exceptionFilter&&this.exceptionFilter(e,t),t},$b),Types,_i;function $b(e){void 0===e&&(e="/"),this.baseUrl=e,this.replyBaseUrl=combinePaths(e,"json","reply")+"/",this.oneWayBaseUrl=combinePaths(e,"json","oneway")+"/",this.mode="cors",this.credentials="include",this.headers=new Headers,this.headers.set("Content-Type","application/json"),this.manageCookies="undefined"==typeof document,this.cookies={}}function isFormData(e){return"undefined"!=typeof window&&e instanceof FormData}function createErrorResponse(e,t,r){void 0===r&&(r=null);var n=new ErrorResponse;return null!=r&&(n.type=r),n.responseStatus=new ResponseStatus,n.responseStatus.errorCode=e&&e.toString(),n.responseStatus.message=t,n}function toCamelCase(e){return e?e.charAt(0).toLowerCase()+e.substring(1):e}function toPascalCase(e){return e?e.charAt(0).toUpperCase()+e.substring(1):e}function sanitize(e){if(e.responseStatus)return e;if(e.errors)return e;var t={};for(var r in e)e.hasOwnProperty(r)&&(e[r]instanceof Object?t[toCamelCase(r)]=sanitize(e[r]):t[toCamelCase(r)]=e[r]);if(t.errors=[],null!=e.Errors)for(var n=0,s=e.Errors.length;n<s;n++){var o=e.Errors[n],a={};for(var r in o)a[toCamelCase(r)]=o[r];t.errors.push(a)}return t}function nameOf(e){if(!e)return"null";if("function"==typeof e.getTypeName)return e.getTypeName();var t=e&&e.constructor;if(null==t)throw e+" doesn't have constructor";if(t.name)return t.name;var r=t.toString();return r.substring(9,r.indexOf("("))}function log(e,t){return void 0===t&&(t="LOG"),console.log(t,e),e}function css(e,t,r){for(var n="string"==typeof e?document.querySelectorAll(e):e,s=0;s<n.length;s++){var o=n[s];null!=o&&null!=o.style&&(o.style[t]=r)}}function splitOnFirst(e,t){if(!e)return[e];var r=e.indexOf(t);return 0<=r?[e.substring(0,r),e.substring(r+1)]:[e]}function splitOnLast(e,t){if(!e)return[e];var r=e.lastIndexOf(t);return 0<=r?[e.substring(0,r),e.substring(r+1)]:[e]}function leftPart(e,t){if(null==e)return null;var r=e.indexOf(t);return-1==r?e:e.substring(0,r)}function rightPart(e,t){if(null==e)return null;var r=e.indexOf(t);return-1==r?e:e.substring(r+t.length)}function lastLeftPart(e,t){if(null==e)return null;var r=e.lastIndexOf(t);return-1==r?e:e.substring(0,r)}function lastRightPart(e,t){if(null==e)return null;var r=e.lastIndexOf(t);return-1==r?e:e.substring(r+t.length)}function chop(e,t){return void 0===t&&(t=1),t=Math.abs(t),e?t<e.length?e.substring(0,e.length-t):"":e}function onlyProps(t,e){var r={};return e.forEach(function(e){return r[e]=t[e]}),r}function splitCase(e){return"string"!=typeof e?e:e.replace(/([A-Z]|[0-9]+)/g," $1").replace(/_/g," ").trim()}function humanize(e){return!e||0<=e.indexOf(" ")?e:splitCase(e)}function queryString(e){if(!e||-1===e.indexOf("?"))return{};for(var t=splitOnFirst(e,"?")[1].split("&"),r={},n=0;n<t.length;++n){var s=t[n].split("=");r[s[0]]=1<s.length?decodeURIComponent(s[1].replace(/\+/g," ")):null}return r}function combinePaths(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r,n,s=[];for(r=0,n=e.length;r<n;r++){var o=e[r];s=-1===o.indexOf("://")?s.concat(o.split("/")):s.concat(o.lastIndexOf("/")===o.length-1?o.substring(0,o.length-1):o)}var a=[];for(r=0,n=s.length;r<n;r++){var i=s[r];i&&"."!==i&&(".."===i?a.pop():a.push(i))}return""===s[0]&&a.unshift(""),a.join("/")||(a.length?"/":".")}function createPath(e,t){var r={};for(var n in t)r[n.toLowerCase()]=n;for(var s=e.split("/"),o="",a=0;a<s.length;a++){var i=s[a];if(null==i&&(i=""),"{"===i[0]&&"}"===i[i.length-1]){var l=r[i.substring(1,i.length-1).toLowerCase()];l&&(i=t[l],delete t[l])}0<o.length&&(o+="/"),o+=i}return o}function createUrl(e,t){return appendQueryString(createPath(e,t),t)}function appendQueryString(e,t){for(var r in t)t.hasOwnProperty(r)&&(e+=0<=e.indexOf("?")?"&":"?",e+=r+"="+qsValue(t[r]));return e}function qsValue(e){return null==e?"":"undefined"!=typeof Uint8Array&&e instanceof Uint8Array?bytesToBase64(e):encodeURIComponent(e)||""}function bytesToBase64(e){for(var t=(3-e.length%3)%3,r="",n=void 0,s=e.length,o=0,a=0;a<s;a++)n=a%3,o|=e[a]<<(16>>>n&24),2!==n&&e.length-a!=1||(r+=String.fromCharCode(uint6ToB64(o>>>18&63),uint6ToB64(o>>>12&63),uint6ToB64(o>>>6&63),uint6ToB64(63&o)),o=0);return 0==t?r:r.substring(0,r.length-t)+(1==t?"=":"==")}function uint6ToB64(e){return e<26?e+65:e<52?e+71:e<62?e-4:62===e?43:63===e?47:65}function _btoa(e){return"function"==typeof btoa?btoa(e):Buffer.from(e).toString("base64")}function _atob(e){return"function"==typeof atob?atob(e):Buffer.from(e,"base64").toString()}function stripQuotes(e){return e&&'"'==e[0]&&'"'==e[e.length]?e.slice(1,-1):e}function tryDecode(t){try{return decodeURIComponent(t)}catch(e){return t}}function parseCookie(e){if(!e)return null;for(var t=null,r=e.split(/; */),n=0;n<r.length;n++){var s=splitOnFirst(r[n],"="),o=s[0].trim(),a=1<s.length?tryDecode(stripQuotes(s[1].trim())):null;if(0==n)t={name:o,value:a,path:"/"};else{var i=o.toLowerCase();"httponly"==i?t.httpOnly=!0:"secure"==i?t.secure=!0:"expires"==i?(t.expires=new Date(a),"Invalid Date"===t.expires.toString()&&(t.expires=new Date(a.replace(/-/g," ")))):t[o]=a}}return t}function normalizeKey(e){return e.toLowerCase().replace(/_/g,"")}function isArray(e){return"[object Array]"===Object.prototype.toString.call(e)}function normalize(e,t){if(isArray(e)){if(!t)return e;for(var r=[],n=0;n<e.length;n++)r[n]=normalize(e[n],t);return r}if("object"!=typeof e)return e;var s={};for(var o in e)s[normalizeKey(o)]=t?normalize(e[o],t):e[o];return s}function getField(e,t){return null==e||null==t?null:e[t]||e[Object.keys(e).filter(function(e){return normalizeKey(e)===normalizeKey(t)})[0]||""]}function parseResponseStatus(t,r){void 0===r&&(r=null);try{var e=JSON.parse(t);return sanitize(e.ResponseStatus||e.responseStatus)}catch(e){return{message:r||e.message||e,__error:{error:e,json:t}}}}function toFormData(e){if("undefined"!=typeof window){var t=new FormData;for(var r in e)t.append(r,e[r]);return t}}function toObject(e){var t=this,r={};if(!e)return r;if("object"!=typeof e)throw new Error("keys must be an Array of object keys");return Array.prototype.slice.call(e).forEach(function(e){t[e]&&(r[e]=t[e])}),r}function errorResponseSummary(){var e=this.responseStatus||this.ResponseStatus;if(null!=e){var t=e.ErrorCode?sanitize(e):e;return t.errors&&0!=t.errors.length?void 0:t.message||t.errorCode}}function errorResponseExcept(e){var t=this.responseStatus||this.ResponseStatus;if(null!=t){var r=t.ErrorCode?sanitize(t):t,n=toVarNames(e);if(n&&null!=r.errors&&0!=r.errors.length){for(var s=n.map(function(e){return(e||"").toLowerCase()}),o=0,a=r.errors;o<a.length;o++){var i=a[o];if(-1!==s.indexOf((i.fieldName||"").toLowerCase()))return}for(var l=0,u=r.errors;l<u.length;l++){i=u[l];if(-1===s.indexOf((i.fieldName||"").toLowerCase()))return i.message||i.errorCode}}return r.message||r.errorCode||void 0}}function errorResponse(t){if(null==t)return errorResponseSummary.call(this);var e=this.responseStatus||this.ResponseStatus;if(null!=e){var r=e.ErrorCode?sanitize(e):e;if(null!=r.errors&&0!=r.errors.length){var n=r.errors.find(function(e){return(e.fieldName||"").toLowerCase()==t.toLowerCase()});return n?n.message||n.errorCode:void 0}}}function toDate(e){return e?"function"==typeof e.getMonth?e:"/"==e[0]?new Date(parseFloat(/Date\(([^)]+)\)/.exec(e)[1])):new Date(e):null}function toDateFmt(e){return dateFmt(toDate(e))}function padInt(e){return e<10?"0"+e:e}function dateFmt(e){return void 0===e&&(e=new Date),e.getFullYear()+"/"+padInt(e.getMonth()+1)+"/"+padInt(e.getDate())}function dateFmtHM(e){return void 0===e&&(e=new Date),e.getFullYear()+"/"+padInt(e.getMonth()+1)+"/"+padInt(e.getDate())+" "+padInt(e.getHours())+":"+padInt(e.getMinutes())}function timeFmt12(e){return void 0===e&&(e=new Date),padInt((e.getHours()+24)%12||12)+":"+padInt(e.getMinutes())+":"+padInt(e.getSeconds())+" "+(12<e.getHours()?"PM":"AM")}function toLocalISOString(e){return void 0===e&&(e=new Date),e.getFullYear()+"-"+padInt(e.getMonth()+1)+"-"+padInt(e.getDate())+"T"+padInt(e.getHours())+":"+padInt(e.getMinutes())+":"+padInt(e.getSeconds())}function bsAlert(e){return'<div class="alert alert-danger">'+e+"</div>"}function attr(e,t){return e.getAttribute(t)}function sattr(e,t,r){return e.setAttribute(t,r)}function rattr(e,t){return e.removeAttribute(t)}function createElement(e,t,r){var n={className:"class",htmlFor:"for"},s=document.createElement(e);if(r)for(var o in r)sattr(s,n[o]||o,r[o]);return t&&t.insertAfter&&t.insertAfter.parentNode.insertBefore(s,t.insertAfter.nextSibling),s}function showInvalidInputs(){var e=attr(this,"data-invalid");if(e){var t="checkbox"===this.type||"radio"===this.type||hasClass(this,"form-check"),r=t?parent(this,"form-check"):null;t?addClass(r||this.parentElement,"is-invalid form-control"):addClass(this,"is-invalid");var n=this.nextElementSibling,s=!n||attr(n,"for")!==this.id&&"SMALL"!==n.tagName?this:t?r||n.parentElement:n;(null!=s&&s.nextElementSibling&&hasClass(s.nextElementSibling,"invalid-feedback")?s.nextElementSibling:createElement("div",{insertAfter:s},{className:"invalid-feedback"})).innerHTML=e}}function parent(e,t){for(;null!=e&&!hasClass(e,t);)e=e.parentElement;return e}function hasClass(e,t){return!!e&&(e.classList?e.classList.contains(t):-1<(" "+e.className+" ").replace(/[\n\t\r]/g," ").indexOf(" "+t+" "))}function addClass(e,t){var r;return e?e.classList?(r=e.classList).add.apply(r,t.split(" ")):hasClass(e,t)?null:e.className=(e.className+" "+t).trim():null}function remClass(e,t){return e?e.classList?e.classList.remove(t):hasClass(e,t)?e.className=e.className.replace(/(\s|^)someclass(\s|$)/," "):null:null}function bootstrap(e){for(var t=(e||document).querySelectorAll("[data-invalid]"),r=0;r<t.length;r++)showInvalidInputs.call(t[r])}function handleEvent(u,e,c){void 0===e&&(e=document),e.addEventListener(c,function(e){var t="data-"+c,r=e.target,n=attr(r,t);if(!n){var s=r.closest("["+t+"]");s&&(n=attr(s,t),r=s)}if(n){var o=n.indexOf(":");if(0<=o){var a=n.substring(0,o),i=n.substring(o+1);(l=u[a])&&l.apply(r,i.split(","))}else{var l;(l=u[n])&&l.apply(r,[].slice.call(arguments))}}})}function bindHandlers(t,r,e){void 0===r&&(r=document),void 0===e&&(e=null),e&&e.events?e.events.forEach(function(e){return handleEvent(t,r,e)}):["click","dblclick","change","focus","blur","focusin","focusout","select","keydown","keypress","keyup","hover","toggle","input"].forEach(function(e){r.querySelector("[data-"+e+"]")&&handleEvent(t,r,e)})}function bootstrapForm(t,r){t&&(r.model&&populateForm(t,r.model),t.onsubmit=function(e){return e.preventDefault(),r.type="bootstrap-v4",ajaxSubmit(t,r)})}function applyErrors(e,n,t){var r={overrideMessages:!1,messages:{NotEmpty:"Required",NotNull:"Required",Email:"Invalid email",AlreadyExists:"Already exists"},errorFilter:function(e,t,r){return this.overrideMessages?this.messages[t]||e||splitCase(t):e||splitCase(t)}};if(clearErrors(e),n){n=sanitize(n),addClass(e,"has-errors");var a=t&&"bootstrap-v4"===t.type,s=__assign(__assign({},r),t);t.messages&&(s.overrideMessages=!0);var o=s.errorFilter.bind(s),i=n.errors,l=e.querySelectorAll.bind(e);if(i&&i.length){var u={},c={};l("input,textarea,select,button").forEach(function(e){var t=e,r=t.previousElementSibling,n=t.nextElementSibling,s=("radio"===t.type||"checkbox"===t.type?null:t.id)||attr(t,"name");if(s){var o=s.toLowerCase();u[o]=t,a||(hasClass(r,"help-inline")||hasClass(r,"help-block")?c[o]=r:(hasClass(n,"help-inline")||hasClass(n,"help-block"))&&(c[o]=n))}}),l(".help-inline[data-for],.help-block[data-for]").forEach(function(e){var t=attr(e,"data-for").toLowerCase();c[t]=e});for(var p=0,f=i;p<f.length;p++){var h=f[p],d=(h.fieldName||"").toLowerCase(),v=u[d];if(v)if(a){var m=attr(v,"type");"radio"===m||"checkbox"===m||addClass(v,"is-invalid"),sattr(v,"data-invalid",o(h.message,h.errorCode,"field"))}else addClass(v,"error"),addClass(v.parentElement,"has-error");var b=c[d];b&&(addClass(b,"error"),b.innerHTML=o(h.message,h.errorCode,"field"),b.style.display="block")}l("[data-validation-summary]").forEach(function(e){var t=attr(e,"data-validation-summary").split(","),r=errorResponseExcept.call(n,t);r&&(e.innerHTML=bsAlert(r))})}else{var g=o(n.message||splitCase(n.errorCode),n.errorCode,"summary");a?l("[data-validation-summary]").forEach(function(e){return e.innerHTML="<"===g[0]?g:bsAlert(g)}):l(".error-summary").forEach(function(e){e.innerHTML=g,e.style.display="block"})}return e}}function clearErrors(e){remClass(e,"has-errors");var t=e.querySelectorAll.bind(e);t(".error-summary").forEach(function(e){e.innerHTML="",e.style.display="none"}),t("[data-validation-summary]").forEach(function(e){e.innerHTML=""}),t(".error").forEach(function(e){return remClass(e,"error")}),t(".form-check.is-invalid [data-invalid]").forEach(function(e){rattr(e,"data-invalid")}),t(".form-check.is-invalid").forEach(function(e){return remClass(e,"form-control")}),t(".is-invalid").forEach(function(e){remClass(e,"is-invalid"),rattr(e,"data-invalid")}),t(".is-valid").forEach(function(e){return remClass(e,"is-valid")})}function toVarNames(e){return e?isArray(e)?e:e.split(",").map(function(e){return e.trim()}):[]}function formSubmit(e){void 0===e&&(e={});var t,r=this,n=attr(r,"enctype")||Types.UrlEncoded;if(n==Types.MultiPart&&void 0===window.FormData)throw new Error("FormData Type is needed to send '"+Types.MultiPart+"' Content Types");try{t=serializeForm(r,n)}catch(e){throw new Error(""+(e.message||e))}var s=new Headers;s.set("Accept",Types.Json),s.set("Content-Type",n);var o={method:attr(r,"method")||"POST",credentials:"include",mode:"cors",headers:s,body:t};return e.requestFilter&&e.requestFilter(o),fetch(new Request(e.url||attr(r,"action"),o)).catch(function(e){throw new Error("Network is unreachable ("+(e.message||e)+")")}).then(function(t){return e.responseFilter&&e.responseFilter(t),t.ok?(handleHeaderBehaviors(r,t),fromResponse(t)):t.json().catch(function(e){throw new Error("The request failed with "+(t.statusText||t.status))}).then(function(e){throw Object.assign(new ErrorResponse,sanitize(e))})})}function handleHeaderBehaviors(e,t){var r=t.headers.get("X-Location");r&&(location.href=r);var n=t.headers.get("X-Trigger");if(n){var s=n.indexOf(":"),o=0<=s?n.substring(0,s):n,a=0<=s?n.substring(s+1):null;triggerEvent(e,o,a?[a]:[])}}function ajaxSubmit(s,o){void 0===o&&(o={});var a="bootstrap-v4"===o.type;clearErrors(s);try{if(o.validate&&!1===o.validate.call(s))return!1}catch(e){return!1}var i=s.querySelectorAll.bind(s);addClass(s,"loading");var e=null==o.onSubmitDisable?"[type=submit]":o.onSubmitDisable,t=null!=e&&""!=e;function r(e,t){if(void 0===t&&(t=null),t)applyErrors(s,t.ResponseStatus||t.responseStatus,__assign({},o));else if(e){addClass(s,"has-errors");var r=i(".error-summary")[0];if(r&&(r.innerHTML=e),a){var n=i("[data-validation-summary]")[0];n&&(n.innerHTML=bsAlert(e))}}o.error&&o.error.call(s,t),a&&i("[data-invalid]").forEach(function(e){return showInvalidInputs.call(e)})}return t&&i(e).forEach(function(e){sattr(e,"disabled","disabled")}),(o.submit||formSubmit).call(s,o).then(function(e){return o.success&&o.success.call(s,e),!1}).catch(function(e){e.responseStatus?r(null,e):r(""+(e.message||e),null)}).finally(function(){remClass(s,"loading"),t&&i(e).forEach(function(e){rattr(e,"disabled")}),o.complete&&o.complete.call(s)})}function fromResponse(e){var t=e.headers.get("content-type"),r=t&&-1!==t.indexOf(Types.Json);if(r)return e.json();var n=e.headers.get("content-length");return"0"===n||null==n&&!r?null:e.json()}function serializeForm(e,t){return void 0===t&&(t=null),t===Types.MultiPart?new FormData(e):t==Types.Json?JSON.stringify(serializeToObject(e)):serializeToUrlEncoded(e)}function formEntries(e,t,r){for(var n,s=e,o=s.elements.length,a=0;a<o;a++)if((n=s.elements[a]).name&&!n.disabled&&"file"!=n.type&&"reset"!=n.type&&"submit"!=n.type&&"button"!=n.type)if("select-multiple"==n.type)for(var i=s.elements[a].options.length-1;0<=i;i--)n.options[i].selected&&r(t,n.name,n.options[i].value);else("checkbox"!=n.type&&"radio"!=n.type||n.checked)&&r(t,n.name,n.value);return t}function serializeToObject(e){return formEntries(e,{},function(e,t,r){return e[t]=r})}function serializeToUrlEncoded(e){return formEntries(e,[],function(e,t,r){return"string"==typeof r?e.push(encodeURIComponent(t)+"="+encodeURIComponent(r)):null}).join("&").replace(/%20/g,"+")}function serializeToFormData(e){return formEntries(e,new FormData,function(e,t,r){return e.append(t,r)})}function triggerEvent(e,t,r){if(void 0===r&&(r=null),document.createEvent){(n=document.createEvent("click"==t||t.startsWith("mouse")?"MouseEvents":"HTMLEvents")).initEvent(t,!0,!0),n.data=r,e.dispatchEvent(n)}else{var n=document.createEventObject();e.fireEvent("on"+t,n)}}function populateForm(e,t){if(t){var r;for(var n in t){var s=t[n];null==s&&(s="");var o=e.elements.namedItem(n)||e.elements.namedItem((r=n)?r[0]===r[0].toUpperCase()?toCamelCase(r):r[0]===r[0].toLowerCase()?toPascalCase(r):r:r),a=o;if(o)switch(a.type||o[0].type){case"radio":case"checkbox":for(var i=o.length,l=0;l<i;l++)o[l].checked=-1<s.indexOf(o[l].value);break;case"select-multiple":var u=isArray(s)?s:[s],c=o;for(l=0;l<c.options.length;l++)c.options[l].selected=-1<u.indexOf(c.options[l].value);break;case"select":case"select-one":a.value=s.toString()||s;break;case"date":var p=toDate(s);p&&(a.value=p.toISOString().split("T")[0]);break;default:a.value=s}}}}function trimEnd(e,t){for(var r=e.length;0<r&&e[r-1]===t;)--r;return r<e.length?e.substring(0,r):e}function safeVarName(e){return e.replace(/[\W]+/g,"")}function pick(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&0<=t.indexOf(n)&&(r[n]=e[n]);return r}function omit(e,t){var r={};for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)<0&&(r[n]=e[n]);return r}function activeClassNav(e,t){return null!=e.href&&(e.exact||t.length<=1?trimEnd(t,"/").toLowerCase()===trimEnd(e.href,"/").toLowerCase():trimEnd(t,"/").toLowerCase().startsWith(trimEnd(e.href,"/").toLowerCase()))?"active":null}function activeClass(e,t,r){return null!=e&&(r||t.length<=1?trimEnd(t,"/").toLowerCase()===trimEnd(e,"/").toLowerCase():trimEnd(t,"/").toLowerCase().startsWith(trimEnd(e,"/").toLowerCase()))?"active":null}function bootstrapColors(){return["primary","secondary","success","info","warning","danger","light","dark"]}function btnColorClass(e){for(var t=0,r=bootstrapColors();t<r.length;t++){var n=r[t];if(e[n])return"btn-"+n;if(e["outline-"+n])return"btn-outline-"+n}return null}function bootstrapSizes(){return["xs","sm","md","lg"]}function btnSizeClass(e){for(var t=0,r=bootstrapSizes();t<r.length;t++){var n=r[t];if(e[n])return"btn-"+n}return null}function btnClasses(e){var t=[],r=btnColorClass(e);r&&t.push(r);var n=btnSizeClass(e);return n&&t.push(n),e.block&&t.push("btn-block"),t}exports.JsonServiceClient=JsonServiceClient,exports.isFormData=isFormData,exports.toCamelCase=toCamelCase,exports.toPascalCase=toPascalCase,exports.sanitize=sanitize,exports.nameOf=nameOf,exports.css=css,exports.splitOnFirst=splitOnFirst,exports.splitOnLast=splitOnLast,exports.leftPart=leftPart,exports.rightPart=rightPart,exports.lastLeftPart=lastLeftPart,exports.lastRightPart=lastRightPart,exports.chop=chop,exports.onlyProps=onlyProps,exports.humanize=humanize,exports.queryString=queryString,exports.combinePaths=combinePaths,exports.createPath=createPath,exports.createUrl=createUrl,exports.appendQueryString=appendQueryString,exports.bytesToBase64=bytesToBase64,JsonServiceClient.toBase64=function(e){return _btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode(new Number("0x"+t).valueOf())}))},exports.stripQuotes=stripQuotes,exports.tryDecode=tryDecode,exports.parseCookie=parseCookie,exports.normalizeKey=normalizeKey,exports.normalize=normalize,exports.getField=getField,exports.parseResponseStatus=parseResponseStatus,exports.toFormData=toFormData,exports.toObject=toObject,exports.errorResponseSummary=errorResponseSummary,exports.errorResponseExcept=errorResponseExcept,exports.errorResponse=errorResponse,exports.toDate=toDate,exports.toDateFmt=toDateFmt,exports.padInt=padInt,exports.dateFmt=dateFmt,exports.dateFmtHM=dateFmtHM,exports.timeFmt12=timeFmt12,exports.toLocalISOString=toLocalISOString,exports.createElement=createElement,exports.bootstrap=bootstrap,"undefined"!=typeof window&&void 0!==window.Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null})),exports.bindHandlers=bindHandlers,exports.bootstrapForm=bootstrapForm,_i=Types||(Types={}),_i.MultiPart="multipart/form-data",_i.UrlEncoded="application/x-www-form-urlencoded",_i.Json="application/json",exports.toVarNames=toVarNames,exports.formSubmit=formSubmit,exports.ajaxSubmit=ajaxSubmit,exports.serializeForm=serializeForm,exports.serializeToObject=serializeToObject,exports.serializeToUrlEncoded=serializeToUrlEncoded,exports.serializeToFormData=serializeToFormData,exports.triggerEvent=triggerEvent,exports.populateForm=populateForm,exports.trimEnd=trimEnd,exports.safeVarName=safeVarName,exports.pick=pick,exports.omit=omit,exports.activeClassNav=activeClassNav,exports.activeClass=activeClass,exports.BootstrapColors=bootstrapColors(),exports.btnColorClass=btnColorClass,exports.BootstrapSizes=bootstrapSizes(),exports.btnSizeClass=btnSizeClass,exports.btnClasses=btnClasses;var NavDefaults=(fl.create=function(){return new NavOptions},fl.forNav=function(e){return e||fl.create()},fl.overrideDefaults=function(e,t){return null==e?t:((e=Object.assign({},e)).navClass===fl.navClass&&null!=t.navClass&&(e.navClass=t.navClass),e.navItemClass===fl.navItemClass&&null!=t.navItemClass&&(e.navItemClass=t.navItemClass),e.navLinkClass===fl.navLinkClass&&null!=t.navLinkClass&&(e.navLinkClass=t.navLinkClass),e.childNavItemClass===fl.childNavItemClass&&null!=t.childNavItemClass&&(e.childNavItemClass=t.childNavItemClass),e.childNavLinkClass===fl.childNavLinkClass&&null!=t.childNavLinkClass&&(e.childNavLinkClass=t.childNavLinkClass),e.childNavMenuClass===fl.childNavMenuClass&&null!=t.childNavMenuClass&&(e.childNavMenuClass=t.childNavMenuClass),e.childNavMenuItemClass===fl.childNavMenuItemClass&&null!=t.childNavMenuItemClass&&(e.childNavMenuItemClass=t.childNavMenuItemClass),e)},fl.showNav=function(e,t){return null==t||0===t.length?null==e.show:!(null!=e.show&&t.indexOf(e.show)<0||null!=e.hide&&0<=t.indexOf(e.hide))},fl.navClass="nav",fl.navItemClass="nav-item",fl.navLinkClass="nav-link",fl.childNavItemClass="nav-item dropdown",fl.childNavLinkClass="nav-link dropdown-toggle",fl.childNavMenuClass="dropdown-menu",fl.childNavMenuItemClass="dropdown-item",fl);function fl(){}exports.NavDefaults=NavDefaults;var NavLinkDefaults=(ll.forNavLink=function(e){return e||NavDefaults.create()},ll);function ll(){}exports.NavLinkDefaults=NavLinkDefaults;var NavbarDefaults=(nl.create=function(){return new NavOptions({navClass:nl.navClass})},nl.forNavbar=function(e){return NavDefaults.overrideDefaults(e,nl.create())},nl.navClass="navbar-nav",nl);function nl(){}exports.NavbarDefaults=NavbarDefaults;var NavButtonGroupDefaults=(pl.create=function(){return new NavOptions({navClass:pl.navClass,navItemClass:pl.navItemClass})},pl.forNavButtonGroup=function(e){return NavDefaults.overrideDefaults(e,pl.create())},pl.navClass="btn-group",pl.navItemClass="btn btn-primary",pl);function pl(){}exports.NavButtonGroupDefaults=NavButtonGroupDefaults;var LinkButtonDefaults=(rl.create=function(){return new NavOptions({navItemClass:rl.navItemClass})},rl.forLinkButton=function(e){return NavDefaults.overrideDefaults(e||null,rl.create())},rl.navItemClass="btn",rl);function rl(){}exports.LinkButtonDefaults=LinkButtonDefaults;var UserAttributes=(tl.fromSession=function(e){var t=[];return null!=e&&(t.push("auth"),e.roles&&t.push.apply(t,e.roles.map(function(e){return"role:"+e})),e.permissions&&t.push.apply(t,e.permissions.map(function(e){return"perm:"+e}))),t},tl);function tl(){}exports.UserAttributes=UserAttributes;var NavOptions=(yl.fromSession=function(e,t){return(t=t||new yl).attributes=UserAttributes.fromSession(e),t},yl);function yl(e){this.attributes=[],this.navClass=NavDefaults.navClass,this.navItemClass=NavDefaults.navItemClass,this.navLinkClass=NavDefaults.navLinkClass,this.childNavItemClass=NavDefaults.childNavItemClass,this.childNavLinkClass=NavDefaults.childNavLinkClass,this.childNavMenuClass=NavDefaults.childNavMenuClass,this.childNavMenuItemClass=NavDefaults.childNavMenuItemClass,Object.assign(this,e)}function classNames(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=[],n=0;n<e.length;n++){var s=e[n];if(s){var o=typeof s;if("string"==o||"number"==o)r.push(s);else if(Array.isArray(s)&&s.length){var a=classNames.apply(null,s);a&&r.push(a)}else if("object"==o)for(var i=0,l=Object.keys(s);i<l.length;i++){var u=l[i];s[u]&&r.push(u)}}}return r.join(" ")}function fromXsdDuration(e){var t=0,r=0,n=0,s=0,o=0,a=splitOnFirst(e.substring(1),"T"),i=2==a.length,l=splitOnFirst(a[0],"D");if(2==l.length&&(t=parseInt(l[0],10)||0),i){var u=splitOnFirst(a[1],"H");2==u.length&&(r=parseInt(u[0],10)||0);var c=splitOnFirst(u[u.length-1],"M");2==c.length&&(n=parseInt(c[0],10)||0);var p=splitOnFirst(c[c.length-1],"S");2==p.length&&(o=parseFloat(p[0])),o-=s=0|o}return 24*t*60*60+60*r*60+60*n+s+o}function timeFmt(e,t){var r,n=0|e,s=n,o=60<=s?s%60:s,a=60<=(s/=60)?s%60:s,i=24<=(s/=60)?s%24:s,l=s/24,u=o+(e-n),c=t?"P":"";t?(0<(0|l)&&(c+=(0|l)+"D"),(0==l||0<i+a+o+u)&&(c+="T",0<(0|i)&&(c+=(0|i)+"H"),0<(0|a)&&(c+=(0|a)+"M"),0<u?c+=(r=trimEnd(trimEnd(r=u.toFixed(7),"0"),"."))+"S":2==c.length&&(c+="0S"))):(0<(0|l)&&(c+=(0|l)+":"),c+=padInt(0|i)+":"+padInt(0|a)+":",0<u?(r=trimEnd(trimEnd(r=u.toFixed(7),"0"),"."),c+=10<=u?""+r:"0"+r):c+="00");return c}function toXsdDuration(e){return timeFmt(e,!0)}function toTimeSpanFmt(e){return timeFmt(e,!1)}function flatMap(r,e){return e.reduce(function(e,t){return e.concat(r(t))},[])}function uniq(e){return Array.from(new Set(e)).sort(function(e,t){return t<e?1:-1})}function enc(e){return null==e?null:"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):""+e}function htmlAttrs(t){var r=[];return Object.keys(t).forEach(function(e){0<r.length&&r.push(" "),r.push(e),r.push('="'),r.push(enc(t[e])),r.push('"')}),r.join("")}function indexOfAny(e,t){for(var r=0,n=t.length;r<n;r++){var s=e.indexOf(t[r]);if(0<=s)return s}return-1}function isNullOrEmpty(e){return null==e||""===e}function fromDateTime(e){return toDate(e)}function toDateTime(e){return"/Date("+e.getTime()+")/"}function fromTimeSpan(e){return e}function toTimeSpan(e){return e}function fromGuid(e){return e}function toGuid(e){return e}function fromByteArray(e){for(var t=_atob(e),r=t.length,n=new Uint8Array(r),s=0;s<r;s++)n[s]=t.charCodeAt(s);return n}function toByteArray(e){return _btoa(String.fromCharCode.apply(null,e))}function toBase64String(e){return JsonServiceClient.toBase64(e)}exports.NavOptions=NavOptions,exports.classNames=classNames,exports.fromXsdDuration=fromXsdDuration,exports.toXsdDuration=toXsdDuration,exports.toTimeSpanFmt=toTimeSpanFmt,exports.flatMap=flatMap,exports.uniq=uniq,exports.enc=enc,exports.htmlAttrs=htmlAttrs,exports.indexOfAny=indexOfAny,exports.isNullOrEmpty=isNullOrEmpty,exports.fromDateTime=fromDateTime,exports.toDateTime=toDateTime,exports.fromTimeSpan=fromTimeSpan,exports.toTimeSpan=toTimeSpan,exports.fromGuid=fromGuid,exports.toGuid=toGuid,exports.fromByteArray=fromByteArray,exports.toByteArray=toByteArray,exports.toBase64String=toBase64String;var StringBuffer=(Qm.prototype.set=function(e){this.buffer_=""+e},Qm.prototype.append=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(this.buffer_+=String(e),null!=t)for(var s=1;s<arguments.length;s++)this.buffer_+=arguments[s];return this},Qm.prototype.clear=function(){this.buffer_=""},Qm.prototype.getLength=function(){return this.buffer_.length},Qm.prototype.toString=function(){return this.buffer_},Qm);function Qm(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer_="",null!=e&&this.append.apply(this,arguments)}exports.StringBuffer=StringBuffer;var JSV=($m.encodeString=function(e){return null==e?null:""===e?'""':(e.indexOf('"')&&(e=e.replace(/"/g,'""')),0<=indexOfAny(e,$m.ESCAPE_CHARS)?'"'+e+'"':e)},$m.encodeArray=function(e){for(var t,r=new StringBuffer,n=0,s=e.length;n<s;n++)isNullOrEmpty(t=e[n])||"function"==typeof t||(0<r.getLength()&&r.append(","),r.append($m.stringify(t)));return"["+r.toString()+"]"},$m.encodeObject=function(e){var t,r=new StringBuffer;for(var n in e)t=e[n],e.hasOwnProperty(n)&&!isNullOrEmpty(t)&&"function"!=typeof t&&(0<r.getLength()&&r.append(","),r.append($m.encodeString(n)),r.append(":"),r.append($m.stringify(t)));return"{"+r.toString()+"}"},$m.stringify=function(e){if(null==e)return null;var t=typeof e;if("function"==t||"symbol"==t)return null;if("object"==t){var r=e.constructor.toString().toLowerCase();return 0<=r.indexOf("string")?$m.encodeString(e):0<=r.indexOf("boolean")?e?"true":"false":0<=r.indexOf("number")?e:0<=r.indexOf("date")?$m.encodeString(toLocalISOString(e)):0<=r.indexOf("array")?$m.encodeArray(e):$m.encodeObject(e)}switch(t){case"string":return $m.encodeString(e);case"boolean":return e?"true":"false";case"number":default:return e}},$m.ESCAPE_CHARS=['"',":",",","{","}","[","]","\r","\n"],$m);function $m(){}function uniqueKeys(e){var t=[];return e.forEach(function(e){return Object.keys(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)})}),t}function alignLeft(e,t,r){return void 0===r&&(r=" "),t<0?"":t+1-e.length<=0?e:r+e+r.repeat(t+1-e.length)}function alignCenter(e,t,r){if(void 0===r&&(r=" "),t<0)return"";e||(e="");var n=e.length,s=Math.floor(t/2-n/2),o=Math.abs(n%2-t%2);return r.repeat(s+1)+e+r.repeat(s+1+o)}function alignRight(e,t,r){return void 0===r&&(r=" "),t<0?"":t+1-e.length<=0?e:r.repeat(t+1-e.length)+e+r}function alignAuto(e,t,r){void 0===r&&(r=" ");var n=""+e;return n.length<=t?"number"==typeof e?alignRight(n,t,r):alignLeft(n,t,r):n}exports.JSV=JSV,exports.uniqueKeys=uniqueKeys,exports.alignLeft=alignLeft,exports.alignCenter=alignCenter,exports.alignRight=alignRight,exports.alignAuto=alignAuto;var Inspect=(Jn.vars=function(e){var t=nodeRequire();if("function"==typeof t){var r=process.env.INSPECT_VARS;if(r&&e){var n=t("fs"),s=r.replace(/\\/g,"/");if(0<=s.indexOf("/")){var o=t("path").dirname(s);n.existsSync(o)||n.mkdirSync(o)}n.writeFileSync(s,JSON.stringify(e))}}},Jn.dump=function(e){return JSON.stringify(e,null,4).replace(/"/g,"")},Jn.printDump=function(e){console.log(Jn.dump(e))},Jn.dumpTable=function(e){var t=e,n=uniqueKeys(t),o={};n.forEach(function(n){var s=n.length;t.forEach(function(e){var t=e[n];if(null!=t){var r=(""+t).length;s<r&&(s=r)}}),o[n]=s});var r=Object.keys(o).length,s=Object.keys(o).map(function(e){return o[e]}).reduce(function(e,t){return e+t},0)+2*r+(r+1),a=[];a.push("+"+"-".repeat(s-2)+"+");var i="|";return n.forEach(function(e){return i+=alignCenter(e,o[e])+"|"}),a.push(i),a.push("|"+"-".repeat(s-2)+"|"),t.forEach(function(t){var r="|";n.forEach(function(e){return r+=alignAuto(t[e],o[e])+"|"}),a.push(r)}),a.push("+"+"-".repeat(s-2)+"+"),a.join("\n")},Jn.printDumpTable=function(e){console.log(Jn.dumpTable(e))},Jn);function Jn(){}exports.Inspect=Inspect});